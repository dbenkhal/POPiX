 <HTML>
    <HEAD>
    <meta name="author" content="Leonardo de Moura" />
    <meta name="author" content="Nikolaj Bjorner" />
    <meta name="description" content="Z3: theorem prover" />
    <meta name="keywords" content="decision procedure, theorem prover, SMT-LIB, SMTLIB, SMT LIB, SMT Solver, SMTCOMP, SMT-COMP, SAT solver, formal methods, constraint solver, software verification, hardware verification" />
      <TITLE>Z3: Theorem Prover</TITLE>
      <LINK HREF="z3.css" REL="stylesheet" TYPE="text/css">
      <LINK href="tabs.css" rel="stylesheet" type="text/css">
    </HEAD>
<BODY BGCOLOR="#FFFFFF">

<table>
<tr>
<th style="width:120px"><a style="border=0px" class="el" href="index.html"><img border="0" src="z3.png" alt="Z3" /></a></th>
<th style="width:100%">
<div id="nav">
<ul>
<li><a href="download.html">Download</a></li>
<li>/</li>
<li><a href="documentation.html#tutorial">Tutorials</a></li>
<li>/</li>
<li><a href="documentation.html">Documentation</a></li>
<li>/</li>
<li><a href="mail.html">Contact</a></li>
<li>/</li>
<li><a href="faq.html">FAQ</a></li>
<li>/</li>
<li><a href="awards.html">Awards</a></li>
<li>/</li>
<li><a href="http://research.microsoft.com/en-us/groups/rise/default.aspx">RiSE</a></li>
</ul>
</div>
</th>
<th style="width:120px">
<a style="border=0px" class="el" href="http://research.microsoft.com"><img border="0" src="logo_msr.gif" alt="Microsoft Research" />
</th>
</tr>
</table>

<!-- <p> -->
<!-- <img align="middle" src="z3.png" alt="Z3" /> -->
<!-- <table class="centered-small"> -->
<!--   <tr> -->
<!--     <th><a href="index.html"><span>Home</span></a></th> -->
<!--     <th> &bull; </th> -->
<!--     <th><a href="documentation.html"><span>Docs</span></a></th> -->
<!--     <th> &bull; </th> -->
<!--     <th><a href="download.html"><span>Download</span></a></th> -->
<!--     <th> &bull; </th> -->
<!--     <th><a href="mail.html"><span>Mail</span></a></th> -->
<!--     <th> &bull; </th> -->
<!--     <th><a href="faq.html"><span>FAQ</span></a></th> -->
<!--     <th> &bull; </th> -->
<!--     <th><a href="awards.html"><span>Awards</span></a></th> -->
<!--     <th> &bull; </th> -->
<!--     <th><a href="http://research.microsoft.com/en-us/groups/rise/default.aspx"><span>RiSE</span></a></th> -->
<!--     <th> &bull; </th> -->
<!--     <th><a href="http://research.microsoft.com"><span>MSR</span></a></th> -->
<!--   </tr> -->
<!-- </table> -->
<!-- </p> -->

<!-- Generated by Doxygen 1.6.3 -->
<div class="contents">
<h1>C API examples</h1><table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Examples</h2></td></tr>
<tr><td colspan="2"><p><a class="anchor" id="amgrpff7c0fcd6a31e735a61c001f75426961"></a> </p>
<br/><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga744b5f51e9c738ecd394ed31c29e3c30"></a><!-- doxytag: member="capi_ex::Z3_ext_context" ref="ga744b5f51e9c738ecd394ed31c29e3c30" args="" -->
typedef Z3_ext_context_struct *&nbsp;</td><td class="memItemRight" valign="bottom"><b>Z3_ext_context</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__capi__ex.html#gab7c1e72848c0e19ca409fc7acd888310">simple_example</a> ()</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">"Hello world" example: create a Z3 logical context, and delete it.  <a href="#gab7c1e72848c0e19ca409fc7acd888310"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__capi__ex.html#gaede2d42cf4df4754f3aca5a502313dab">demorgan</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__capi__ex.html#gae1fc416964019d6927fd6917ae32d914">find_model_example1</a> ()</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Find a model for <code>x xor y</code>.  <a href="#gae1fc416964019d6927fd6917ae32d914"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__capi__ex.html#ga5194ee6f65cb7e4280e7577816d67e4a">find_model_example2</a> ()</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Find a model for <code>x &lt; y + 1, x &gt; 2</code>. Then, assert <code>not(x = y)</code>, and find another model.  <a href="#ga5194ee6f65cb7e4280e7577816d67e4a"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__capi__ex.html#ga0cd53c9f10e66950a9121f5702bf8705">prove_example1</a> ()</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Prove <code>x = y implies g(x) = g(y)</code>, and disprove <code>x = y implies g(g(x)) = g(y)</code>.  <a href="#ga0cd53c9f10e66950a9121f5702bf8705"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__capi__ex.html#ga8a474ab19f7f08b45bf69d1bd6e2bb43">prove_example2</a> ()</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Prove <code>not(g(g(x) - g(y)) = g(z)), x + z &lt;= y &lt;= x implies z &lt; 0 </code>. Then, show that <code>z &lt; -1</code> is not implied.  <a href="#ga8a474ab19f7f08b45bf69d1bd6e2bb43"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__capi__ex.html#ga07ee56f1ada5226634e68a8b37989fbd">push_pop_example1</a> ()</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Show how push &amp; pop can be used to create "backtracking" points.  <a href="#ga07ee56f1ada5226634e68a8b37989fbd"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__capi__ex.html#ga06e4829a7db00856491745b17a4201b7">quantifier_example1</a> ()</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Prove that <code>f(x, y) = f(w, v) implies y = v</code> when <code>f</code> is injective in the second argument.  <a href="#ga06e4829a7db00856491745b17a4201b7"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__capi__ex.html#gaa4081035e25fec1e808c7edd33772a46">array_example1</a> ()</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Prove <code>store(a1, i1, v1) = store(a2, i2, v2) implies (i1 = i3 or i2 = i3 or select(a1, i3) = select(a2, i3))</code>.  <a href="#gaa4081035e25fec1e808c7edd33772a46"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__capi__ex.html#ga94757cc6b9bf9e6050b86b2794319798">array_example2</a> ()</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Show that <code>distinct(a_0, ... , a_n)</code> is unsatisfiable when <code>a_i's</code> are arrays from boolean to boolean and n &gt; 4.  <a href="#ga94757cc6b9bf9e6050b86b2794319798"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__capi__ex.html#gabadff2174e5e4af0a179365177222e00">array_example3</a> ()</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Simple array type construction/deconstruction example.  <a href="#gabadff2174e5e4af0a179365177222e00"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__capi__ex.html#gaab866a1a179a7456a35f906afa854bcd">tuple_example1</a> ()</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Simple tuple type example. It creates a tuple that is a pair of real numbers.  <a href="#gaab866a1a179a7456a35f906afa854bcd"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__capi__ex.html#gaa793cf13b8fcfdb908363f1890bc06ae">bitvector_example1</a> ()</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Simple bit-vector example. This example disproves that x - 10 &lt;= 0 IFF x &lt;= 10 for (32-bit) machine integers.  <a href="#gaa793cf13b8fcfdb908363f1890bc06ae"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__capi__ex.html#gab34a23f8c84c0235efb12c3d265c9398">bitvector_example2</a> ()</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Find x and y such that: x ^ y - 103 == x * y.  <a href="#gab34a23f8c84c0235efb12c3d265c9398"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__capi__ex.html#ga1380b031db05b0b63542acf627b6bd1e">eval_example1</a> ()</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Demonstrate how to use <a class="el" href="group__capi.html#ga47d3655283564918c85bda0b423b7f67" title="Evaluate the AST node t in the given model. Return Z3_TRUE if succeeded, and store...">Z3_eval</a>.  <a href="#ga1380b031db05b0b63542acf627b6bd1e"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__capi__ex.html#ga7a7c910ba34f5c87ec5bfdd87e5beb3f">two_contexts_example1</a> ()</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Several logical context can be used simultaneously.  <a href="#ga7a7c910ba34f5c87ec5bfdd87e5beb3f"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__capi__ex.html#ga2355864af38b0f159907209f00084cf1">error_code_example1</a> ()</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Demonstrates how error codes can be read insted of registering an error handler.  <a href="#ga2355864af38b0f159907209f00084cf1"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__capi__ex.html#ga6fa0a732602aa294249b126f9eb2928d">error_code_example2</a> ()</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Demonstrates how error handlers can be used.  <a href="#ga6fa0a732602aa294249b126f9eb2928d"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__capi__ex.html#ga34d5e8e536a5649693f8cefa4805a81e">parser_example1</a> ()</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Demonstrates how to use the SMTLIB parser.  <a href="#ga34d5e8e536a5649693f8cefa4805a81e"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__capi__ex.html#ga9c8fd60a787198a88ebcefc0282ea3cd">parser_example2</a> ()</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Demonstrates how to initialize the parser symbol table.  <a href="#ga9c8fd60a787198a88ebcefc0282ea3cd"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__capi__ex.html#gaad0cce961cb43f47950149c5bb3729ae">parser_example3</a> ()</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Demonstrates how to initialize the parser symbol table.  <a href="#gaad0cce961cb43f47950149c5bb3729ae"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__capi__ex.html#gab1d78024df78dbb10723537c15647aed">parser_example4</a> ()</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Display the declarations, assumptions and formulas in a SMT-LIB string.  <a href="#gab1d78024df78dbb10723537c15647aed"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__capi__ex.html#gab9594032459f28272bbc74fe5e2c54fc">parser_example5</a> ()</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Demonstrates how to handle parser errors using Z3 error handling support.  <a href="#gab9594032459f28272bbc74fe5e2c54fc"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__capi__ex.html#gad037a932d83d106438f08cacaeb6d642">numeral_example</a> ()</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Demonstrate different ways of creating rational numbers: decimal and fractional representations.  <a href="#gad037a932d83d106438f08cacaeb6d642"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__capi__ex.html#gafa3f89e53c339dda8c0a9b4b126139f7">ite_example</a> ()</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Test ite-term (if-then-else terms).  <a href="#gafa3f89e53c339dda8c0a9b4b126139f7"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__capi__ex.html#ga850fd4407bd8d1e508cc09b4efce6085">enum_example</a> ()</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Create an enumeration data type.  <a href="#ga850fd4407bd8d1e508cc09b4efce6085"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__capi__ex.html#gab3287b9c46ad438c87aa1f42b0e0dea8">list_example</a> ()</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Create a list datatype.  <a href="#gab3287b9c46ad438c87aa1f42b0e0dea8"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__capi__ex.html#ga7180a37232a0028dd87058dcf37a1ea2">tree_example</a> ()</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Create a binary tree datatype.  <a href="#ga7180a37232a0028dd87058dcf37a1ea2"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__capi__ex.html#ga93d1bdb67347976ccffbc086de426f48">forest_example</a> ()</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Create a forest of trees.  <a href="#ga93d1bdb67347976ccffbc086de426f48"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__capi__ex.html#ga7c79797558d27310546712cb8fb1c584">binary_tree_example</a> ()</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Create a binary tree datatype of the form BinTree ::= nil | node(value : Int, left : BinTree, right : BinTree).  <a href="#ga7c79797558d27310546712cb8fb1c584"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__capi__ex.html#ga8c767d0ad3c40daa42f99ad71ee6db8f">unsat_core_and_proof_example</a> ()</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Prove a theorem and extract, and print the proof.  <a href="#ga8c767d0ad3c40daa42f99ad71ee6db8f"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__capi__ex.html#gaff7e823bf261f63060b7ebdce44f07f5">get_implied_equalities_example</a> ()</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Extract classes of implied equalities.  <a href="#gaff7e823bf261f63060b7ebdce44f07f5"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">Z3_ext_context&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__capi__ex.html#gaee2e7823d9a007a245500395b48fffec">mk_ext_context</a> ()</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Create a logical context wrapper with support for retractable constraints.  <a href="#gaee2e7823d9a007a245500395b48fffec"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__capi__ex.html#ga6c6fad58070181de432e40aa86c34270">del_ext_context</a> (Z3_ext_context ctx)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Delete the given logical context wrapper.  <a href="#ga6c6fad58070181de432e40aa86c34270"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">unsigned&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__capi__ex.html#ga2ded843bd7ba3cf143ee23fd6552ad63">assert_retractable_cnstr</a> (Z3_ext_context ctx, Z3_ast c)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Create a retractable constraint.  <a href="#ga2ded843bd7ba3cf143ee23fd6552ad63"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__capi__ex.html#ga6246dc8b8cf263b38cd698f49a0470b9">retract_cnstr</a> (Z3_ext_context ctx, unsigned id)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Retract an constraint asserted using <a class="el" href="group__capi__ex.html#ga2ded843bd7ba3cf143ee23fd6552ad63" title="Create a retractable constraint.">assert_retractable_cnstr</a>.  <a href="#ga6246dc8b8cf263b38cd698f49a0470b9"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__capi__ex.html#ga25760b66b7ad43e3a902797b5924df73">reassert_cnstr</a> (Z3_ext_context ctx, unsigned id)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Reassert a constraint retracted using <a class="el" href="group__capi__ex.html#ga6246dc8b8cf263b38cd698f49a0470b9" title="Retract an constraint asserted using assert_retractable_cnstr.">retract_cnstr</a>.  <a href="#ga25760b66b7ad43e3a902797b5924df73"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__capi.html#ga6c2de6ea89b244e37c3ffb17a9ea2a89">Z3_lbool</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__capi__ex.html#ga89f13d1bda45bc9a6583ba84f40cc429">ext_check</a> (Z3_ext_context ctx)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Check whether the logical context wrapper with support for retractable assertions is feasible or not.  <a href="#ga89f13d1bda45bc9a6583ba84f40cc429"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__capi__ex.html#ga8ece4d1f54bf0c1dce28c5261dc84b24">incremental_example1</a> ()</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Simple example using the functions: <a class="el" href="group__capi__ex.html#gaee2e7823d9a007a245500395b48fffec" title="Create a logical context wrapper with support for retractable constraints.">mk_ext_context</a>, <a class="el" href="group__capi__ex.html#ga2ded843bd7ba3cf143ee23fd6552ad63" title="Create a retractable constraint.">assert_retractable_cnstr</a>, <a class="el" href="group__capi__ex.html#ga6246dc8b8cf263b38cd698f49a0470b9" title="Retract an constraint asserted using assert_retractable_cnstr.">retract_cnstr</a>, <a class="el" href="group__capi__ex.html#ga25760b66b7ad43e3a902797b5924df73" title="Reassert a constraint retracted using retract_cnstr.">reassert_cnstr</a> and <a class="el" href="group__capi__ex.html#ga6c6fad58070181de432e40aa86c34270" title="Delete the given logical context wrapper.">del_ext_context</a>.  <a href="#ga8ece4d1f54bf0c1dce28c5261dc84b24"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__capi__ex.html#gabd06302d2f38c978cd27532d1d368532">reference_counter_example</a> ()</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Simple example showing how to use reference counters in Z3 to manage memory efficiently.  <a href="#gabd06302d2f38c978cd27532d1d368532"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__capi__ex.html#ga748ec8e9525340e9237dee62cd589672">smt2parser_example</a> ()</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Demonstrates how to use SMT2 parser.  <a href="#ga748ec8e9525340e9237dee62cd589672"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__capi__ex.html#gabd85b3bf5fb4c602b1852338c9340931">substitute_example</a> ()</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Demonstrates how to use the function <code>Z3_substitute</code> to replace subexpressions in a Z3 AST.  <a href="#gabd85b3bf5fb4c602b1852338c9340931"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__capi__ex.html#gaeee5b7989f898698a0772e064a9ac149">substitute_vars_example</a> ()</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Demonstrates how to use the function <code>Z3_substitute_vars</code> to replace (free) variables with expressions in a Z3 AST.  <a href="#gaeee5b7989f898698a0772e064a9ac149"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="gadc7945b04a1efc307fdbfce9163f1d26"></a><!-- doxytag: member="capi_ex::MAX_RETRACTABLE_ASSERTIONS" ref="gadc7945b04a1efc307fdbfce9163f1d26" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><b>MAX_RETRACTABLE_ASSERTIONS</b>&nbsp;&nbsp;&nbsp;1024</td></tr>
<tr><td colspan="2"><h2>Auxiliary Functions</h2></td></tr>
<tr><td colspan="2"><p><a class="anchor" id="amgrp4464be58d0b57f0eb71725f846dd048a"></a> </p>
<br/><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__capi__ex.html#gaa325ae9cdfce0e749a254dfffc6c6ace">exitf</a> (const char *message)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">exit gracefully in case of error.  <a href="#gaa325ae9cdfce0e749a254dfffc6c6ace"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__capi__ex.html#ga98a996adc7ad22a8dc75b936e74b73ca">unreachable</a> ()</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">exit if unreachable code was reached.  <a href="#ga98a996adc7ad22a8dc75b936e74b73ca"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__capi__ex.html#ga82e5abe89b86f8ab9d95ac826189b4fc">error_handler</a> (Z3_context c, <a class="el" href="group__capi.html#gaa9f9e7b1b5b81381fab96debbaaa638f">Z3_error_code</a> e)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Simpler error handler.  <a href="#ga82e5abe89b86f8ab9d95ac826189b4fc"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__capi__ex.html#gaa6d66d26409a97ec721d1fe6814757c9">throw_z3_error</a> (Z3_context c, <a class="el" href="group__capi.html#gaa9f9e7b1b5b81381fab96debbaaa638f">Z3_error_code</a> e)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Low tech exceptions.  <a href="#gaa6d66d26409a97ec721d1fe6814757c9"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">Z3_context&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__capi__ex.html#ga4e884f4048e2a5937f97bb9667d6bae6">mk_context_custom</a> (Z3_config cfg, <a class="el" href="group__capi.html#ga4f0c179e183c96ebdaa639628c6cdbb2">Z3_error_handler</a> err)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Create a logical context.  <a href="#ga4e884f4048e2a5937f97bb9667d6bae6"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">Z3_context&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__capi__ex.html#ga102b86f8b4829828c5c2d06c5d8b8489">mk_context</a> ()</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Create a logical context.  <a href="#ga102b86f8b4829828c5c2d06c5d8b8489"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">Z3_context&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__capi__ex.html#gaf861446b22ab36b8ffe20a4aba630075">mk_proof_context</a> ()</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Create a logical context.  <a href="#gaf861446b22ab36b8ffe20a4aba630075"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">Z3_ast&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__capi__ex.html#gad55575aaf95896158c9e2f12e93769c8">mk_var</a> (Z3_context ctx, const char *name, Z3_sort ty)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Create a variable using the given name and type.  <a href="#gad55575aaf95896158c9e2f12e93769c8"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">Z3_ast&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__capi__ex.html#ga397d6e03e2538ff0df36aad6e02030ae">mk_bool_var</a> (Z3_context ctx, const char *name)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Create a boolean variable using the given name.  <a href="#ga397d6e03e2538ff0df36aad6e02030ae"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">Z3_ast&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__capi__ex.html#gaa7563e3fd1dd6951e4c6afb7aee7f3ee">mk_int_var</a> (Z3_context ctx, const char *name)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Create an integer variable using the given name.  <a href="#gaa7563e3fd1dd6951e4c6afb7aee7f3ee"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">Z3_ast&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__capi__ex.html#gac55b5bc7b387575d70b84ae5f92bc7fc">mk_int</a> (Z3_context ctx, int v)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Create a Z3 integer node using a C int.  <a href="#gac55b5bc7b387575d70b84ae5f92bc7fc"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">Z3_ast&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__capi__ex.html#ga440884a8a38a8b2201e4713862358aae">mk_real_var</a> (Z3_context ctx, const char *name)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Create a real variable using the given name.  <a href="#ga440884a8a38a8b2201e4713862358aae"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">Z3_ast&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__capi__ex.html#ga27ac720892fd2ea62deca501d6d2e706">mk_unary_app</a> (Z3_context ctx, Z3_func_decl f, Z3_ast x)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Create the unary function application: <code>(f x)</code>.  <a href="#ga27ac720892fd2ea62deca501d6d2e706"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">Z3_ast&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__capi__ex.html#gaa498f025e510b9564ad6afe4c63a743c">mk_binary_app</a> (Z3_context ctx, Z3_func_decl f, Z3_ast x, Z3_ast y)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Create the binary function application: <code>(f x y)</code>.  <a href="#gaa498f025e510b9564ad6afe4c63a743c"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__capi__ex.html#ga4ac4375063bd700cce15158ba6e761be">check</a> (Z3_context ctx, <a class="el" href="group__capi.html#ga6c2de6ea89b244e37c3ffb17a9ea2a89">Z3_lbool</a> expected_result)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Check whether the logical context is satisfiable, and compare the result with the expected result. If the context is satisfiable, then display the model.  <a href="#ga4ac4375063bd700cce15158ba6e761be"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__capi__ex.html#gac1c8ca24db543be3c7c8ada6e3cad89b">prove</a> (Z3_context ctx, Z3_ast f, <a class="el" href="group__capi.html#ga3a65ded0ada3ee285865759a21140eeb">Z3_bool</a> is_valid)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Prove that the constraints already asserted into the logical context implies the given formula. The result of the proof is displayed.  <a href="#gac1c8ca24db543be3c7c8ada6e3cad89b"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__capi__ex.html#gaca2791e8333199e32873def86c8e465a">assert_inj_axiom</a> (Z3_context ctx, Z3_func_decl f, unsigned i)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Assert the axiom: function f is injective in the i-th argument.  <a href="#gaca2791e8333199e32873def86c8e465a"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__capi__ex.html#ga7cc571ff97eb60e06c6a6aff9b6c8c69">assert_comm_axiom</a> (Z3_context ctx, Z3_func_decl f)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Assert the axiom: function f is commutative.  <a href="#ga7cc571ff97eb60e06c6a6aff9b6c8c69"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">Z3_ast&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__capi__ex.html#ga7e3e44186510e02e3fa143689fef6fd3">mk_tuple_update</a> (Z3_context c, Z3_ast t, unsigned i, Z3_ast new_val)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Z3 does not support explicitly tuple updates. They can be easily implemented as macros. The argument <code>t</code> must have tuple type. A tuple update is a new tuple where field <code>i</code> has value <code>new_val</code>, and all other fields have the value of the respective field of <code>t</code>.  <a href="#ga7e3e44186510e02e3fa143689fef6fd3"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__capi__ex.html#ga387b0f228ff147764beaae9e07ee9d59">display_symbol</a> (Z3_context c, FILE *out, Z3_symbol s)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Display a symbol in the given output stream.  <a href="#ga387b0f228ff147764beaae9e07ee9d59"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__capi__ex.html#ga8a9e74a0c3915e48a40a311af80bf369">display_sort</a> (Z3_context c, FILE *out, Z3_sort ty)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Display the given type.  <a href="#ga8a9e74a0c3915e48a40a311af80bf369"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__capi__ex.html#ga807b5fe0e26acdec09e52a77318208d0">display_ast</a> (Z3_context c, FILE *out, Z3_ast v)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Custom ast pretty printer.  <a href="#ga807b5fe0e26acdec09e52a77318208d0"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__capi__ex.html#ga5416a7bbf6e561fcfdda0dd85bec2682">display_function_interpretations</a> (Z3_context c, FILE *out, Z3_model m)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Custom function interpretations pretty printer.  <a href="#ga5416a7bbf6e561fcfdda0dd85bec2682"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__capi__ex.html#ga4af59d866d3845962448d1354b89e3c6">display_model</a> (Z3_context c, FILE *out, Z3_model m)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Custom model pretty printer.  <a href="#ga4af59d866d3845962448d1354b89e3c6"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__capi__ex.html#ga9dd6fa6c5fa72c0cd87eb5ec5a6c4965">check2</a> (Z3_context ctx, <a class="el" href="group__capi.html#ga6c2de6ea89b244e37c3ffb17a9ea2a89">Z3_lbool</a> expected_result)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Similar to <a class="el" href="group__theory__plugin__ex.html#ga4ac4375063bd700cce15158ba6e761be" title="Check whether the logical context is satisfiable, and compare the result with the...">check</a>, but uses <a class="el" href="group__capi__ex.html#ga4af59d866d3845962448d1354b89e3c6" title="Custom model pretty printer.">display_model</a> instead of <a class="el" href="group__capi.html#gaf36d49862a8c0d20dd5e6508eef5f8af" title="Convert the given model into a string.">Z3_model_to_string</a>.  <a href="#ga9dd6fa6c5fa72c0cd87eb5ec5a6c4965"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__capi__ex.html#ga33abf350aae0212c85a5903e41764025">display_version</a> ()</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Display Z3 version in the standard output.  <a href="#ga33abf350aae0212c85a5903e41764025"></a><br/></td></tr>
</table>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="gaa4081035e25fec1e808c7edd33772a46"></a><!-- doxytag: member="test_capi.c::array_example1" ref="gaa4081035e25fec1e808c7edd33772a46" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void array_example1 </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Prove <code>store(a1, i1, v1) = store(a2, i2, v2) implies (i1 = i3 or i2 = i3 or select(a1, i3) = select(a2, i3))</code>. </p>
<p>This example demonstrates how to use the array theory. </p>

<p>Definition at line <a class="el" href="test__capi_8c_source.html#l01099">1099</a> of file <a class="el" href="test__capi_8c_source.html">test_capi.c</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l01100"></a>01100 {
<a name="l01101"></a>01101     Z3_context ctx;
<a name="l01102"></a>01102     Z3_sort int_sort, array_sort;
<a name="l01103"></a>01103     Z3_ast a1, a2, i1, v1, i2, v2, i3;
<a name="l01104"></a>01104     Z3_ast st1, st2, sel1, sel2;
<a name="l01105"></a>01105     Z3_ast antecedent, consequent;
<a name="l01106"></a>01106     Z3_ast ds[3];
<a name="l01107"></a>01107     Z3_ast thm;
<a name="l01108"></a>01108 
<a name="l01109"></a>01109     printf(<span class="stringliteral">&quot;\narray_example1\n&quot;</span>);
<a name="l01110"></a>01110     LOG_MSG(<span class="stringliteral">&quot;array_example1&quot;</span>);
<a name="l01111"></a>01111 
<a name="l01112"></a>01112     ctx = <a class="code" href="group__maxsat__ex.html#ga102b86f8b4829828c5c2d06c5d8b8489" title="Create a logical context. Enable model construction only.">mk_context</a>();
<a name="l01113"></a>01113 
<a name="l01114"></a>01114     int_sort    = <a class="code" href="group__capi.html#ga6cd426ab5748653b77d389fd3eac1015" title="Create the integer type.">Z3_mk_int_sort</a>(ctx);
<a name="l01115"></a>01115     array_sort  = <a class="code" href="group__capi.html#gafe617994cce1b516f46128e448c84445" title="Create an array type.">Z3_mk_array_sort</a>(ctx, int_sort, int_sort);
<a name="l01116"></a>01116 
<a name="l01117"></a>01117     a1          = <a class="code" href="group__maxsat__ex.html#gad55575aaf95896158c9e2f12e93769c8" title="Create a variable using the given name and type.">mk_var</a>(ctx, <span class="stringliteral">&quot;a1&quot;</span>, array_sort);
<a name="l01118"></a>01118     a2          = <a class="code" href="group__maxsat__ex.html#gad55575aaf95896158c9e2f12e93769c8" title="Create a variable using the given name and type.">mk_var</a>(ctx, <span class="stringliteral">&quot;a2&quot;</span>, array_sort);
<a name="l01119"></a>01119     i1          = <a class="code" href="group__maxsat__ex.html#gad55575aaf95896158c9e2f12e93769c8" title="Create a variable using the given name and type.">mk_var</a>(ctx, <span class="stringliteral">&quot;i1&quot;</span>, int_sort);
<a name="l01120"></a>01120     i2          = <a class="code" href="group__maxsat__ex.html#gad55575aaf95896158c9e2f12e93769c8" title="Create a variable using the given name and type.">mk_var</a>(ctx, <span class="stringliteral">&quot;i2&quot;</span>, int_sort);
<a name="l01121"></a>01121     i3          = <a class="code" href="group__maxsat__ex.html#gad55575aaf95896158c9e2f12e93769c8" title="Create a variable using the given name and type.">mk_var</a>(ctx, <span class="stringliteral">&quot;i3&quot;</span>, int_sort);
<a name="l01122"></a>01122     v1          = <a class="code" href="group__maxsat__ex.html#gad55575aaf95896158c9e2f12e93769c8" title="Create a variable using the given name and type.">mk_var</a>(ctx, <span class="stringliteral">&quot;v1&quot;</span>, int_sort);
<a name="l01123"></a>01123     v2          = <a class="code" href="group__maxsat__ex.html#gad55575aaf95896158c9e2f12e93769c8" title="Create a variable using the given name and type.">mk_var</a>(ctx, <span class="stringliteral">&quot;v2&quot;</span>, int_sort);
<a name="l01124"></a>01124     
<a name="l01125"></a>01125     st1         = <a class="code" href="group__capi.html#gae305a4f54b4a64f7e5973ae6ccb13593" title="Array update.">Z3_mk_store</a>(ctx, a1, i1, v1);
<a name="l01126"></a>01126     st2         = <a class="code" href="group__capi.html#gae305a4f54b4a64f7e5973ae6ccb13593" title="Array update.">Z3_mk_store</a>(ctx, a2, i2, v2);
<a name="l01127"></a>01127     
<a name="l01128"></a>01128     sel1        = <a class="code" href="group__capi.html#ga38f423f3683379e7f597a7fe59eccb67" title="Array read. The argument a is the array and i is the index of the array that gets...">Z3_mk_select</a>(ctx, a1, i3);
<a name="l01129"></a>01129     sel2        = <a class="code" href="group__capi.html#ga38f423f3683379e7f597a7fe59eccb67" title="Array read. The argument a is the array and i is the index of the array that gets...">Z3_mk_select</a>(ctx, a2, i3);
<a name="l01130"></a>01130 
<a name="l01131"></a>01131     <span class="comment">/* create antecedent */</span>
<a name="l01132"></a>01132     antecedent  = <a class="code" href="group__capi.html#ga95a19ce675b70e22bb0401f7137af37c" title="Create an AST node representing l = r.">Z3_mk_eq</a>(ctx, st1, st2);
<a name="l01133"></a>01133 
<a name="l01134"></a>01134     <span class="comment">/* create consequent: i1 = i3 or  i2 = i3 or select(a1, i3) = select(a2, i3) */</span>
<a name="l01135"></a>01135     ds[0]       = <a class="code" href="group__capi.html#ga95a19ce675b70e22bb0401f7137af37c" title="Create an AST node representing l = r.">Z3_mk_eq</a>(ctx, i1, i3);
<a name="l01136"></a>01136     ds[1]       = <a class="code" href="group__capi.html#ga95a19ce675b70e22bb0401f7137af37c" title="Create an AST node representing l = r.">Z3_mk_eq</a>(ctx, i2, i3);
<a name="l01137"></a>01137     ds[2]       = <a class="code" href="group__capi.html#ga95a19ce675b70e22bb0401f7137af37c" title="Create an AST node representing l = r.">Z3_mk_eq</a>(ctx, sel1, sel2);
<a name="l01138"></a>01138     consequent  = <a class="code" href="group__capi.html#ga00866d16331d505620a6c515302021f9" title="Create an AST node representing args[0] or ... or args[num_args-1].">Z3_mk_or</a>(ctx, 3, ds);
<a name="l01139"></a>01139 
<a name="l01140"></a>01140     <span class="comment">/* prove store(a1, i1, v1) = store(a2, i2, v2) implies (i1 = i3 or i2 = i3 or select(a1, i3) = select(a2, i3)) */</span>
<a name="l01141"></a>01141     thm         = <a class="code" href="group__capi.html#gac829c0e25bbbd30343bf073f7b524517" title="Create an AST node representing t1 implies t2.">Z3_mk_implies</a>(ctx, antecedent, consequent);
<a name="l01142"></a>01142     printf(<span class="stringliteral">&quot;prove: store(a1, i1, v1) = store(a2, i2, v2) implies (i1 = i3 or i2 = i3 or select(a1, i3) = select(a2, i3))\n&quot;</span>);
<a name="l01143"></a>01143     printf(<span class="stringliteral">&quot;%s\n&quot;</span>, <a class="code" href="group__capi.html#gab1aa4b78298fe00b3167bf7bfd88aea3" title="Convert the given AST node into a string.">Z3_ast_to_string</a>(ctx, thm));
<a name="l01144"></a>01144     <a class="code" href="group__capi__ex.html#gac1c8ca24db543be3c7c8ada6e3cad89b" title="Prove that the constraints already asserted into the logical context implies the...">prove</a>(ctx, thm, <a class="code" href="group__capi.html#gad86c8730a2e4e61bac585b240a6288d4" title="True value. It is just an alias for 1.">Z3_TRUE</a>);
<a name="l01145"></a>01145 
<a name="l01146"></a>01146     <a class="code" href="group__capi.html#ga556eae80ed43ab13e1e7dc3b38c35200" title="Delete the given logical context.">Z3_del_context</a>(ctx);
<a name="l01147"></a>01147 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ga94757cc6b9bf9e6050b86b2794319798"></a><!-- doxytag: member="test_capi.c::array_example2" ref="ga94757cc6b9bf9e6050b86b2794319798" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void array_example2 </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Show that <code>distinct(a_0, ... , a_n)</code> is unsatisfiable when <code>a_i's</code> are arrays from boolean to boolean and n &gt; 4. </p>
<p>This example also shows how to use the <code>distinct</code> construct. </p>

<p>Definition at line <a class="el" href="test__capi_8c_source.html#l01156">1156</a> of file <a class="el" href="test__capi_8c_source.html">test_capi.c</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l01157"></a>01157 {
<a name="l01158"></a>01158     Z3_context ctx;
<a name="l01159"></a>01159     Z3_sort bool_sort, array_sort;
<a name="l01160"></a>01160     Z3_ast      a[5];
<a name="l01161"></a>01161     Z3_ast      d;
<a name="l01162"></a>01162     <span class="keywordtype">unsigned</span>      i, n;
<a name="l01163"></a>01163 
<a name="l01164"></a>01164     printf(<span class="stringliteral">&quot;\narray_example2\n&quot;</span>);
<a name="l01165"></a>01165     LOG_MSG(<span class="stringliteral">&quot;array_example2&quot;</span>);
<a name="l01166"></a>01166 
<a name="l01167"></a>01167     <span class="keywordflow">for</span> (n = 2; n &lt;= 5; n++) {
<a name="l01168"></a>01168         printf(<span class="stringliteral">&quot;n = %d\n&quot;</span>, n);
<a name="l01169"></a>01169         ctx = <a class="code" href="group__maxsat__ex.html#ga102b86f8b4829828c5c2d06c5d8b8489" title="Create a logical context. Enable model construction only.">mk_context</a>();
<a name="l01170"></a>01170         
<a name="l01171"></a>01171         bool_sort   = <a class="code" href="group__capi.html#gacdc73510b69a010b71793d429015f342" title="Create the Boolean type.">Z3_mk_bool_sort</a>(ctx);
<a name="l01172"></a>01172         array_sort  = <a class="code" href="group__capi.html#gafe617994cce1b516f46128e448c84445" title="Create an array type.">Z3_mk_array_sort</a>(ctx, bool_sort, bool_sort);
<a name="l01173"></a>01173         
<a name="l01174"></a>01174         <span class="comment">/* create arrays */</span>
<a name="l01175"></a>01175         <span class="keywordflow">for</span> (i = 0; i &lt; n; i++) {
<a name="l01176"></a>01176             Z3_symbol s = <a class="code" href="group__capi.html#ga3df806baf6124df3e63a58cf23e12411" title="Create a Z3 symbol using an integer.">Z3_mk_int_symbol</a>(ctx, i);
<a name="l01177"></a>01177             a[i]          = <a class="code" href="group__capi.html#ga093c9703393f33ae282ec5e8729354ef" title="Declare and create a constant.">Z3_mk_const</a>(ctx, s, array_sort);
<a name="l01178"></a>01178         }
<a name="l01179"></a>01179         
<a name="l01180"></a>01180         <span class="comment">/* assert distinct(a[0], ..., a[n]) */</span>
<a name="l01181"></a>01181         d = <a class="code" href="group__capi.html#gaa076d3a668e0ec97d61744403153ecf7" title="Create an AST node representing distinct(args[0], ..., args[num_args-1]).">Z3_mk_distinct</a>(ctx, n, a);
<a name="l01182"></a>01182         printf(<span class="stringliteral">&quot;%s\n&quot;</span>, <a class="code" href="group__capi.html#gab1aa4b78298fe00b3167bf7bfd88aea3" title="Convert the given AST node into a string.">Z3_ast_to_string</a>(ctx, d));
<a name="l01183"></a>01183         <a class="code" href="group__capi.html#ga1a05ff73a564ae7256a2257048a4680a" title="Assert a constraint into the logical context.">Z3_assert_cnstr</a>(ctx, d);
<a name="l01184"></a>01184 
<a name="l01185"></a>01185         <span class="comment">/* context is satisfiable if n &lt; 5 */</span>
<a name="l01186"></a>01186         <a class="code" href="group__capi__ex.html#ga9dd6fa6c5fa72c0cd87eb5ec5a6c4965" title="Similar to check, but uses display_model instead of Z3_model_to_string.">check2</a>(ctx, n &lt; 5 ? Z3_L_TRUE : Z3_L_FALSE);
<a name="l01187"></a>01187         
<a name="l01188"></a>01188         <a class="code" href="group__capi.html#ga556eae80ed43ab13e1e7dc3b38c35200" title="Delete the given logical context.">Z3_del_context</a>(ctx);
<a name="l01189"></a>01189     }
<a name="l01190"></a>01190 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="gabadff2174e5e4af0a179365177222e00"></a><!-- doxytag: member="test_capi.c::array_example3" ref="gabadff2174e5e4af0a179365177222e00" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void array_example3 </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Simple array type construction/deconstruction example. </p>

<p>Definition at line <a class="el" href="test__capi_8c_source.html#l01195">1195</a> of file <a class="el" href="test__capi_8c_source.html">test_capi.c</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l01196"></a>01196 {
<a name="l01197"></a>01197     Z3_context ctx;
<a name="l01198"></a>01198     Z3_sort bool_sort, int_sort, array_sort;
<a name="l01199"></a>01199     Z3_sort domain, range;
<a name="l01200"></a>01200     printf(<span class="stringliteral">&quot;\narray_example3\n&quot;</span>);
<a name="l01201"></a>01201     LOG_MSG(<span class="stringliteral">&quot;array_example3&quot;</span>);
<a name="l01202"></a>01202 
<a name="l01203"></a>01203     ctx      = <a class="code" href="group__maxsat__ex.html#ga102b86f8b4829828c5c2d06c5d8b8489" title="Create a logical context. Enable model construction only.">mk_context</a>();
<a name="l01204"></a>01204 
<a name="l01205"></a>01205     bool_sort  = <a class="code" href="group__capi.html#gacdc73510b69a010b71793d429015f342" title="Create the Boolean type.">Z3_mk_bool_sort</a>(ctx);
<a name="l01206"></a>01206     int_sort   = <a class="code" href="group__capi.html#ga6cd426ab5748653b77d389fd3eac1015" title="Create the integer type.">Z3_mk_int_sort</a>(ctx); 
<a name="l01207"></a>01207     array_sort = <a class="code" href="group__capi.html#gafe617994cce1b516f46128e448c84445" title="Create an array type.">Z3_mk_array_sort</a>(ctx, int_sort, bool_sort);
<a name="l01208"></a>01208 
<a name="l01209"></a>01209     <span class="keywordflow">if</span> (<a class="code" href="group__capi.html#ga6d694951de4c7f115ed472eb32ef963c" title="Return the sort kind (e.g., array, tuple, int, bool, etc).">Z3_get_sort_kind</a>(ctx, array_sort) != Z3_ARRAY_SORT) {
<a name="l01210"></a>01210         <a class="code" href="group__capi__ex.html#gaa325ae9cdfce0e749a254dfffc6c6ace" title="exit gracefully in case of error.">exitf</a>(<span class="stringliteral">&quot;type must be an array type&quot;</span>);
<a name="l01211"></a>01211     }
<a name="l01212"></a>01212     
<a name="l01213"></a>01213     domain = <a class="code" href="group__capi.html#ga9753605ed27131dee29abcfb21e1dc9a" title="Return the domain of the given array sort.">Z3_get_array_sort_domain</a>(ctx, array_sort);
<a name="l01214"></a>01214     range  = <a class="code" href="group__capi.html#ga72832f8215d6232ce1fef9774d1bf192" title="Return the range of the given array sort.">Z3_get_array_sort_range</a>(ctx, array_sort);
<a name="l01215"></a>01215 
<a name="l01216"></a>01216     printf(<span class="stringliteral">&quot;domain: &quot;</span>);
<a name="l01217"></a>01217     <a class="code" href="group__capi__ex.html#ga8a9e74a0c3915e48a40a311af80bf369" title="Display the given type.">display_sort</a>(ctx, stdout, domain);
<a name="l01218"></a>01218     printf(<span class="stringliteral">&quot;\n&quot;</span>);
<a name="l01219"></a>01219     printf(<span class="stringliteral">&quot;range:  &quot;</span>);
<a name="l01220"></a>01220     <a class="code" href="group__capi__ex.html#ga8a9e74a0c3915e48a40a311af80bf369" title="Display the given type.">display_sort</a>(ctx, stdout, range);
<a name="l01221"></a>01221     printf(<span class="stringliteral">&quot;\n&quot;</span>);
<a name="l01222"></a>01222 
<a name="l01223"></a>01223         <span class="keywordflow">if</span> (int_sort != domain || bool_sort != range) {
<a name="l01224"></a>01224         <a class="code" href="group__capi__ex.html#gaa325ae9cdfce0e749a254dfffc6c6ace" title="exit gracefully in case of error.">exitf</a>(<span class="stringliteral">&quot;invalid array type&quot;</span>);
<a name="l01225"></a>01225     }
<a name="l01226"></a>01226 
<a name="l01227"></a>01227     <a class="code" href="group__capi.html#ga556eae80ed43ab13e1e7dc3b38c35200" title="Delete the given logical context.">Z3_del_context</a>(ctx);
<a name="l01228"></a>01228 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ga7cc571ff97eb60e06c6a6aff9b6c8c69"></a><!-- doxytag: member="test_capi.c::assert_comm_axiom" ref="ga7cc571ff97eb60e06c6a6aff9b6c8c69" args="(Z3_context ctx, Z3_func_decl f)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void assert_comm_axiom </td>
          <td>(</td>
          <td class="paramtype">Z3_context&nbsp;</td>
          <td class="paramname"> <em>ctx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Z3_func_decl&nbsp;</td>
          <td class="paramname"> <em>f</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Assert the axiom: function f is commutative. </p>
<p>This example uses the SMT-LIB parser to simplify the axiom construction. </p>

<p>Definition at line <a class="el" href="test__capi_8c_source.html#l00349">349</a> of file <a class="el" href="test__capi_8c_source.html">test_capi.c</a>.</p>

<p>Referenced by <a class="el" href="test__capi_8c_source.html#l01634">parser_example3()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00350"></a>00350 {
<a name="l00351"></a>00351     Z3_sort t;
<a name="l00352"></a>00352     Z3_symbol f_name, t_name;
<a name="l00353"></a>00353     Z3_ast q;
<a name="l00354"></a>00354 
<a name="l00355"></a>00355     t = <a class="code" href="group__capi.html#gaf996fe33bd42bea8fa8ddf44fcf0bd77" title="Return the range of the given declaration.">Z3_get_range</a>(ctx, f);
<a name="l00356"></a>00356 
<a name="l00357"></a>00357     <span class="keywordflow">if</span> (<a class="code" href="group__capi.html#ga3a2c7d27579336a03adc587cec833bf9" title="Return the number of parameters of the given declaration.">Z3_get_domain_size</a>(ctx, f) != 2 ||
<a name="l00358"></a>00358         <a class="code" href="group__capi.html#gaa648c7b589597e76cd5ffcfb2c917b24" title="Return the sort of the i-th parameter of the given function declaration.">Z3_get_domain</a>(ctx, f, 0) != t ||
<a name="l00359"></a>00359         <a class="code" href="group__capi.html#gaa648c7b589597e76cd5ffcfb2c917b24" title="Return the sort of the i-th parameter of the given function declaration.">Z3_get_domain</a>(ctx, f, 1) != t) {
<a name="l00360"></a>00360         <a class="code" href="group__capi__ex.html#gaa325ae9cdfce0e749a254dfffc6c6ace" title="exit gracefully in case of error.">exitf</a>(<span class="stringliteral">&quot;function must be binary, and argument types must be equal to return type&quot;</span>);
<a name="l00361"></a>00361     } 
<a name="l00362"></a>00362     
<a name="l00363"></a>00363     <span class="comment">/* Inside the parser, function f will be referenced using the symbol &#39;f&#39;. */</span>
<a name="l00364"></a>00364     f_name = <a class="code" href="group__capi.html#ga6b9ed981ba0180962928394fe828b0a7" title="Create a Z3 symbol using a C string.">Z3_mk_string_symbol</a>(ctx, <span class="stringliteral">&quot;f&quot;</span>);
<a name="l00365"></a>00365     
<a name="l00366"></a>00366     <span class="comment">/* Inside the parser, type t will be referenced using the symbol &#39;T&#39;. */</span>
<a name="l00367"></a>00367     t_name = <a class="code" href="group__capi.html#ga6b9ed981ba0180962928394fe828b0a7" title="Create a Z3 symbol using a C string.">Z3_mk_string_symbol</a>(ctx, <span class="stringliteral">&quot;T&quot;</span>);
<a name="l00368"></a>00368         
<a name="l00369"></a>00369 
<a name="l00370"></a>00370     <a class="code" href="group__capi.html#ga56e0d31f1769ec44bc2f8dc4697ef689" title="Parse the given string using the SMT-LIB parser.">Z3_parse_smtlib_string</a>(ctx, 
<a name="l00371"></a>00371                            <span class="stringliteral">&quot;(benchmark comm :formula (forall (x T) (y T) (= (f x y) (f y x))))&quot;</span>,
<a name="l00372"></a>00372                            1, &amp;t_name, &amp;t,
<a name="l00373"></a>00373                            1, &amp;f_name, &amp;f);
<a name="l00374"></a>00374     q = <a class="code" href="group__capi.html#ga0ac42d0fa1874e4e773c89a56066f242" title="Return the i-th formula parsed by the last call to Z3_parse_smtlib_string or Z3_parse_smtlib_file...">Z3_get_smtlib_formula</a>(ctx, 0);
<a name="l00375"></a>00375     printf(<span class="stringliteral">&quot;assert axiom:\n%s\n&quot;</span>, <a class="code" href="group__capi.html#gab1aa4b78298fe00b3167bf7bfd88aea3" title="Convert the given AST node into a string.">Z3_ast_to_string</a>(ctx, q));
<a name="l00376"></a>00376     <a class="code" href="group__capi.html#ga1a05ff73a564ae7256a2257048a4680a" title="Assert a constraint into the logical context.">Z3_assert_cnstr</a>(ctx, q);
<a name="l00377"></a>00377 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="gaca2791e8333199e32873def86c8e465a"></a><!-- doxytag: member="test_capi.c::assert_inj_axiom" ref="gaca2791e8333199e32873def86c8e465a" args="(Z3_context ctx, Z3_func_decl f, unsigned i)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void assert_inj_axiom </td>
          <td>(</td>
          <td class="paramtype">Z3_context&nbsp;</td>
          <td class="paramname"> <em>ctx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Z3_func_decl&nbsp;</td>
          <td class="paramname"> <em>f</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&nbsp;</td>
          <td class="paramname"> <em>i</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Assert the axiom: function f is injective in the i-th argument. </p>
<p>The following axiom is asserted into the logical context: </p>
<div class="fragment"><pre class="fragment">   forall (x_0, ..., x_n) finv(f(x_0, ..., x_i, ..., x_{n-1})) = x_i
</pre></div><p>Where, <code>finv</code> is a fresh function declaration. </p>

<p>Definition at line <a class="el" href="test__capi_8c_source.html#l00278">278</a> of file <a class="el" href="test__capi_8c_source.html">test_capi.c</a>.</p>

<p>Referenced by <a class="el" href="test__capi_8c_source.html#l01023">quantifier_example1()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00279"></a>00279 {
<a name="l00280"></a>00280     <span class="keywordtype">unsigned</span> sz, j;
<a name="l00281"></a>00281     Z3_sort finv_domain, finv_range;
<a name="l00282"></a>00282     Z3_func_decl finv;
<a name="l00283"></a>00283     Z3_sort * types; <span class="comment">/* types of the quantified variables */</span>
<a name="l00284"></a>00284     Z3_symbol *   names; <span class="comment">/* names of the quantified variables */</span>
<a name="l00285"></a>00285     Z3_ast * xs;         <span class="comment">/* arguments for the application f(x_0, ..., x_i, ..., x_{n-1}) */</span>
<a name="l00286"></a>00286     Z3_ast   x_i, fxs, finv_fxs, eq;
<a name="l00287"></a>00287     Z3_pattern p;
<a name="l00288"></a>00288     Z3_ast   q;
<a name="l00289"></a>00289     sz = <a class="code" href="group__capi.html#ga3a2c7d27579336a03adc587cec833bf9" title="Return the number of parameters of the given declaration.">Z3_get_domain_size</a>(ctx, f);
<a name="l00290"></a>00290 
<a name="l00291"></a>00291     <span class="keywordflow">if</span> (i &gt;= sz) {
<a name="l00292"></a>00292         <a class="code" href="group__capi__ex.html#gaa325ae9cdfce0e749a254dfffc6c6ace" title="exit gracefully in case of error.">exitf</a>(<span class="stringliteral">&quot;failed to create inj axiom&quot;</span>);
<a name="l00293"></a>00293     }
<a name="l00294"></a>00294     
<a name="l00295"></a>00295     <span class="comment">/* declare the i-th inverse of f: finv */</span>
<a name="l00296"></a>00296     finv_domain = <a class="code" href="group__capi.html#gaf996fe33bd42bea8fa8ddf44fcf0bd77" title="Return the range of the given declaration.">Z3_get_range</a>(ctx, f);
<a name="l00297"></a>00297     finv_range  = <a class="code" href="group__capi.html#gaa648c7b589597e76cd5ffcfb2c917b24" title="Return the sort of the i-th parameter of the given function declaration.">Z3_get_domain</a>(ctx, f, i);
<a name="l00298"></a>00298     finv        = <a class="code" href="group__capi.html#ga1f60c7eb41c5603e55a188a14dc929ec" title="Declare a fresh constant or function.">Z3_mk_fresh_func_decl</a>(ctx, <span class="stringliteral">&quot;inv&quot;</span>, 1, &amp;finv_domain, finv_range);
<a name="l00299"></a>00299 
<a name="l00300"></a>00300     <span class="comment">/* allocate temporary arrays */</span>
<a name="l00301"></a>00301     types       = (Z3_sort *) malloc(<span class="keyword">sizeof</span>(Z3_sort) * sz);
<a name="l00302"></a>00302     names       = (Z3_symbol *) malloc(<span class="keyword">sizeof</span>(Z3_symbol) * sz);
<a name="l00303"></a>00303     xs          = (Z3_ast *) malloc(<span class="keyword">sizeof</span>(Z3_ast) * sz);
<a name="l00304"></a>00304     
<a name="l00305"></a>00305     <span class="comment">/* fill types, names and xs */</span>
<a name="l00306"></a>00306     <span class="keywordflow">for</span> (j = 0; j &lt; sz; j++) { types[j] = <a class="code" href="group__capi.html#gaa648c7b589597e76cd5ffcfb2c917b24" title="Return the sort of the i-th parameter of the given function declaration.">Z3_get_domain</a>(ctx, f, j); };
<a name="l00307"></a>00307     <span class="keywordflow">for</span> (j = 0; j &lt; sz; j++) { names[j] = <a class="code" href="group__capi.html#ga3df806baf6124df3e63a58cf23e12411" title="Create a Z3 symbol using an integer.">Z3_mk_int_symbol</a>(ctx, j); };
<a name="l00308"></a>00308     <span class="keywordflow">for</span> (j = 0; j &lt; sz; j++) { xs[j]    = <a class="code" href="group__capi.html#ga1d4da8849fca699b345322f8ee1fa31e" title="Create a bound variable.">Z3_mk_bound</a>(ctx, j, types[j]); };
<a name="l00309"></a>00309 
<a name="l00310"></a>00310     x_i = xs[i];
<a name="l00311"></a>00311 
<a name="l00312"></a>00312     <span class="comment">/* create f(x_0, ..., x_i, ..., x_{n-1}) */</span> 
<a name="l00313"></a>00313     fxs         = <a class="code" href="group__capi.html#ga33a202d86bf628bfab9b6f437536cebe" title="Create a constant or function application.">Z3_mk_app</a>(ctx, f, sz, xs);
<a name="l00314"></a>00314 
<a name="l00315"></a>00315     <span class="comment">/* create f_inv(f(x_0, ..., x_i, ..., x_{n-1})) */</span>
<a name="l00316"></a>00316     finv_fxs    = <a class="code" href="group__capi__ex.html#ga27ac720892fd2ea62deca501d6d2e706" title="Create the unary function application: (f x).">mk_unary_app</a>(ctx, finv, fxs);
<a name="l00317"></a>00317 
<a name="l00318"></a>00318     <span class="comment">/* create finv(f(x_0, ..., x_i, ..., x_{n-1})) = x_i */</span>
<a name="l00319"></a>00319     eq          = <a class="code" href="group__capi.html#ga95a19ce675b70e22bb0401f7137af37c" title="Create an AST node representing l = r.">Z3_mk_eq</a>(ctx, finv_fxs, x_i);
<a name="l00320"></a>00320 
<a name="l00321"></a>00321     <span class="comment">/* use f(x_0, ..., x_i, ..., x_{n-1}) as the pattern for the quantifier */</span>
<a name="l00322"></a>00322     p           = <a class="code" href="group__capi.html#gaf15c95b66dc3b0af735774ee401a6f85" title="Create a pattern for quantifier instantiation.">Z3_mk_pattern</a>(ctx, 1, &amp;fxs);
<a name="l00323"></a>00323     printf(<span class="stringliteral">&quot;pattern: %s\n&quot;</span>, Z3_pattern_to_string(ctx, p));
<a name="l00324"></a>00324     printf(<span class="stringliteral">&quot;\n&quot;</span>);
<a name="l00325"></a>00325 
<a name="l00326"></a>00326     <span class="comment">/* create &amp; assert quantifier */</span>
<a name="l00327"></a>00327     q           = <a class="code" href="group__capi.html#ga7e975b7d7ac96de1db73d8f71166c663" title="Create a forall formula. It takes an expression body that contains bound variables...">Z3_mk_forall</a>(ctx, 
<a name="l00328"></a>00328                                  0, <span class="comment">/* using default weight */</span>
<a name="l00329"></a>00329                                  1, <span class="comment">/* number of patterns */</span>
<a name="l00330"></a>00330                                  &amp;p, <span class="comment">/* address of the &quot;array&quot; of patterns */</span>
<a name="l00331"></a>00331                                  sz, <span class="comment">/* number of quantified variables */</span>
<a name="l00332"></a>00332                                  types, 
<a name="l00333"></a>00333                                  names,
<a name="l00334"></a>00334                                  eq);
<a name="l00335"></a>00335     printf(<span class="stringliteral">&quot;assert axiom:\n%s\n&quot;</span>, <a class="code" href="group__capi.html#gab1aa4b78298fe00b3167bf7bfd88aea3" title="Convert the given AST node into a string.">Z3_ast_to_string</a>(ctx, q));
<a name="l00336"></a>00336     <a class="code" href="group__capi.html#ga1a05ff73a564ae7256a2257048a4680a" title="Assert a constraint into the logical context.">Z3_assert_cnstr</a>(ctx, q);
<a name="l00337"></a>00337 
<a name="l00338"></a>00338     <span class="comment">/* free temporary arrays */</span>
<a name="l00339"></a>00339     free(types);
<a name="l00340"></a>00340     free(names);
<a name="l00341"></a>00341     free(xs);
<a name="l00342"></a>00342 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ga2ded843bd7ba3cf143ee23fd6552ad63"></a><!-- doxytag: member="test_capi.c::assert_retractable_cnstr" ref="ga2ded843bd7ba3cf143ee23fd6552ad63" args="(Z3_ext_context ctx, Z3_ast c)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned assert_retractable_cnstr </td>
          <td>(</td>
          <td class="paramtype">Z3_ext_context&nbsp;</td>
          <td class="paramname"> <em>ctx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Z3_ast&nbsp;</td>
          <td class="paramname"> <em>c</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Create a retractable constraint. </p>
<dl class="return"><dt><b>Returns:</b></dt><dd>An id that can be used to retract/reassert the constraint. </dd></dl>

<p>Definition at line <a class="el" href="test__capi_8c_source.html#l02343">2343</a> of file <a class="el" href="test__capi_8c_source.html">test_capi.c</a>.</p>

<p>Referenced by <a class="el" href="test__capi_8c_source.html#l02435">incremental_example1()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l02343"></a>02343                                                                 {
<a name="l02344"></a>02344     <span class="keywordtype">unsigned</span> result;
<a name="l02345"></a>02345     Z3_sort ty;
<a name="l02346"></a>02346     Z3_ast ans_lit;
<a name="l02347"></a>02347     Z3_ast args[2];
<a name="l02348"></a>02348     <span class="keywordflow">if</span> (ctx-&gt;m_num_answer_literals == MAX_RETRACTABLE_ASSERTIONS) {
<a name="l02349"></a>02349         <a class="code" href="group__capi__ex.html#gaa325ae9cdfce0e749a254dfffc6c6ace" title="exit gracefully in case of error.">exitf</a>(<span class="stringliteral">&quot;maximum number of retractable constraints was exceeded.&quot;</span>);
<a name="l02350"></a>02350     }
<a name="l02351"></a>02351     ty      = <a class="code" href="group__capi.html#gacdc73510b69a010b71793d429015f342" title="Create the Boolean type.">Z3_mk_bool_sort</a>(ctx-&gt;m_context);
<a name="l02352"></a>02352     ans_lit = <a class="code" href="group__capi.html#ga99cbd3e87cdd759a3d0ea43b4884ed32" title="Declare and create a fresh constant.">Z3_mk_fresh_const</a>(ctx-&gt;m_context, <span class="stringliteral">&quot;k&quot;</span>, ty);
<a name="l02353"></a>02353     result  = ctx-&gt;m_num_answer_literals;
<a name="l02354"></a>02354     ctx-&gt;m_answer_literals[result] = ans_lit;
<a name="l02355"></a>02355     ctx-&gt;m_retracted[result]       = <a class="code" href="group__capi.html#ga1d9cee57472b2c7623642f123b8f1781" title="False value. It is just an alias for 0.">Z3_FALSE</a>;
<a name="l02356"></a>02356     ctx-&gt;m_num_answer_literals++;
<a name="l02357"></a>02357     <span class="comment">// assert: c OR (not ans_lit)</span>
<a name="l02358"></a>02358     args[0] = c;
<a name="l02359"></a>02359     args[1] = <a class="code" href="group__capi.html#ga3329538091996eb7b3dc677760a61072" title="Create an AST node representing not(a).">Z3_mk_not</a>(ctx-&gt;m_context, ans_lit);
<a name="l02360"></a>02360     <a class="code" href="group__capi.html#ga1a05ff73a564ae7256a2257048a4680a" title="Assert a constraint into the logical context.">Z3_assert_cnstr</a>(ctx-&gt;m_context, <a class="code" href="group__capi.html#ga00866d16331d505620a6c515302021f9" title="Create an AST node representing args[0] or ... or args[num_args-1].">Z3_mk_or</a>(ctx-&gt;m_context, 2, args));
<a name="l02361"></a>02361     <span class="keywordflow">return</span> result;
<a name="l02362"></a>02362 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ga7c79797558d27310546712cb8fb1c584"></a><!-- doxytag: member="test_capi.c::binary_tree_example" ref="ga7c79797558d27310546712cb8fb1c584" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void binary_tree_example </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Create a binary tree datatype of the form BinTree ::= nil | node(value : Int, left : BinTree, right : BinTree). </p>

<p>Definition at line <a class="el" href="test__capi_8c_source.html#l02102">2102</a> of file <a class="el" href="test__capi_8c_source.html">test_capi.c</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l02102"></a>02102                            {
<a name="l02103"></a>02103     Z3_context ctx = <a class="code" href="group__maxsat__ex.html#ga102b86f8b4829828c5c2d06c5d8b8489" title="Create a logical context. Enable model construction only.">mk_context</a>();
<a name="l02104"></a>02104     Z3_sort cell;
<a name="l02105"></a>02105     Z3_func_decl 
<a name="l02106"></a>02106         nil_decl, <span class="comment">/* nil : BinTree   (constructor) */</span>
<a name="l02107"></a>02107         is_nil_decl, <span class="comment">/* is_nil : BinTree -&gt; Bool (tester, return true if the given BinTree is a nil) */</span>
<a name="l02108"></a>02108         node_decl, <span class="comment">/* node : Int, BinTree, BinTree -&gt; BinTree  (constructor) */</span>
<a name="l02109"></a>02109         is_node_decl, <span class="comment">/* is_node : BinTree -&gt; Bool (tester, return true if the given BinTree is a node) */</span>
<a name="l02110"></a>02110         value_decl,  <span class="comment">/* value : BinTree -&gt; Int  (accessor for nodes) */</span>
<a name="l02111"></a>02111         left_decl,   <span class="comment">/* left : BinTree -&gt; BinTree (accessor for nodes, retrieves the left child of a node) */</span>
<a name="l02112"></a>02112         right_decl;  <span class="comment">/* right : BinTree -&gt; BinTree (accessor for nodes, retrieves the right child of a node) */</span>
<a name="l02113"></a>02113     Z3_symbol node_accessor_names[3] = { <a class="code" href="group__capi.html#ga6b9ed981ba0180962928394fe828b0a7" title="Create a Z3 symbol using a C string.">Z3_mk_string_symbol</a>(ctx, <span class="stringliteral">&quot;value&quot;</span>), <a class="code" href="group__capi.html#ga6b9ed981ba0180962928394fe828b0a7" title="Create a Z3 symbol using a C string.">Z3_mk_string_symbol</a>(ctx, <span class="stringliteral">&quot;left&quot;</span>), <a class="code" href="group__capi.html#ga6b9ed981ba0180962928394fe828b0a7" title="Create a Z3 symbol using a C string.">Z3_mk_string_symbol</a>(ctx, <span class="stringliteral">&quot;right&quot;</span>) };
<a name="l02114"></a>02114     Z3_sort   node_accessor_sorts[3] = { <a class="code" href="group__capi.html#ga6cd426ab5748653b77d389fd3eac1015" title="Create the integer type.">Z3_mk_int_sort</a>(ctx), 0, 0 };
<a name="l02115"></a>02115     <span class="keywordtype">unsigned</span>  node_accessor_sort_refs[3] = { 0, 0, 0 };
<a name="l02116"></a>02116     Z3_constructor nil_con, node_con;
<a name="l02117"></a>02117     Z3_constructor constructors[2];
<a name="l02118"></a>02118     Z3_func_decl node_accessors[3];
<a name="l02119"></a>02119 
<a name="l02120"></a>02120     printf(<span class="stringliteral">&quot;\nbinary_tree_example\n&quot;</span>);
<a name="l02121"></a>02121     LOG_MSG(<span class="stringliteral">&quot;binary_tree_example&quot;</span>);
<a name="l02122"></a>02122 
<a name="l02123"></a>02123     <span class="comment">/* nil_con and node_con are auxiliary datastructures used to create the new recursive datatype BinTree */</span>
<a name="l02124"></a>02124     nil_con  = <a class="code" href="group__capi.html#gaa779e39f7050b9d51857887954b5f9b0" title="Create a constructor.">Z3_mk_constructor</a>(ctx, <a class="code" href="group__capi.html#ga6b9ed981ba0180962928394fe828b0a7" title="Create a Z3 symbol using a C string.">Z3_mk_string_symbol</a>(ctx, <span class="stringliteral">&quot;nil&quot;</span>), <a class="code" href="group__capi.html#ga6b9ed981ba0180962928394fe828b0a7" title="Create a Z3 symbol using a C string.">Z3_mk_string_symbol</a>(ctx, <span class="stringliteral">&quot;is-nil&quot;</span>), 0, 0, 0, 0);
<a name="l02125"></a>02125     node_con = <a class="code" href="group__capi.html#gaa779e39f7050b9d51857887954b5f9b0" title="Create a constructor.">Z3_mk_constructor</a>(ctx, <a class="code" href="group__capi.html#ga6b9ed981ba0180962928394fe828b0a7" title="Create a Z3 symbol using a C string.">Z3_mk_string_symbol</a>(ctx, <span class="stringliteral">&quot;node&quot;</span>), <a class="code" href="group__capi.html#ga6b9ed981ba0180962928394fe828b0a7" title="Create a Z3 symbol using a C string.">Z3_mk_string_symbol</a>(ctx, <span class="stringliteral">&quot;is-cons&quot;</span>), 
<a name="l02126"></a>02126                                  3, node_accessor_names, node_accessor_sorts, node_accessor_sort_refs);
<a name="l02127"></a>02127     constructors[0] = nil_con;
<a name="l02128"></a>02128     constructors[1] = node_con;
<a name="l02129"></a>02129     
<a name="l02130"></a>02130     <span class="comment">/* create the new recursive datatype */</span>
<a name="l02131"></a>02131     cell = <a class="code" href="group__capi.html#gab6809d53327d807da9158abdf75df387" title="Create datatype, such as lists, trees, records, enumerations or unions of records...">Z3_mk_datatype</a>(ctx, <a class="code" href="group__capi.html#ga6b9ed981ba0180962928394fe828b0a7" title="Create a Z3 symbol using a C string.">Z3_mk_string_symbol</a>(ctx, <span class="stringliteral">&quot;BinTree&quot;</span>), 2, constructors);
<a name="l02132"></a>02132 
<a name="l02133"></a>02133     <span class="comment">/* retrieve the new declarations: constructors (nil_decl, node_decl), testers (is_nil_decl, is_cons_del), and </span>
<a name="l02134"></a>02134 <span class="comment">       accessors (value_decl, left_decl, right_decl */</span>
<a name="l02135"></a>02135     <a class="code" href="group__capi.html#ga72e643039b46b1e0b82c543479e3bb7f" title="Query constructor for declared functions.">Z3_query_constructor</a>(ctx, nil_con, 0, &amp;nil_decl, &amp;is_nil_decl, 0);
<a name="l02136"></a>02136     <a class="code" href="group__capi.html#ga72e643039b46b1e0b82c543479e3bb7f" title="Query constructor for declared functions.">Z3_query_constructor</a>(ctx, node_con, 3, &amp;node_decl, &amp;is_node_decl, node_accessors);
<a name="l02137"></a>02137     value_decl = node_accessors[0];
<a name="l02138"></a>02138     left_decl  = node_accessors[1];
<a name="l02139"></a>02139     right_decl = node_accessors[2];
<a name="l02140"></a>02140 
<a name="l02141"></a>02141     <span class="comment">/* delete auxiliary/helper structures */</span>
<a name="l02142"></a>02142     <a class="code" href="group__capi.html#ga63816efdbce93734c72f395b6a6a9e35" title="Reclaim memory allocated to constructor.">Z3_del_constructor</a>(ctx, nil_con);
<a name="l02143"></a>02143     <a class="code" href="group__capi.html#ga63816efdbce93734c72f395b6a6a9e35" title="Reclaim memory allocated to constructor.">Z3_del_constructor</a>(ctx, node_con);
<a name="l02144"></a>02144 
<a name="l02145"></a>02145     <span class="comment">/* small example using the recursive datatype BinTree */</span>
<a name="l02146"></a>02146     {
<a name="l02147"></a>02147         <span class="comment">/* create nil */</span>
<a name="l02148"></a>02148         Z3_ast nil = <a class="code" href="group__capi.html#ga33a202d86bf628bfab9b6f437536cebe" title="Create a constant or function application.">Z3_mk_app</a>(ctx, nil_decl, 0, 0);
<a name="l02149"></a>02149         <span class="comment">/* create node1 ::= node(10, nil, nil) */</span>
<a name="l02150"></a>02150         Z3_ast args1[3] = { <a class="code" href="group__capi__ex.html#gac55b5bc7b387575d70b84ae5f92bc7fc" title="Create a Z3 integer node using a C int.">mk_int</a>(ctx, 10), nil, nil };
<a name="l02151"></a>02151         Z3_ast node1    = <a class="code" href="group__capi.html#ga33a202d86bf628bfab9b6f437536cebe" title="Create a constant or function application.">Z3_mk_app</a>(ctx, node_decl, 3, args1);
<a name="l02152"></a>02152         <span class="comment">/* create node2 ::= node(30, node1, nil) */</span>
<a name="l02153"></a>02153         Z3_ast args2[3] = { <a class="code" href="group__capi__ex.html#gac55b5bc7b387575d70b84ae5f92bc7fc" title="Create a Z3 integer node using a C int.">mk_int</a>(ctx, 30), node1, nil };
<a name="l02154"></a>02154         Z3_ast node2    = <a class="code" href="group__capi.html#ga33a202d86bf628bfab9b6f437536cebe" title="Create a constant or function application.">Z3_mk_app</a>(ctx, node_decl, 3, args2);
<a name="l02155"></a>02155         <span class="comment">/* create node3 ::= node(20, node2, node1); */</span>
<a name="l02156"></a>02156         Z3_ast args3[3] = { <a class="code" href="group__capi__ex.html#gac55b5bc7b387575d70b84ae5f92bc7fc" title="Create a Z3 integer node using a C int.">mk_int</a>(ctx, 20), node2, node1 };
<a name="l02157"></a>02157         Z3_ast node3    = <a class="code" href="group__capi.html#ga33a202d86bf628bfab9b6f437536cebe" title="Create a constant or function application.">Z3_mk_app</a>(ctx, node_decl, 3, args3);
<a name="l02158"></a>02158 
<a name="l02159"></a>02159         <span class="comment">/* prove that nil != node1 */</span>
<a name="l02160"></a>02160         <a class="code" href="group__capi__ex.html#gac1c8ca24db543be3c7c8ada6e3cad89b" title="Prove that the constraints already asserted into the logical context implies the...">prove</a>(ctx, <a class="code" href="group__capi.html#ga3329538091996eb7b3dc677760a61072" title="Create an AST node representing not(a).">Z3_mk_not</a>(ctx, <a class="code" href="group__capi.html#ga95a19ce675b70e22bb0401f7137af37c" title="Create an AST node representing l = r.">Z3_mk_eq</a>(ctx, nil, node1)), <a class="code" href="group__capi.html#gad86c8730a2e4e61bac585b240a6288d4" title="True value. It is just an alias for 1.">Z3_TRUE</a>);
<a name="l02161"></a>02161 
<a name="l02162"></a>02162         <span class="comment">/* prove that nil = left(node1) */</span>
<a name="l02163"></a>02163         <a class="code" href="group__capi__ex.html#gac1c8ca24db543be3c7c8ada6e3cad89b" title="Prove that the constraints already asserted into the logical context implies the...">prove</a>(ctx, <a class="code" href="group__capi.html#ga95a19ce675b70e22bb0401f7137af37c" title="Create an AST node representing l = r.">Z3_mk_eq</a>(ctx, nil, <a class="code" href="group__capi__ex.html#ga27ac720892fd2ea62deca501d6d2e706" title="Create the unary function application: (f x).">mk_unary_app</a>(ctx, left_decl, node1)), <a class="code" href="group__capi.html#gad86c8730a2e4e61bac585b240a6288d4" title="True value. It is just an alias for 1.">Z3_TRUE</a>);
<a name="l02164"></a>02164 
<a name="l02165"></a>02165         <span class="comment">/* prove that node1 = right(node3) */</span>
<a name="l02166"></a>02166         <a class="code" href="group__capi__ex.html#gac1c8ca24db543be3c7c8ada6e3cad89b" title="Prove that the constraints already asserted into the logical context implies the...">prove</a>(ctx, <a class="code" href="group__capi.html#ga95a19ce675b70e22bb0401f7137af37c" title="Create an AST node representing l = r.">Z3_mk_eq</a>(ctx, node1, <a class="code" href="group__capi__ex.html#ga27ac720892fd2ea62deca501d6d2e706" title="Create the unary function application: (f x).">mk_unary_app</a>(ctx, right_decl, node3)), <a class="code" href="group__capi.html#gad86c8730a2e4e61bac585b240a6288d4" title="True value. It is just an alias for 1.">Z3_TRUE</a>);
<a name="l02167"></a>02167 
<a name="l02168"></a>02168         <span class="comment">/* prove that !is-nil(node2) */</span>
<a name="l02169"></a>02169         <a class="code" href="group__capi__ex.html#gac1c8ca24db543be3c7c8ada6e3cad89b" title="Prove that the constraints already asserted into the logical context implies the...">prove</a>(ctx, <a class="code" href="group__capi.html#ga3329538091996eb7b3dc677760a61072" title="Create an AST node representing not(a).">Z3_mk_not</a>(ctx, <a class="code" href="group__capi__ex.html#ga27ac720892fd2ea62deca501d6d2e706" title="Create the unary function application: (f x).">mk_unary_app</a>(ctx, is_nil_decl, node2)), <a class="code" href="group__capi.html#gad86c8730a2e4e61bac585b240a6288d4" title="True value. It is just an alias for 1.">Z3_TRUE</a>);
<a name="l02170"></a>02170 
<a name="l02171"></a>02171         <span class="comment">/* prove that value(node2) &gt;= 0 */</span>
<a name="l02172"></a>02172         <a class="code" href="group__capi__ex.html#gac1c8ca24db543be3c7c8ada6e3cad89b" title="Prove that the constraints already asserted into the logical context implies the...">prove</a>(ctx, <a class="code" href="group__capi.html#gad9245cbadb80b192323d01a8360fb942" title="Create greater than or equal to.">Z3_mk_ge</a>(ctx, <a class="code" href="group__capi__ex.html#ga27ac720892fd2ea62deca501d6d2e706" title="Create the unary function application: (f x).">mk_unary_app</a>(ctx, value_decl, node2), <a class="code" href="group__capi__ex.html#gac55b5bc7b387575d70b84ae5f92bc7fc" title="Create a Z3 integer node using a C int.">mk_int</a>(ctx, 0)), <a class="code" href="group__capi.html#gad86c8730a2e4e61bac585b240a6288d4" title="True value. It is just an alias for 1.">Z3_TRUE</a>);
<a name="l02173"></a>02173     }
<a name="l02174"></a>02174 
<a name="l02175"></a>02175     <span class="comment">/* delete logical context */</span>
<a name="l02176"></a>02176     <a class="code" href="group__capi.html#ga556eae80ed43ab13e1e7dc3b38c35200" title="Delete the given logical context.">Z3_del_context</a>(ctx);
<a name="l02177"></a>02177 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="gaa793cf13b8fcfdb908363f1890bc06ae"></a><!-- doxytag: member="test_capi.c::bitvector_example1" ref="gaa793cf13b8fcfdb908363f1890bc06ae" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void bitvector_example1 </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Simple bit-vector example. This example disproves that x - 10 &lt;= 0 IFF x &lt;= 10 for (32-bit) machine integers. </p>

<p>Definition at line <a class="el" href="test__capi_8c_source.html#l01347">1347</a> of file <a class="el" href="test__capi_8c_source.html">test_capi.c</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l01348"></a>01348 {
<a name="l01349"></a>01349     Z3_context         ctx;
<a name="l01350"></a>01350     Z3_sort        bv_sort;
<a name="l01351"></a>01351     Z3_ast             x, zero, ten, x_minus_ten, c1, c2, thm;
<a name="l01352"></a>01352 
<a name="l01353"></a>01353     printf(<span class="stringliteral">&quot;\nbitvector_example1\n&quot;</span>);
<a name="l01354"></a>01354     LOG_MSG(<span class="stringliteral">&quot;bitvector_example1&quot;</span>);
<a name="l01355"></a>01355     
<a name="l01356"></a>01356     ctx       = <a class="code" href="group__maxsat__ex.html#ga102b86f8b4829828c5c2d06c5d8b8489" title="Create a logical context. Enable model construction only.">mk_context</a>();
<a name="l01357"></a>01357     
<a name="l01358"></a>01358     bv_sort   = <a class="code" href="group__capi.html#gaeed000a1bbb84b6ca6fdaac6cf0c1688" title="Create a bit-vector type of the given size.">Z3_mk_bv_sort</a>(ctx, 32);
<a name="l01359"></a>01359     
<a name="l01360"></a>01360     x           = <a class="code" href="group__maxsat__ex.html#gad55575aaf95896158c9e2f12e93769c8" title="Create a variable using the given name and type.">mk_var</a>(ctx, <span class="stringliteral">&quot;x&quot;</span>, bv_sort);
<a name="l01361"></a>01361     zero        = <a class="code" href="group__capi.html#ga92e75c71f0d602c65b67ae8ae82dcb6a" title="Create a numeral of a given sort.">Z3_mk_numeral</a>(ctx, <span class="stringliteral">&quot;0&quot;</span>, bv_sort);
<a name="l01362"></a>01362     ten         = <a class="code" href="group__capi.html#ga92e75c71f0d602c65b67ae8ae82dcb6a" title="Create a numeral of a given sort.">Z3_mk_numeral</a>(ctx, <span class="stringliteral">&quot;10&quot;</span>, bv_sort);
<a name="l01363"></a>01363     x_minus_ten = <a class="code" href="group__capi.html#ga688c9aa1347888c7a51be4e46c19178e" title="Standard two&amp;#39;s complement subtraction.">Z3_mk_bvsub</a>(ctx, x, ten);
<a name="l01364"></a>01364     <span class="comment">/* bvsle is signed less than or equal to */</span>
<a name="l01365"></a>01365     c1          = <a class="code" href="group__capi.html#gab7c026feb93e7d2eab180e96f1e6255d" title="Two&amp;#39;s complement signed less than or equal to.">Z3_mk_bvsle</a>(ctx, x, ten);
<a name="l01366"></a>01366     c2          = <a class="code" href="group__capi.html#gab7c026feb93e7d2eab180e96f1e6255d" title="Two&amp;#39;s complement signed less than or equal to.">Z3_mk_bvsle</a>(ctx, x_minus_ten, zero);
<a name="l01367"></a>01367     thm         = <a class="code" href="group__capi.html#ga930a8e844d345fbebc498ac43a696042" title="Create an AST node representing t1 iff t2.">Z3_mk_iff</a>(ctx, c1, c2);
<a name="l01368"></a>01368     printf(<span class="stringliteral">&quot;disprove: x - 10 &lt;= 0 IFF x &lt;= 10 for (32-bit) machine integers\n&quot;</span>);
<a name="l01369"></a>01369     <a class="code" href="group__capi__ex.html#gac1c8ca24db543be3c7c8ada6e3cad89b" title="Prove that the constraints already asserted into the logical context implies the...">prove</a>(ctx, thm, <a class="code" href="group__capi.html#ga1d9cee57472b2c7623642f123b8f1781" title="False value. It is just an alias for 0.">Z3_FALSE</a>);
<a name="l01370"></a>01370     
<a name="l01371"></a>01371     <a class="code" href="group__capi.html#ga556eae80ed43ab13e1e7dc3b38c35200" title="Delete the given logical context.">Z3_del_context</a>(ctx);
<a name="l01372"></a>01372 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="gab34a23f8c84c0235efb12c3d265c9398"></a><!-- doxytag: member="test_capi.c::bitvector_example2" ref="gab34a23f8c84c0235efb12c3d265c9398" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void bitvector_example2 </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Find x and y such that: x ^ y - 103 == x * y. </p>

<p>Definition at line <a class="el" href="test__capi_8c_source.html#l01377">1377</a> of file <a class="el" href="test__capi_8c_source.html">test_capi.c</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l01378"></a>01378 {
<a name="l01379"></a>01379     Z3_context ctx = <a class="code" href="group__maxsat__ex.html#ga102b86f8b4829828c5c2d06c5d8b8489" title="Create a logical context. Enable model construction only.">mk_context</a>();
<a name="l01380"></a>01380  
<a name="l01381"></a>01381     <span class="comment">/* construct x ^ y - 103 == x * y */</span>
<a name="l01382"></a>01382     Z3_sort bv_sort = <a class="code" href="group__capi.html#gaeed000a1bbb84b6ca6fdaac6cf0c1688" title="Create a bit-vector type of the given size.">Z3_mk_bv_sort</a>(ctx, 32);
<a name="l01383"></a>01383     Z3_ast x = <a class="code" href="group__maxsat__ex.html#gad55575aaf95896158c9e2f12e93769c8" title="Create a variable using the given name and type.">mk_var</a>(ctx, <span class="stringliteral">&quot;x&quot;</span>, bv_sort);
<a name="l01384"></a>01384     Z3_ast y = <a class="code" href="group__maxsat__ex.html#gad55575aaf95896158c9e2f12e93769c8" title="Create a variable using the given name and type.">mk_var</a>(ctx, <span class="stringliteral">&quot;y&quot;</span>, bv_sort);
<a name="l01385"></a>01385     Z3_ast x_xor_y = <a class="code" href="group__capi.html#ga0a3821ea00b1c762205f73e4bc29e7d8" title="Bitwise exclusive-or.">Z3_mk_bvxor</a>(ctx, x, y);
<a name="l01386"></a>01386     Z3_ast c103 = <a class="code" href="group__capi.html#ga92e75c71f0d602c65b67ae8ae82dcb6a" title="Create a numeral of a given sort.">Z3_mk_numeral</a>(ctx, <span class="stringliteral">&quot;103&quot;</span>, bv_sort);
<a name="l01387"></a>01387     Z3_ast lhs = <a class="code" href="group__capi.html#ga688c9aa1347888c7a51be4e46c19178e" title="Standard two&amp;#39;s complement subtraction.">Z3_mk_bvsub</a>(ctx, x_xor_y, c103);
<a name="l01388"></a>01388     Z3_ast rhs = <a class="code" href="group__capi.html#ga6abd3dde2a1ceff1704cf7221a72258c" title="Standard two&amp;#39;s complement multiplication.">Z3_mk_bvmul</a>(ctx, x, y);
<a name="l01389"></a>01389     Z3_ast ctr = <a class="code" href="group__capi.html#ga95a19ce675b70e22bb0401f7137af37c" title="Create an AST node representing l = r.">Z3_mk_eq</a>(ctx, lhs, rhs);
<a name="l01390"></a>01390 
<a name="l01391"></a>01391     printf(<span class="stringliteral">&quot;\nbitvector_example2\n&quot;</span>);
<a name="l01392"></a>01392     LOG_MSG(<span class="stringliteral">&quot;bitvector_example2&quot;</span>);
<a name="l01393"></a>01393     printf(<span class="stringliteral">&quot;find values of x and y, such that x ^ y - 103 == x * y\n&quot;</span>);
<a name="l01394"></a>01394     
<a name="l01395"></a>01395     <span class="comment">/* add the constraint &lt;tt&gt;x ^ y - 103 == x * y&lt;\tt&gt; to the logical context */</span>
<a name="l01396"></a>01396     <a class="code" href="group__capi.html#ga1a05ff73a564ae7256a2257048a4680a" title="Assert a constraint into the logical context.">Z3_assert_cnstr</a>(ctx, ctr);
<a name="l01397"></a>01397     
<a name="l01398"></a>01398     <span class="comment">/* find a model (i.e., values for x an y that satisfy the constraint */</span>
<a name="l01399"></a>01399     <a class="code" href="group__capi__ex.html#ga4ac4375063bd700cce15158ba6e761be" title="Check whether the logical context is satisfiable, and compare the result with the...">check</a>(ctx, Z3_L_TRUE);
<a name="l01400"></a>01400     
<a name="l01401"></a>01401     <a class="code" href="group__capi.html#ga556eae80ed43ab13e1e7dc3b38c35200" title="Delete the given logical context.">Z3_del_context</a>(ctx);
<a name="l01402"></a>01402 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ga4ac4375063bd700cce15158ba6e761be"></a><!-- doxytag: member="test_capi.c::check" ref="ga4ac4375063bd700cce15158ba6e761be" args="(Z3_context ctx, Z3_lbool expected_result)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void check </td>
          <td>(</td>
          <td class="paramtype">Z3_context&nbsp;</td>
          <td class="paramname"> <em>ctx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__capi.html#ga6c2de6ea89b244e37c3ffb17a9ea2a89">Z3_lbool</a>&nbsp;</td>
          <td class="paramname"> <em>expected_result</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Check whether the logical context is satisfiable, and compare the result with the expected result. If the context is satisfiable, then display the model. </p>

<p>Definition at line <a class="el" href="test__capi_8c_source.html#l00181">181</a> of file <a class="el" href="test__capi_8c_source.html">test_capi.c</a>.</p>

<p>Referenced by <a class="el" href="test__capi_8c_source.html#l01377">bitvector_example2()</a>, <a class="el" href="test__capi_8c_source.html#l00738">find_model_example1()</a>, <a class="el" href="test__capi_8c_source.html#l00764">find_model_example2()</a>, <a class="el" href="test__user__theory_8c_source.html#l00889">model_display_example()</a>, <a class="el" href="test__user__theory_8c_source.html#l00842">pa_theory_example2()</a>, <a class="el" href="test__capi_8c_source.html#l01564">parser_example1()</a>, <a class="el" href="test__capi_8c_source.html#l01593">parser_example2()</a>, <a class="el" href="test__capi_8c_source.html#l02496">reference_counter_example()</a>, and <a class="el" href="test__user__theory_8c_source.html#l00515">simple_example2()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00182"></a>00182 {
<a name="l00183"></a>00183     Z3_model m      = 0;
<a name="l00184"></a>00184     <a class="code" href="group__capi.html#ga6c2de6ea89b244e37c3ffb17a9ea2a89" title="Lifted Boolean type: false, undefined, true.">Z3_lbool</a> result = <a class="code" href="group__capi.html#gaff310fef80ac8a82d0a51417e073ec0a" title="Check whether the given logical context is consistent or not.">Z3_check_and_get_model</a>(ctx, &amp;m);
<a name="l00185"></a>00185     <span class="keywordflow">switch</span> (result) {
<a name="l00186"></a>00186     <span class="keywordflow">case</span> Z3_L_FALSE:
<a name="l00187"></a>00187         printf(<span class="stringliteral">&quot;unsat\n&quot;</span>);
<a name="l00188"></a>00188         <span class="keywordflow">break</span>;
<a name="l00189"></a>00189     <span class="keywordflow">case</span> Z3_L_UNDEF:
<a name="l00190"></a>00190         printf(<span class="stringliteral">&quot;unknown\n&quot;</span>);
<a name="l00191"></a>00191         printf(<span class="stringliteral">&quot;potential model:\n%s\n&quot;</span>, <a class="code" href="group__capi.html#gaf36d49862a8c0d20dd5e6508eef5f8af" title="Convert the given model into a string.">Z3_model_to_string</a>(ctx, m));
<a name="l00192"></a>00192         <span class="keywordflow">break</span>;
<a name="l00193"></a>00193     <span class="keywordflow">case</span> Z3_L_TRUE:
<a name="l00194"></a>00194         printf(<span class="stringliteral">&quot;sat\n%s\n&quot;</span>, <a class="code" href="group__capi.html#gaf36d49862a8c0d20dd5e6508eef5f8af" title="Convert the given model into a string.">Z3_model_to_string</a>(ctx, m));
<a name="l00195"></a>00195         <span class="keywordflow">break</span>;
<a name="l00196"></a>00196     }
<a name="l00197"></a>00197     <span class="keywordflow">if</span> (m) {
<a name="l00198"></a>00198         <a class="code" href="group__capi.html#ga0cc98d3ce68047f873e119bccaabdbee" title="Delete a model object.">Z3_del_model</a>(ctx, m);
<a name="l00199"></a>00199     }
<a name="l00200"></a>00200     <span class="keywordflow">if</span> (result != expected_result) {
<a name="l00201"></a>00201         <a class="code" href="group__capi__ex.html#gaa325ae9cdfce0e749a254dfffc6c6ace" title="exit gracefully in case of error.">exitf</a>(<span class="stringliteral">&quot;unexpected result&quot;</span>);
<a name="l00202"></a>00202     }
<a name="l00203"></a>00203 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ga9dd6fa6c5fa72c0cd87eb5ec5a6c4965"></a><!-- doxytag: member="test_capi.c::check2" ref="ga9dd6fa6c5fa72c0cd87eb5ec5a6c4965" args="(Z3_context ctx, Z3_lbool expected_result)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void check2 </td>
          <td>(</td>
          <td class="paramtype">Z3_context&nbsp;</td>
          <td class="paramname"> <em>ctx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__capi.html#ga6c2de6ea89b244e37c3ffb17a9ea2a89">Z3_lbool</a>&nbsp;</td>
          <td class="paramname"> <em>expected_result</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Similar to <a class="el" href="group__theory__plugin__ex.html#ga4ac4375063bd700cce15158ba6e761be" title="Check whether the logical context is satisfiable, and compare the result with the...">check</a>, but uses <a class="el" href="group__capi__ex.html#ga4af59d866d3845962448d1354b89e3c6" title="Custom model pretty printer.">display_model</a> instead of <a class="el" href="group__capi.html#gaf36d49862a8c0d20dd5e6508eef5f8af" title="Convert the given model into a string.">Z3_model_to_string</a>. </p>

<p>Definition at line <a class="el" href="test__capi_8c_source.html#l00619">619</a> of file <a class="el" href="test__capi_8c_source.html">test_capi.c</a>.</p>

<p>Referenced by <a class="el" href="test__capi_8c_source.html#l01156">array_example2()</a>, <a class="el" href="test__capi_8c_source.html#l00946">push_pop_example1()</a>, and <a class="el" href="test__capi_8c_source.html#l01023">quantifier_example1()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00620"></a>00620 {
<a name="l00621"></a>00621     Z3_model m      = 0;
<a name="l00622"></a>00622     <a class="code" href="group__capi.html#ga6c2de6ea89b244e37c3ffb17a9ea2a89" title="Lifted Boolean type: false, undefined, true.">Z3_lbool</a> result = <a class="code" href="group__capi.html#gaff310fef80ac8a82d0a51417e073ec0a" title="Check whether the given logical context is consistent or not.">Z3_check_and_get_model</a>(ctx, &amp;m);
<a name="l00623"></a>00623     <span class="keywordflow">switch</span> (result) {
<a name="l00624"></a>00624     <span class="keywordflow">case</span> Z3_L_FALSE:
<a name="l00625"></a>00625         printf(<span class="stringliteral">&quot;unsat\n&quot;</span>);
<a name="l00626"></a>00626         <span class="keywordflow">break</span>;
<a name="l00627"></a>00627     <span class="keywordflow">case</span> Z3_L_UNDEF:
<a name="l00628"></a>00628         printf(<span class="stringliteral">&quot;unknown\n&quot;</span>);
<a name="l00629"></a>00629         printf(<span class="stringliteral">&quot;potential model:\n&quot;</span>);
<a name="l00630"></a>00630         <a class="code" href="group__capi__ex.html#ga4af59d866d3845962448d1354b89e3c6" title="Custom model pretty printer.">display_model</a>(ctx, stdout, m);
<a name="l00631"></a>00631         <span class="keywordflow">break</span>;
<a name="l00632"></a>00632     <span class="keywordflow">case</span> Z3_L_TRUE:
<a name="l00633"></a>00633         printf(<span class="stringliteral">&quot;sat\n&quot;</span>);
<a name="l00634"></a>00634         <a class="code" href="group__capi__ex.html#ga4af59d866d3845962448d1354b89e3c6" title="Custom model pretty printer.">display_model</a>(ctx, stdout, m);
<a name="l00635"></a>00635         <span class="keywordflow">break</span>;
<a name="l00636"></a>00636     }
<a name="l00637"></a>00637     <span class="keywordflow">if</span> (m) {
<a name="l00638"></a>00638         <a class="code" href="group__capi.html#ga0cc98d3ce68047f873e119bccaabdbee" title="Delete a model object.">Z3_del_model</a>(ctx, m);
<a name="l00639"></a>00639     }
<a name="l00640"></a>00640     <span class="keywordflow">if</span> (result != expected_result) {
<a name="l00641"></a>00641         <a class="code" href="group__capi__ex.html#gaa325ae9cdfce0e749a254dfffc6c6ace" title="exit gracefully in case of error.">exitf</a>(<span class="stringliteral">&quot;unexpected result&quot;</span>);
<a name="l00642"></a>00642     }
<a name="l00643"></a>00643 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ga6c6fad58070181de432e40aa86c34270"></a><!-- doxytag: member="test_capi.c::del_ext_context" ref="ga6c6fad58070181de432e40aa86c34270" args="(Z3_ext_context ctx)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void del_ext_context </td>
          <td>(</td>
          <td class="paramtype">Z3_ext_context&nbsp;</td>
          <td class="paramname"> <em>ctx</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Delete the given logical context wrapper. </p>

<p>Definition at line <a class="el" href="test__capi_8c_source.html#l02333">2333</a> of file <a class="el" href="test__capi_8c_source.html">test_capi.c</a>.</p>

<p>Referenced by <a class="el" href="test__capi_8c_source.html#l02435">incremental_example1()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l02333"></a>02333                                          {
<a name="l02334"></a>02334     <a class="code" href="group__capi.html#ga556eae80ed43ab13e1e7dc3b38c35200" title="Delete the given logical context.">Z3_del_context</a>(ctx-&gt;m_context);
<a name="l02335"></a>02335     free(ctx);
<a name="l02336"></a>02336 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="gaede2d42cf4df4754f3aca5a502313dab"></a><!-- doxytag: member="test_capi.c::demorgan" ref="gaede2d42cf4df4754f3aca5a502313dab" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void demorgan </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Demonstration of how Z3 can be used to prove validity of De Morgan's Duality Law: {e not(x and y) &lt;-&gt; (not x) or ( not y) } </p>

<p>Definition at line <a class="el" href="test__capi_8c_source.html#l00682">682</a> of file <a class="el" href="test__capi_8c_source.html">test_capi.c</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00683"></a>00683 {
<a name="l00684"></a>00684     Z3_config cfg;
<a name="l00685"></a>00685     Z3_context ctx;
<a name="l00686"></a>00686     Z3_sort bool_sort;
<a name="l00687"></a>00687     Z3_symbol symbol_x, symbol_y;
<a name="l00688"></a>00688     Z3_ast x, y, not_x, not_y, x_and_y, ls, rs, conjecture, negated_conjecture;
<a name="l00689"></a>00689     Z3_ast args[2];
<a name="l00690"></a>00690 
<a name="l00691"></a>00691     printf(<span class="stringliteral">&quot;\nDeMorgan\n&quot;</span>);
<a name="l00692"></a>00692     LOG_MSG(<span class="stringliteral">&quot;DeMorgan&quot;</span>);
<a name="l00693"></a>00693     
<a name="l00694"></a>00694     cfg                = <a class="code" href="group__capi.html#ga7d6c40d9b79fe8a8851cc8540970787f" title="Create a configuration.">Z3_mk_config</a>();
<a name="l00695"></a>00695     ctx                = <a class="code" href="group__capi.html#ga0bd93cfab4d749dd3e2f2a4416820a46" title="Create a context using the given configuration.">Z3_mk_context</a>(cfg);
<a name="l00696"></a>00696     <a class="code" href="group__capi.html#ga5e620acf5d55d0271097c9bb97219774" title="Delete the given configuration object.">Z3_del_config</a>(cfg);
<a name="l00697"></a>00697     bool_sort          = <a class="code" href="group__capi.html#gacdc73510b69a010b71793d429015f342" title="Create the Boolean type.">Z3_mk_bool_sort</a>(ctx);
<a name="l00698"></a>00698     symbol_x           = <a class="code" href="group__capi.html#ga3df806baf6124df3e63a58cf23e12411" title="Create a Z3 symbol using an integer.">Z3_mk_int_symbol</a>(ctx, 0);
<a name="l00699"></a>00699     symbol_y           = <a class="code" href="group__capi.html#ga3df806baf6124df3e63a58cf23e12411" title="Create a Z3 symbol using an integer.">Z3_mk_int_symbol</a>(ctx, 1);
<a name="l00700"></a>00700     x                  = <a class="code" href="group__capi.html#ga093c9703393f33ae282ec5e8729354ef" title="Declare and create a constant.">Z3_mk_const</a>(ctx, symbol_x, bool_sort);
<a name="l00701"></a>00701     y                  = <a class="code" href="group__capi.html#ga093c9703393f33ae282ec5e8729354ef" title="Declare and create a constant.">Z3_mk_const</a>(ctx, symbol_y, bool_sort);
<a name="l00702"></a>00702     
<a name="l00703"></a>00703     <span class="comment">/* De Morgan - with a negation around */</span>
<a name="l00704"></a>00704     <span class="comment">/* !(!(x &amp;&amp; y) &lt;-&gt; (!x || !y)) */</span>
<a name="l00705"></a>00705     not_x              = <a class="code" href="group__capi.html#ga3329538091996eb7b3dc677760a61072" title="Create an AST node representing not(a).">Z3_mk_not</a>(ctx, x);
<a name="l00706"></a>00706     not_y              = <a class="code" href="group__capi.html#ga3329538091996eb7b3dc677760a61072" title="Create an AST node representing not(a).">Z3_mk_not</a>(ctx, y);
<a name="l00707"></a>00707     args[0]            = x;
<a name="l00708"></a>00708     args[1]            = y;
<a name="l00709"></a>00709     x_and_y            = <a class="code" href="group__capi.html#gacde98ce4a8ed1dde50b9669db4838c61" title="Create an AST node representing args[0] and ... and args[num_args-1].">Z3_mk_and</a>(ctx, 2, args);
<a name="l00710"></a>00710     ls                 = <a class="code" href="group__capi.html#ga3329538091996eb7b3dc677760a61072" title="Create an AST node representing not(a).">Z3_mk_not</a>(ctx, x_and_y);
<a name="l00711"></a>00711     args[0]            = not_x;
<a name="l00712"></a>00712     args[1]            = not_y;
<a name="l00713"></a>00713     rs                 = <a class="code" href="group__capi.html#ga00866d16331d505620a6c515302021f9" title="Create an AST node representing args[0] or ... or args[num_args-1].">Z3_mk_or</a>(ctx, 2, args);
<a name="l00714"></a>00714     conjecture         = <a class="code" href="group__capi.html#ga930a8e844d345fbebc498ac43a696042" title="Create an AST node representing t1 iff t2.">Z3_mk_iff</a>(ctx, ls, rs);
<a name="l00715"></a>00715     negated_conjecture = <a class="code" href="group__capi.html#ga3329538091996eb7b3dc677760a61072" title="Create an AST node representing not(a).">Z3_mk_not</a>(ctx, conjecture);
<a name="l00716"></a>00716     
<a name="l00717"></a>00717     <a class="code" href="group__capi.html#ga1a05ff73a564ae7256a2257048a4680a" title="Assert a constraint into the logical context.">Z3_assert_cnstr</a>(ctx, negated_conjecture);
<a name="l00718"></a>00718     <span class="keywordflow">switch</span> (<a class="code" href="group__capi.html#ga72055cfbae81bd174abed32a83e50b03" title="Check whether the given logical context is consistent or not.">Z3_check</a>(ctx)) {
<a name="l00719"></a>00719     <span class="keywordflow">case</span> Z3_L_FALSE:
<a name="l00720"></a>00720         <span class="comment">/* The negated conjecture was unsatisfiable, hence the conjecture is valid */</span>
<a name="l00721"></a>00721         printf(<span class="stringliteral">&quot;DeMorgan is valid\n&quot;</span>);
<a name="l00722"></a>00722         <span class="keywordflow">break</span>;
<a name="l00723"></a>00723     <span class="keywordflow">case</span> Z3_L_UNDEF:
<a name="l00724"></a>00724         <span class="comment">/* Check returned undef */</span>
<a name="l00725"></a>00725         printf(<span class="stringliteral">&quot;Undef\n&quot;</span>);
<a name="l00726"></a>00726         <span class="keywordflow">break</span>;
<a name="l00727"></a>00727     <span class="keywordflow">case</span> Z3_L_TRUE:
<a name="l00728"></a>00728         <span class="comment">/* The negated conjecture was satisfiable, hence the conjecture is not valid */</span>
<a name="l00729"></a>00729         printf(<span class="stringliteral">&quot;DeMorgan is not valid\n&quot;</span>);
<a name="l00730"></a>00730         <span class="keywordflow">break</span>;
<a name="l00731"></a>00731     }
<a name="l00732"></a>00732     <a class="code" href="group__capi.html#ga556eae80ed43ab13e1e7dc3b38c35200" title="Delete the given logical context.">Z3_del_context</a>(ctx);
<a name="l00733"></a>00733 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ga807b5fe0e26acdec09e52a77318208d0"></a><!-- doxytag: member="test_capi.c::display_ast" ref="ga807b5fe0e26acdec09e52a77318208d0" args="(Z3_context c, FILE *out, Z3_ast v)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void display_ast </td>
          <td>(</td>
          <td class="paramtype">Z3_context&nbsp;</td>
          <td class="paramname"> <em>c</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">FILE *&nbsp;</td>
          <td class="paramname"> <em>out</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Z3_ast&nbsp;</td>
          <td class="paramname"> <em>v</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Custom ast pretty printer. </p>
<p>This function demonstrates how to use the API to navigate terms. </p>

<p>Definition at line <a class="el" href="test__capi_8c_source.html#l00504">504</a> of file <a class="el" href="test__capi_8c_source.html">test_capi.c</a>.</p>

<p>Referenced by <a class="el" href="test__capi_8c_source.html#l00545">display_function_interpretations()</a>, <a class="el" href="test__capi_8c_source.html#l00593">display_model()</a>, and <a class="el" href="test__capi_8c_source.html#l01407">eval_example1()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00505"></a>00505 {
<a name="l00506"></a>00506     <span class="keywordflow">switch</span> (<a class="code" href="group__capi.html#ga4c43608feea4cae363ef9c520c239a5c" title="Return the kind of the given AST.">Z3_get_ast_kind</a>(c, v)) {
<a name="l00507"></a>00507     <span class="keywordflow">case</span> Z3_NUMERAL_AST: {
<a name="l00508"></a>00508         Z3_sort t;
<a name="l00509"></a>00509         fprintf(out, <span class="stringliteral">&quot;%s&quot;</span>, <a class="code" href="group__capi.html#ga94617ef18fa7157e1a3f85db625d2f4b" title="Return numeral value, as a string of a numeric constant term.">Z3_get_numeral_string</a>(c, v));
<a name="l00510"></a>00510         t = <a class="code" href="group__capi.html#ga0a4dac7e9397ff067136354cd33cb933" title="Return the sort of an AST node.">Z3_get_sort</a>(c, v);
<a name="l00511"></a>00511         fprintf(out, <span class="stringliteral">&quot;:&quot;</span>);
<a name="l00512"></a>00512         <a class="code" href="group__capi__ex.html#ga8a9e74a0c3915e48a40a311af80bf369" title="Display the given type.">display_sort</a>(c, out, t);
<a name="l00513"></a>00513         <span class="keywordflow">break</span>;
<a name="l00514"></a>00514     }
<a name="l00515"></a>00515     <span class="keywordflow">case</span> Z3_APP_AST: {
<a name="l00516"></a>00516         <span class="keywordtype">unsigned</span> i;
<a name="l00517"></a>00517         Z3_app app = <a class="code" href="group__capi.html#gaf9345fd0822d7e9928dd4ab14a09765b" title="Convert an ast into an APP_AST. This is just type casting.">Z3_to_app</a>(c, v);
<a name="l00518"></a>00518         <span class="keywordtype">unsigned</span> num_fields = <a class="code" href="group__capi.html#gae8ad520b79b46c323863bacffa0e12c0" title="Return the number of argument of an application. If t is an constant, then the number...">Z3_get_app_num_args</a>(c, app);
<a name="l00519"></a>00519         Z3_func_decl d = <a class="code" href="group__capi.html#ga4ffab51c30484a32edc65194573cfd28" title="Return the declaration of a constant or function application.">Z3_get_app_decl</a>(c, app);
<a name="l00520"></a>00520         fprintf(out, <span class="stringliteral">&quot;%s&quot;</span>, Z3_func_decl_to_string(c, d));
<a name="l00521"></a>00521         <span class="keywordflow">if</span> (num_fields &gt; 0) {
<a name="l00522"></a>00522             fprintf(out, <span class="stringliteral">&quot;[&quot;</span>);
<a name="l00523"></a>00523             <span class="keywordflow">for</span> (i = 0; i &lt; num_fields; i++) {
<a name="l00524"></a>00524                 <span class="keywordflow">if</span> (i &gt; 0) {
<a name="l00525"></a>00525                     fprintf(out, <span class="stringliteral">&quot;, &quot;</span>);
<a name="l00526"></a>00526                 }
<a name="l00527"></a>00527                 <a class="code" href="group__capi__ex.html#ga807b5fe0e26acdec09e52a77318208d0" title="Custom ast pretty printer.">display_ast</a>(c, out, <a class="code" href="group__capi.html#ga49a576b11f9f6ca4a94670e538a84c6b" title="Return the i-th argument of the given application.">Z3_get_app_arg</a>(c, app, i));
<a name="l00528"></a>00528             }
<a name="l00529"></a>00529             fprintf(out, <span class="stringliteral">&quot;]&quot;</span>);
<a name="l00530"></a>00530         }
<a name="l00531"></a>00531         <span class="keywordflow">break</span>;
<a name="l00532"></a>00532     }
<a name="l00533"></a>00533     <span class="keywordflow">case</span> Z3_QUANTIFIER_AST: {
<a name="l00534"></a>00534         fprintf(out, <span class="stringliteral">&quot;quantifier&quot;</span>);
<a name="l00535"></a>00535         ;       
<a name="l00536"></a>00536     }
<a name="l00537"></a>00537     <span class="keywordflow">default</span>:
<a name="l00538"></a>00538         fprintf(out, <span class="stringliteral">&quot;#unknown&quot;</span>);
<a name="l00539"></a>00539     }
<a name="l00540"></a>00540 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ga5416a7bbf6e561fcfdda0dd85bec2682"></a><!-- doxytag: member="test_capi.c::display_function_interpretations" ref="ga5416a7bbf6e561fcfdda0dd85bec2682" args="(Z3_context c, FILE *out, Z3_model m)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void display_function_interpretations </td>
          <td>(</td>
          <td class="paramtype">Z3_context&nbsp;</td>
          <td class="paramname"> <em>c</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">FILE *&nbsp;</td>
          <td class="paramname"> <em>out</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Z3_model&nbsp;</td>
          <td class="paramname"> <em>m</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Custom function interpretations pretty printer. </p>

<p>Definition at line <a class="el" href="test__capi_8c_source.html#l00545">545</a> of file <a class="el" href="test__capi_8c_source.html">test_capi.c</a>.</p>

<p>Referenced by <a class="el" href="test__capi_8c_source.html#l00593">display_model()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00546"></a>00546 {
<a name="l00547"></a>00547     <span class="keywordtype">unsigned</span> num_functions, i;
<a name="l00548"></a>00548 
<a name="l00549"></a>00549     fprintf(out, <span class="stringliteral">&quot;function interpretations:\n&quot;</span>);
<a name="l00550"></a>00550 
<a name="l00551"></a>00551     num_functions = <a class="code" href="group__capi.html#ga93bbc1e93644b836fd81bcb99941efa0" title="Return the number of function interpretations in the given model.">Z3_get_model_num_funcs</a>(c, m);
<a name="l00552"></a>00552     <span class="keywordflow">for</span> (i = 0; i &lt; num_functions; i++) {
<a name="l00553"></a>00553         Z3_func_decl fdecl;
<a name="l00554"></a>00554         Z3_symbol name;
<a name="l00555"></a>00555         Z3_ast func_else;
<a name="l00556"></a>00556         <span class="keywordtype">unsigned</span> num_entries, j;
<a name="l00557"></a>00557         
<a name="l00558"></a>00558         fdecl = <a class="code" href="group__capi.html#ga69a6b71175fbad3b803b14a03fd1619d" title="Return the declaration of the i-th function in the given model.">Z3_get_model_func_decl</a>(c, m, i);
<a name="l00559"></a>00559         name = <a class="code" href="group__capi.html#ga741b1bf11cb92aa2ec9ef2fef73ff129" title="Return the constant declaration name as a symbol.">Z3_get_decl_name</a>(c, fdecl);
<a name="l00560"></a>00560         <a class="code" href="group__capi__ex.html#ga387b0f228ff147764beaae9e07ee9d59" title="Display a symbol in the given output stream.">display_symbol</a>(c, out, name);
<a name="l00561"></a>00561         fprintf(out, <span class="stringliteral">&quot; = {&quot;</span>);
<a name="l00562"></a>00562         num_entries = <a class="code" href="group__capi.html#ga08b6982830120de746c3459391e10f37" title="Return the number of entries of the i-th function interpretation in the given model...">Z3_get_model_func_num_entries</a>(c, m, i);
<a name="l00563"></a>00563         <span class="keywordflow">for</span> (j = 0; j &lt; num_entries; j++) {
<a name="l00564"></a>00564             <span class="keywordtype">unsigned</span> num_args, k;
<a name="l00565"></a>00565             <span class="keywordflow">if</span> (j &gt; 0) {
<a name="l00566"></a>00566                 fprintf(out, <span class="stringliteral">&quot;, &quot;</span>);
<a name="l00567"></a>00567             }
<a name="l00568"></a>00568             num_args = <a class="code" href="group__capi.html#ga72b4aa37bbd7e79ff1ea0f02e182d044" title="Return the number of arguments of the j-th entry of the i-th function interpretation...">Z3_get_model_func_entry_num_args</a>(c, m, i, j);
<a name="l00569"></a>00569             fprintf(out, <span class="stringliteral">&quot;(&quot;</span>);
<a name="l00570"></a>00570             <span class="keywordflow">for</span> (k = 0; k &lt; num_args; k++) {
<a name="l00571"></a>00571                 <span class="keywordflow">if</span> (k &gt; 0) {
<a name="l00572"></a>00572                     fprintf(out, <span class="stringliteral">&quot;, &quot;</span>);
<a name="l00573"></a>00573                 }
<a name="l00574"></a>00574                 <a class="code" href="group__capi__ex.html#ga807b5fe0e26acdec09e52a77318208d0" title="Custom ast pretty printer.">display_ast</a>(c, out, <a class="code" href="group__capi.html#ga5a6dc26868b3815fbbca68bfa50445dc" title="Return the k-th argument of the j-th entry of the i-th function interpretation in...">Z3_get_model_func_entry_arg</a>(c, m, i, j, k));
<a name="l00575"></a>00575             }
<a name="l00576"></a>00576             fprintf(out, <span class="stringliteral">&quot;|-&gt;&quot;</span>);
<a name="l00577"></a>00577             <a class="code" href="group__capi__ex.html#ga807b5fe0e26acdec09e52a77318208d0" title="Custom ast pretty printer.">display_ast</a>(c, out, <a class="code" href="group__capi.html#gaf9ccc474d05703daa12f54067f691940" title="Return the return value of the j-th entry of the i-th function interpretation in...">Z3_get_model_func_entry_value</a>(c, m, i, j));
<a name="l00578"></a>00578             fprintf(out, <span class="stringliteral">&quot;)&quot;</span>);
<a name="l00579"></a>00579         }
<a name="l00580"></a>00580         <span class="keywordflow">if</span> (num_entries &gt; 0) {
<a name="l00581"></a>00581             fprintf(out, <span class="stringliteral">&quot;, &quot;</span>);
<a name="l00582"></a>00582         }
<a name="l00583"></a>00583         fprintf(out, <span class="stringliteral">&quot;(else|-&gt;&quot;</span>);
<a name="l00584"></a>00584         func_else = <a class="code" href="group__capi.html#ga4d88b799f76b076a29d4435e6cbcc890" title="Return the &amp;#39;else&amp;#39; value of the i-th function interpretation in the given...">Z3_get_model_func_else</a>(c, m, i);
<a name="l00585"></a>00585         <a class="code" href="group__capi__ex.html#ga807b5fe0e26acdec09e52a77318208d0" title="Custom ast pretty printer.">display_ast</a>(c, out, func_else);
<a name="l00586"></a>00586         fprintf(out, <span class="stringliteral">&quot;)}\n&quot;</span>);
<a name="l00587"></a>00587     }
<a name="l00588"></a>00588 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ga4af59d866d3845962448d1354b89e3c6"></a><!-- doxytag: member="test_capi.c::display_model" ref="ga4af59d866d3845962448d1354b89e3c6" args="(Z3_context c, FILE *out, Z3_model m)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void display_model </td>
          <td>(</td>
          <td class="paramtype">Z3_context&nbsp;</td>
          <td class="paramname"> <em>c</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">FILE *&nbsp;</td>
          <td class="paramname"> <em>out</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Z3_model&nbsp;</td>
          <td class="paramname"> <em>m</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Custom model pretty printer. </p>

<p>Definition at line <a class="el" href="test__capi_8c_source.html#l00593">593</a> of file <a class="el" href="test__capi_8c_source.html">test_capi.c</a>.</p>

<p>Referenced by <a class="el" href="test__capi_8c_source.html#l00619">check2()</a>, and <a class="el" href="test__capi_8c_source.html#l02184">unsat_core_and_proof_example()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00594"></a>00594 {
<a name="l00595"></a>00595     <span class="keywordtype">unsigned</span> num_constants;
<a name="l00596"></a>00596     <span class="keywordtype">unsigned</span> i;
<a name="l00597"></a>00597 
<a name="l00598"></a>00598     num_constants = <a class="code" href="group__capi.html#ga93fd4227621601199c749822ddaaf030" title="Return the number of constants assigned by the given model.">Z3_get_model_num_constants</a>(c, m);
<a name="l00599"></a>00599     <span class="keywordflow">for</span> (i = 0; i &lt; num_constants; i++) {
<a name="l00600"></a>00600         Z3_symbol name;
<a name="l00601"></a>00601         Z3_func_decl cnst = <a class="code" href="group__capi.html#gaa2fa9cf35930b7be2d708c8862993e92" title="Return the i-th constant in the given model.">Z3_get_model_constant</a>(c, m, i);
<a name="l00602"></a>00602         Z3_ast a, v;
<a name="l00603"></a>00603         <a class="code" href="group__capi.html#ga3a65ded0ada3ee285865759a21140eeb" title="Z3 Boolean type. It is just an alias for int.">Z3_bool</a> ok;
<a name="l00604"></a>00604         name = <a class="code" href="group__capi.html#ga741b1bf11cb92aa2ec9ef2fef73ff129" title="Return the constant declaration name as a symbol.">Z3_get_decl_name</a>(c, cnst);
<a name="l00605"></a>00605         <a class="code" href="group__capi__ex.html#ga387b0f228ff147764beaae9e07ee9d59" title="Display a symbol in the given output stream.">display_symbol</a>(c, out, name);
<a name="l00606"></a>00606         fprintf(out, <span class="stringliteral">&quot; = &quot;</span>);
<a name="l00607"></a>00607         a = <a class="code" href="group__capi.html#ga33a202d86bf628bfab9b6f437536cebe" title="Create a constant or function application.">Z3_mk_app</a>(c, cnst, 0, 0);
<a name="l00608"></a>00608         v = a;
<a name="l00609"></a>00609         ok = <a class="code" href="group__capi.html#ga47d3655283564918c85bda0b423b7f67" title="Evaluate the AST node t in the given model. Return Z3_TRUE if succeeded, and store...">Z3_eval</a>(c, m, a, &amp;v);
<a name="l00610"></a>00610         <a class="code" href="group__capi__ex.html#ga807b5fe0e26acdec09e52a77318208d0" title="Custom ast pretty printer.">display_ast</a>(c, out, v);
<a name="l00611"></a>00611         fprintf(out, <span class="stringliteral">&quot;\n&quot;</span>);
<a name="l00612"></a>00612     }
<a name="l00613"></a>00613     <a class="code" href="group__capi__ex.html#ga5416a7bbf6e561fcfdda0dd85bec2682" title="Custom function interpretations pretty printer.">display_function_interpretations</a>(c, out, m);
<a name="l00614"></a>00614 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ga8a9e74a0c3915e48a40a311af80bf369"></a><!-- doxytag: member="test_capi.c::display_sort" ref="ga8a9e74a0c3915e48a40a311af80bf369" args="(Z3_context c, FILE *out, Z3_sort ty)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void display_sort </td>
          <td>(</td>
          <td class="paramtype">Z3_context&nbsp;</td>
          <td class="paramname"> <em>c</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">FILE *&nbsp;</td>
          <td class="paramname"> <em>out</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Z3_sort&nbsp;</td>
          <td class="paramname"> <em>ty</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Display the given type. </p>

<p>Definition at line <a class="el" href="test__capi_8c_source.html#l00446">446</a> of file <a class="el" href="test__capi_8c_source.html">test_capi.c</a>.</p>

<p>Referenced by <a class="el" href="test__capi_8c_source.html#l01195">array_example3()</a>, <a class="el" href="test__capi_8c_source.html#l00504">display_ast()</a>, and <a class="el" href="test__capi_8c_source.html#l01233">tuple_example1()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00447"></a>00447 {
<a name="l00448"></a>00448     <span class="keywordflow">switch</span> (<a class="code" href="group__capi.html#ga6d694951de4c7f115ed472eb32ef963c" title="Return the sort kind (e.g., array, tuple, int, bool, etc).">Z3_get_sort_kind</a>(c, ty)) {
<a name="l00449"></a>00449     <span class="keywordflow">case</span> Z3_UNINTERPRETED_SORT:
<a name="l00450"></a>00450         <a class="code" href="group__capi__ex.html#ga387b0f228ff147764beaae9e07ee9d59" title="Display a symbol in the given output stream.">display_symbol</a>(c, out, <a class="code" href="group__capi.html#gaefff01e612e5ebb1117af870ee3a9237" title="Return the sort name as a symbol.">Z3_get_sort_name</a>(c, ty));
<a name="l00451"></a>00451         <span class="keywordflow">break</span>;
<a name="l00452"></a>00452     <span class="keywordflow">case</span> Z3_BOOL_SORT:
<a name="l00453"></a>00453         fprintf(out, <span class="stringliteral">&quot;bool&quot;</span>);
<a name="l00454"></a>00454         <span class="keywordflow">break</span>;
<a name="l00455"></a>00455     <span class="keywordflow">case</span> Z3_INT_SORT:
<a name="l00456"></a>00456         fprintf(out, <span class="stringliteral">&quot;int&quot;</span>);
<a name="l00457"></a>00457         <span class="keywordflow">break</span>;
<a name="l00458"></a>00458     <span class="keywordflow">case</span> Z3_REAL_SORT:
<a name="l00459"></a>00459         fprintf(out, <span class="stringliteral">&quot;real&quot;</span>);
<a name="l00460"></a>00460         <span class="keywordflow">break</span>;
<a name="l00461"></a>00461     <span class="keywordflow">case</span> Z3_BV_SORT:
<a name="l00462"></a>00462         fprintf(out, <span class="stringliteral">&quot;bv%d&quot;</span>, <a class="code" href="group__capi.html#ga8fc3550edace7bc046e16d1f96ddb419" title="Return the size of the given bit-vector sort.">Z3_get_bv_sort_size</a>(c, ty));
<a name="l00463"></a>00463         <span class="keywordflow">break</span>;
<a name="l00464"></a>00464     <span class="keywordflow">case</span> Z3_ARRAY_SORT: 
<a name="l00465"></a>00465         fprintf(out, <span class="stringliteral">&quot;[&quot;</span>);
<a name="l00466"></a>00466         <a class="code" href="group__capi__ex.html#ga8a9e74a0c3915e48a40a311af80bf369" title="Display the given type.">display_sort</a>(c, out, <a class="code" href="group__capi.html#ga9753605ed27131dee29abcfb21e1dc9a" title="Return the domain of the given array sort.">Z3_get_array_sort_domain</a>(c, ty));
<a name="l00467"></a>00467         fprintf(out, <span class="stringliteral">&quot;-&gt;&quot;</span>);
<a name="l00468"></a>00468         <a class="code" href="group__capi__ex.html#ga8a9e74a0c3915e48a40a311af80bf369" title="Display the given type.">display_sort</a>(c, out, <a class="code" href="group__capi.html#ga72832f8215d6232ce1fef9774d1bf192" title="Return the range of the given array sort.">Z3_get_array_sort_range</a>(c, ty));
<a name="l00469"></a>00469         fprintf(out, <span class="stringliteral">&quot;]&quot;</span>);
<a name="l00470"></a>00470         <span class="keywordflow">break</span>;
<a name="l00471"></a>00471     <span class="keywordflow">case</span> Z3_DATATYPE_SORT:
<a name="l00472"></a>00472                 <span class="keywordflow">if</span> (<a class="code" href="group__capi.html#gae9ab82612fd84f5ce7991ade7d7ad920" title="Return number of constructors for datatype.">Z3_get_datatype_sort_num_constructors</a>(c, ty) != 1) 
<a name="l00473"></a>00473                 {
<a name="l00474"></a>00474                         fprintf(out, <span class="stringliteral">&quot;%s&quot;</span>, Z3_sort_to_string(c,ty));
<a name="l00475"></a>00475                         <span class="keywordflow">break</span>;
<a name="l00476"></a>00476                 }
<a name="l00477"></a>00477                 {
<a name="l00478"></a>00478         <span class="keywordtype">unsigned</span> num_fields = <a class="code" href="group__capi.html#gaff3ba6ad93295a4b4d8a8d3c06b7aa72" title="Return the number of fields of the given tuple sort.">Z3_get_tuple_sort_num_fields</a>(c, ty);
<a name="l00479"></a>00479         <span class="keywordtype">unsigned</span> i;
<a name="l00480"></a>00480         fprintf(out, <span class="stringliteral">&quot;(&quot;</span>);
<a name="l00481"></a>00481         <span class="keywordflow">for</span> (i = 0; i &lt; num_fields; i++) {
<a name="l00482"></a>00482             Z3_func_decl field = <a class="code" href="group__capi.html#gae17ed9db93c03f4f60a336c95fb60c44" title="Return the i-th field declaration (i.e., projection function declaration) of the...">Z3_get_tuple_sort_field_decl</a>(c, ty, i);
<a name="l00483"></a>00483             <span class="keywordflow">if</span> (i &gt; 0) {
<a name="l00484"></a>00484                 fprintf(out, <span class="stringliteral">&quot;, &quot;</span>);
<a name="l00485"></a>00485             }
<a name="l00486"></a>00486             <a class="code" href="group__capi__ex.html#ga8a9e74a0c3915e48a40a311af80bf369" title="Display the given type.">display_sort</a>(c, out, <a class="code" href="group__capi.html#gaf996fe33bd42bea8fa8ddf44fcf0bd77" title="Return the range of the given declaration.">Z3_get_range</a>(c, field));
<a name="l00487"></a>00487         }
<a name="l00488"></a>00488         fprintf(out, <span class="stringliteral">&quot;)&quot;</span>);
<a name="l00489"></a>00489         <span class="keywordflow">break</span>;
<a name="l00490"></a>00490     }
<a name="l00491"></a>00491     <span class="keywordflow">default</span>:
<a name="l00492"></a>00492         fprintf(out, <span class="stringliteral">&quot;unknown[&quot;</span>);
<a name="l00493"></a>00493         <a class="code" href="group__capi__ex.html#ga387b0f228ff147764beaae9e07ee9d59" title="Display a symbol in the given output stream.">display_symbol</a>(c, out, <a class="code" href="group__capi.html#gaefff01e612e5ebb1117af870ee3a9237" title="Return the sort name as a symbol.">Z3_get_sort_name</a>(c, ty));
<a name="l00494"></a>00494         fprintf(out, <span class="stringliteral">&quot;]&quot;</span>);
<a name="l00495"></a>00495         <span class="keywordflow">break</span>;
<a name="l00496"></a>00496     }
<a name="l00497"></a>00497 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ga387b0f228ff147764beaae9e07ee9d59"></a><!-- doxytag: member="test_capi.c::display_symbol" ref="ga387b0f228ff147764beaae9e07ee9d59" args="(Z3_context c, FILE *out, Z3_symbol s)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void display_symbol </td>
          <td>(</td>
          <td class="paramtype">Z3_context&nbsp;</td>
          <td class="paramname"> <em>c</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">FILE *&nbsp;</td>
          <td class="paramname"> <em>out</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Z3_symbol&nbsp;</td>
          <td class="paramname"> <em>s</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Display a symbol in the given output stream. </p>

<p>Definition at line <a class="el" href="test__capi_8c_source.html#l00429">429</a> of file <a class="el" href="test__capi_8c_source.html">test_capi.c</a>.</p>

<p>Referenced by <a class="el" href="test__capi_8c_source.html#l00545">display_function_interpretations()</a>, <a class="el" href="test__capi_8c_source.html#l00593">display_model()</a>, and <a class="el" href="test__capi_8c_source.html#l00446">display_sort()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00430"></a>00430 {
<a name="l00431"></a>00431     <span class="keywordflow">switch</span> (<a class="code" href="group__capi.html#ga67ffc0773e8d329ddbab7bd7f751ecd2" title="Return Z3_INT_SYMBOL if the symbol was constructed using Z3_mk_int_symbol, and Z3_STRING_SYMBOL...">Z3_get_symbol_kind</a>(c, s)) {
<a name="l00432"></a>00432     <span class="keywordflow">case</span> Z3_INT_SYMBOL:
<a name="l00433"></a>00433         fprintf(out, <span class="stringliteral">&quot;#%d&quot;</span>, <a class="code" href="group__capi.html#ga36fbbd2c1d0cb41c8c7784f60a84a488" title="Return the symbol int value.">Z3_get_symbol_int</a>(c, s));
<a name="l00434"></a>00434         <span class="keywordflow">break</span>;
<a name="l00435"></a>00435     <span class="keywordflow">case</span> Z3_STRING_SYMBOL:
<a name="l00436"></a>00436         fprintf(out, <span class="stringliteral">&quot;%s&quot;</span>, <a class="code" href="group__capi.html#gaf1683d9464f377e5089ce6ebf2a9bd31" title="Return the symbol name.">Z3_get_symbol_string</a>(c, s));
<a name="l00437"></a>00437         <span class="keywordflow">break</span>;
<a name="l00438"></a>00438     <span class="keywordflow">default</span>:
<a name="l00439"></a>00439         <a class="code" href="group__capi__ex.html#ga98a996adc7ad22a8dc75b936e74b73ca" title="exit if unreachable code was reached.">unreachable</a>();
<a name="l00440"></a>00440     }
<a name="l00441"></a>00441 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ga33abf350aae0212c85a5903e41764025"></a><!-- doxytag: member="test_capi.c::display_version" ref="ga33abf350aae0212c85a5903e41764025" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void display_version </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Display Z3 version in the standard output. </p>

<p>Definition at line <a class="el" href="test__capi_8c_source.html#l00648">648</a> of file <a class="el" href="test__capi_8c_source.html">test_capi.c</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00649"></a>00649 {
<a name="l00650"></a>00650     <span class="keywordtype">unsigned</span> major, minor, build, revision;
<a name="l00651"></a>00651     <a class="code" href="group__capi.html#ga45fcd18a00379b13a536c5b6117190ae" title="Return Z3 version number information.">Z3_get_version</a>(&amp;major, &amp;minor, &amp;build, &amp;revision);
<a name="l00652"></a>00652     printf(<span class="stringliteral">&quot;Z3 %d.%d.%d.%d\n&quot;</span>, major, minor, build, revision);
<a name="l00653"></a>00653 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ga850fd4407bd8d1e508cc09b4efce6085"></a><!-- doxytag: member="test_capi.c::enum_example" ref="ga850fd4407bd8d1e508cc09b4efce6085" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void enum_example </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Create an enumeration data type. </p>

<p>Definition at line <a class="el" href="test__capi_8c_source.html#l01795">1795</a> of file <a class="el" href="test__capi_8c_source.html">test_capi.c</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l01795"></a>01795                     {
<a name="l01796"></a>01796     Z3_context ctx = <a class="code" href="group__maxsat__ex.html#ga102b86f8b4829828c5c2d06c5d8b8489" title="Create a logical context. Enable model construction only.">mk_context</a>();
<a name="l01797"></a>01797     Z3_sort fruit;
<a name="l01798"></a>01798     Z3_symbol name = <a class="code" href="group__capi.html#ga6b9ed981ba0180962928394fe828b0a7" title="Create a Z3 symbol using a C string.">Z3_mk_string_symbol</a>(ctx, <span class="stringliteral">&quot;fruit&quot;</span>);
<a name="l01799"></a>01799     Z3_symbol enum_names[3];
<a name="l01800"></a>01800     Z3_func_decl enum_consts[3];
<a name="l01801"></a>01801     Z3_func_decl enum_testers[3];
<a name="l01802"></a>01802     Z3_ast apple, orange, banana, fruity;
<a name="l01803"></a>01803     Z3_ast ors[3];
<a name="l01804"></a>01804     
<a name="l01805"></a>01805     printf(<span class="stringliteral">&quot;\nenum_example\n&quot;</span>);
<a name="l01806"></a>01806     LOG_MSG(<span class="stringliteral">&quot;enum_example&quot;</span>);
<a name="l01807"></a>01807 
<a name="l01808"></a>01808     enum_names[0] = <a class="code" href="group__capi.html#ga6b9ed981ba0180962928394fe828b0a7" title="Create a Z3 symbol using a C string.">Z3_mk_string_symbol</a>(ctx,<span class="stringliteral">&quot;apple&quot;</span>);
<a name="l01809"></a>01809     enum_names[1] = <a class="code" href="group__capi.html#ga6b9ed981ba0180962928394fe828b0a7" title="Create a Z3 symbol using a C string.">Z3_mk_string_symbol</a>(ctx,<span class="stringliteral">&quot;banana&quot;</span>);
<a name="l01810"></a>01810     enum_names[2] = <a class="code" href="group__capi.html#ga6b9ed981ba0180962928394fe828b0a7" title="Create a Z3 symbol using a C string.">Z3_mk_string_symbol</a>(ctx,<span class="stringliteral">&quot;orange&quot;</span>);
<a name="l01811"></a>01811 
<a name="l01812"></a>01812     fruit = <a class="code" href="group__capi.html#ga8d4c1550f5f1bdefbe957bcd0ea4324a" title="Create a enumeration sort.">Z3_mk_enumeration_sort</a>(ctx, name, 3, enum_names, enum_consts, enum_testers);
<a name="l01813"></a>01813        
<a name="l01814"></a>01814     printf(<span class="stringliteral">&quot;%s\n&quot;</span>, Z3_func_decl_to_string(ctx, enum_consts[0]));
<a name="l01815"></a>01815     printf(<span class="stringliteral">&quot;%s\n&quot;</span>, Z3_func_decl_to_string(ctx, enum_consts[1]));
<a name="l01816"></a>01816     printf(<span class="stringliteral">&quot;%s\n&quot;</span>, Z3_func_decl_to_string(ctx, enum_consts[2]));
<a name="l01817"></a>01817 
<a name="l01818"></a>01818     printf(<span class="stringliteral">&quot;%s\n&quot;</span>, Z3_func_decl_to_string(ctx, enum_testers[0]));
<a name="l01819"></a>01819     printf(<span class="stringliteral">&quot;%s\n&quot;</span>, Z3_func_decl_to_string(ctx, enum_testers[1]));
<a name="l01820"></a>01820     printf(<span class="stringliteral">&quot;%s\n&quot;</span>, Z3_func_decl_to_string(ctx, enum_testers[2]));
<a name="l01821"></a>01821 
<a name="l01822"></a>01822     apple  = <a class="code" href="group__capi.html#ga33a202d86bf628bfab9b6f437536cebe" title="Create a constant or function application.">Z3_mk_app</a>(ctx, enum_consts[0], 0, 0);
<a name="l01823"></a>01823     banana = <a class="code" href="group__capi.html#ga33a202d86bf628bfab9b6f437536cebe" title="Create a constant or function application.">Z3_mk_app</a>(ctx, enum_consts[1], 0, 0);
<a name="l01824"></a>01824     orange = <a class="code" href="group__capi.html#ga33a202d86bf628bfab9b6f437536cebe" title="Create a constant or function application.">Z3_mk_app</a>(ctx, enum_consts[2], 0, 0);
<a name="l01825"></a>01825 
<a name="l01826"></a>01826     <span class="comment">/* Apples are different from oranges */</span>
<a name="l01827"></a>01827     <a class="code" href="group__capi__ex.html#gac1c8ca24db543be3c7c8ada6e3cad89b" title="Prove that the constraints already asserted into the logical context implies the...">prove</a>(ctx, <a class="code" href="group__capi.html#ga3329538091996eb7b3dc677760a61072" title="Create an AST node representing not(a).">Z3_mk_not</a>(ctx, <a class="code" href="group__capi.html#ga95a19ce675b70e22bb0401f7137af37c" title="Create an AST node representing l = r.">Z3_mk_eq</a>(ctx, apple, orange)), <a class="code" href="group__capi.html#gad86c8730a2e4e61bac585b240a6288d4" title="True value. It is just an alias for 1.">Z3_TRUE</a>);
<a name="l01828"></a>01828 
<a name="l01829"></a>01829     <span class="comment">/* Apples pass the apple test */</span>
<a name="l01830"></a>01830     <a class="code" href="group__capi__ex.html#gac1c8ca24db543be3c7c8ada6e3cad89b" title="Prove that the constraints already asserted into the logical context implies the...">prove</a>(ctx, <a class="code" href="group__capi.html#ga33a202d86bf628bfab9b6f437536cebe" title="Create a constant or function application.">Z3_mk_app</a>(ctx, enum_testers[0], 1, &amp;apple), <a class="code" href="group__capi.html#gad86c8730a2e4e61bac585b240a6288d4" title="True value. It is just an alias for 1.">Z3_TRUE</a>);
<a name="l01831"></a>01831 
<a name="l01832"></a>01832     <span class="comment">/* Oranges fail the apple test */</span>
<a name="l01833"></a>01833     <a class="code" href="group__capi__ex.html#gac1c8ca24db543be3c7c8ada6e3cad89b" title="Prove that the constraints already asserted into the logical context implies the...">prove</a>(ctx, <a class="code" href="group__capi.html#ga33a202d86bf628bfab9b6f437536cebe" title="Create a constant or function application.">Z3_mk_app</a>(ctx, enum_testers[0], 1, &amp;orange), <a class="code" href="group__capi.html#ga1d9cee57472b2c7623642f123b8f1781" title="False value. It is just an alias for 0.">Z3_FALSE</a>);
<a name="l01834"></a>01834     <a class="code" href="group__capi__ex.html#gac1c8ca24db543be3c7c8ada6e3cad89b" title="Prove that the constraints already asserted into the logical context implies the...">prove</a>(ctx, <a class="code" href="group__capi.html#ga3329538091996eb7b3dc677760a61072" title="Create an AST node representing not(a).">Z3_mk_not</a>(ctx, <a class="code" href="group__capi.html#ga33a202d86bf628bfab9b6f437536cebe" title="Create a constant or function application.">Z3_mk_app</a>(ctx, enum_testers[0], 1, &amp;orange)), <a class="code" href="group__capi.html#gad86c8730a2e4e61bac585b240a6288d4" title="True value. It is just an alias for 1.">Z3_TRUE</a>);
<a name="l01835"></a>01835 
<a name="l01836"></a>01836     fruity = <a class="code" href="group__maxsat__ex.html#gad55575aaf95896158c9e2f12e93769c8" title="Create a variable using the given name and type.">mk_var</a>(ctx, <span class="stringliteral">&quot;fruity&quot;</span>, fruit);
<a name="l01837"></a>01837 
<a name="l01838"></a>01838     <span class="comment">/* If something is fruity, then it is an apple, banana, or orange */</span>
<a name="l01839"></a>01839     ors[0] = <a class="code" href="group__capi.html#ga95a19ce675b70e22bb0401f7137af37c" title="Create an AST node representing l = r.">Z3_mk_eq</a>(ctx, fruity, apple);
<a name="l01840"></a>01840     ors[1] = <a class="code" href="group__capi.html#ga95a19ce675b70e22bb0401f7137af37c" title="Create an AST node representing l = r.">Z3_mk_eq</a>(ctx, fruity, banana);
<a name="l01841"></a>01841     ors[2] = <a class="code" href="group__capi.html#ga95a19ce675b70e22bb0401f7137af37c" title="Create an AST node representing l = r.">Z3_mk_eq</a>(ctx, fruity, orange);
<a name="l01842"></a>01842 
<a name="l01843"></a>01843     <a class="code" href="group__capi__ex.html#gac1c8ca24db543be3c7c8ada6e3cad89b" title="Prove that the constraints already asserted into the logical context implies the...">prove</a>(ctx, <a class="code" href="group__capi.html#ga00866d16331d505620a6c515302021f9" title="Create an AST node representing args[0] or ... or args[num_args-1].">Z3_mk_or</a>(ctx, 3, ors), <a class="code" href="group__capi.html#gad86c8730a2e4e61bac585b240a6288d4" title="True value. It is just an alias for 1.">Z3_TRUE</a>);
<a name="l01844"></a>01844 
<a name="l01845"></a>01845     <span class="comment">/* delete logical context */</span>
<a name="l01846"></a>01846     <a class="code" href="group__capi.html#ga556eae80ed43ab13e1e7dc3b38c35200" title="Delete the given logical context.">Z3_del_context</a>(ctx);
<a name="l01847"></a>01847 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ga2355864af38b0f159907209f00084cf1"></a><!-- doxytag: member="test_capi.c::error_code_example1" ref="ga2355864af38b0f159907209f00084cf1" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void error_code_example1 </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Demonstrates how error codes can be read insted of registering an error handler. </p>

<p>Definition at line <a class="el" href="test__capi_8c_source.html#l01484">1484</a> of file <a class="el" href="test__capi_8c_source.html">test_capi.c</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l01485"></a>01485 {
<a name="l01486"></a>01486     Z3_config cfg;
<a name="l01487"></a>01487     Z3_context ctx;
<a name="l01488"></a>01488     Z3_ast x;
<a name="l01489"></a>01489     Z3_model m;
<a name="l01490"></a>01490     Z3_ast v;
<a name="l01491"></a>01491     Z3_func_decl x_decl;
<a name="l01492"></a>01492     <span class="keyword">const</span> <span class="keywordtype">char</span> * str;
<a name="l01493"></a>01493 
<a name="l01494"></a>01494     printf(<span class="stringliteral">&quot;\nerror_code_example1\n&quot;</span>);
<a name="l01495"></a>01495     LOG_MSG(<span class="stringliteral">&quot;error_code_example11&quot;</span>);
<a name="l01496"></a>01496 
<a name="l01497"></a>01497     <span class="comment">/* Do not register an error handler, as we want to use Z3_get_error_code manually */</span>
<a name="l01498"></a>01498     cfg = <a class="code" href="group__capi.html#ga7d6c40d9b79fe8a8851cc8540970787f" title="Create a configuration.">Z3_mk_config</a>();
<a name="l01499"></a>01499     ctx = <a class="code" href="group__capi__ex.html#ga4e884f4048e2a5937f97bb9667d6bae6" title="Create a logical context.">mk_context_custom</a>(cfg, NULL);
<a name="l01500"></a>01500     <a class="code" href="group__capi.html#ga5e620acf5d55d0271097c9bb97219774" title="Delete the given configuration object.">Z3_del_config</a>(cfg);
<a name="l01501"></a>01501 
<a name="l01502"></a>01502     x          = <a class="code" href="group__maxsat__ex.html#ga397d6e03e2538ff0df36aad6e02030ae" title="Create a boolean variable using the given name.">mk_bool_var</a>(ctx, <span class="stringliteral">&quot;x&quot;</span>);
<a name="l01503"></a>01503     x_decl     = <a class="code" href="group__capi.html#ga4ffab51c30484a32edc65194573cfd28" title="Return the declaration of a constant or function application.">Z3_get_app_decl</a>(ctx, <a class="code" href="group__capi.html#gaf9345fd0822d7e9928dd4ab14a09765b" title="Convert an ast into an APP_AST. This is just type casting.">Z3_to_app</a>(ctx, x));
<a name="l01504"></a>01504     <a class="code" href="group__capi.html#ga1a05ff73a564ae7256a2257048a4680a" title="Assert a constraint into the logical context.">Z3_assert_cnstr</a>(ctx, x);
<a name="l01505"></a>01505     
<a name="l01506"></a>01506     <span class="keywordflow">if</span> (<a class="code" href="group__capi.html#gaff310fef80ac8a82d0a51417e073ec0a" title="Check whether the given logical context is consistent or not.">Z3_check_and_get_model</a>(ctx, &amp;m) != Z3_L_TRUE) {
<a name="l01507"></a>01507         <a class="code" href="group__capi__ex.html#gaa325ae9cdfce0e749a254dfffc6c6ace" title="exit gracefully in case of error.">exitf</a>(<span class="stringliteral">&quot;unexpected result&quot;</span>);
<a name="l01508"></a>01508     }
<a name="l01509"></a>01509 
<a name="l01510"></a>01510     <span class="keywordflow">if</span> (!<a class="code" href="group__capi.html#ga0cdba60a991c137e8cc5d1a921e3a990" title="Return the value of the given constant or function in the given model.">Z3_eval_func_decl</a>(ctx, m, x_decl, &amp;v)) {
<a name="l01511"></a>01511         <a class="code" href="group__capi__ex.html#gaa325ae9cdfce0e749a254dfffc6c6ace" title="exit gracefully in case of error.">exitf</a>(<span class="stringliteral">&quot;did not obtain value for declaration.\n&quot;</span>);
<a name="l01512"></a>01512     }
<a name="l01513"></a>01513     <span class="keywordflow">if</span> (<a class="code" href="group__capi.html#ga8ac771e68b28d2c86f40aa84889b3807" title="Return the error code for the last API call.">Z3_get_error_code</a>(ctx) == Z3_OK) {
<a name="l01514"></a>01514         printf(<span class="stringliteral">&quot;last call succeeded.\n&quot;</span>);
<a name="l01515"></a>01515     }
<a name="l01516"></a>01516     <span class="comment">/* The following call will fail since the value of x is a boolean */</span>
<a name="l01517"></a>01517     str = <a class="code" href="group__capi.html#ga94617ef18fa7157e1a3f85db625d2f4b" title="Return numeral value, as a string of a numeric constant term.">Z3_get_numeral_string</a>(ctx, v);
<a name="l01518"></a>01518     <span class="keywordflow">if</span> (<a class="code" href="group__capi.html#ga8ac771e68b28d2c86f40aa84889b3807" title="Return the error code for the last API call.">Z3_get_error_code</a>(ctx) != Z3_OK) {
<a name="l01519"></a>01519         printf(<span class="stringliteral">&quot;last call failed.\n&quot;</span>);
<a name="l01520"></a>01520     }
<a name="l01521"></a>01521     <a class="code" href="group__capi.html#ga0cc98d3ce68047f873e119bccaabdbee" title="Delete a model object.">Z3_del_model</a>(ctx, m);
<a name="l01522"></a>01522     <a class="code" href="group__capi.html#ga556eae80ed43ab13e1e7dc3b38c35200" title="Delete the given logical context.">Z3_del_context</a>(ctx);
<a name="l01523"></a>01523 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ga6fa0a732602aa294249b126f9eb2928d"></a><!-- doxytag: member="test_capi.c::error_code_example2" ref="ga6fa0a732602aa294249b126f9eb2928d" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void error_code_example2 </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Demonstrates how error handlers can be used. </p>

<p>Definition at line <a class="el" href="test__capi_8c_source.html#l01528">1528</a> of file <a class="el" href="test__capi_8c_source.html">test_capi.c</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l01528"></a>01528                            {
<a name="l01529"></a>01529     Z3_config cfg;
<a name="l01530"></a>01530     Z3_context ctx = NULL;
<a name="l01531"></a>01531     <span class="keywordtype">int</span> r;
<a name="l01532"></a>01532 
<a name="l01533"></a>01533     printf(<span class="stringliteral">&quot;\nerror_code_example2\n&quot;</span>);
<a name="l01534"></a>01534     LOG_MSG(<span class="stringliteral">&quot;error_code_example2&quot;</span>);
<a name="l01535"></a>01535     
<a name="l01536"></a>01536     <span class="comment">/* low tech try&amp;catch */</span>
<a name="l01537"></a>01537     r = setjmp(g_catch_buffer);
<a name="l01538"></a>01538     <span class="keywordflow">if</span> (r == 0) {
<a name="l01539"></a>01539         Z3_ast x, y, app;
<a name="l01540"></a>01540         
<a name="l01541"></a>01541         cfg = <a class="code" href="group__capi.html#ga7d6c40d9b79fe8a8851cc8540970787f" title="Create a configuration.">Z3_mk_config</a>();
<a name="l01542"></a>01542         ctx = <a class="code" href="group__capi__ex.html#ga4e884f4048e2a5937f97bb9667d6bae6" title="Create a logical context.">mk_context_custom</a>(cfg, <a class="code" href="group__capi__ex.html#gaa6d66d26409a97ec721d1fe6814757c9" title="Low tech exceptions.">throw_z3_error</a>);
<a name="l01543"></a>01543         <a class="code" href="group__capi.html#ga5e620acf5d55d0271097c9bb97219774" title="Delete the given configuration object.">Z3_del_config</a>(cfg);
<a name="l01544"></a>01544         
<a name="l01545"></a>01545         x   = <a class="code" href="group__capi__ex.html#gaa7563e3fd1dd6951e4c6afb7aee7f3ee" title="Create an integer variable using the given name.">mk_int_var</a>(ctx, <span class="stringliteral">&quot;x&quot;</span>);
<a name="l01546"></a>01546         y   = <a class="code" href="group__maxsat__ex.html#ga397d6e03e2538ff0df36aad6e02030ae" title="Create a boolean variable using the given name.">mk_bool_var</a>(ctx, <span class="stringliteral">&quot;y&quot;</span>);
<a name="l01547"></a>01547         printf(<span class="stringliteral">&quot;before Z3_mk_iff\n&quot;</span>); 
<a name="l01548"></a>01548         <span class="comment">/* the next call will produce an error */</span>
<a name="l01549"></a>01549         app = <a class="code" href="group__capi.html#ga930a8e844d345fbebc498ac43a696042" title="Create an AST node representing t1 iff t2.">Z3_mk_iff</a>(ctx, x, y);
<a name="l01550"></a>01550         <a class="code" href="group__capi__ex.html#ga98a996adc7ad22a8dc75b936e74b73ca" title="exit if unreachable code was reached.">unreachable</a>();
<a name="l01551"></a>01551         <a class="code" href="group__capi.html#ga556eae80ed43ab13e1e7dc3b38c35200" title="Delete the given logical context.">Z3_del_context</a>(ctx);
<a name="l01552"></a>01552     }
<a name="l01553"></a>01553     <span class="keywordflow">else</span> {
<a name="l01554"></a>01554         printf(<span class="stringliteral">&quot;Z3 error: %s.\n&quot;</span>, <a class="code" href="group__capi.html#gaf06357c49299efb8a0bdaeb3bc96c6d6" title="Return a string describing the given error code.">Z3_get_error_msg</a>((<a class="code" href="group__capi.html#gaa9f9e7b1b5b81381fab96debbaaa638f" title="Z3 error codes (See Z3_get_error_code).">Z3_error_code</a>)r));
<a name="l01555"></a>01555         <span class="keywordflow">if</span> (ctx != NULL) {
<a name="l01556"></a>01556             <a class="code" href="group__capi.html#ga556eae80ed43ab13e1e7dc3b38c35200" title="Delete the given logical context.">Z3_del_context</a>(ctx);
<a name="l01557"></a>01557         }
<a name="l01558"></a>01558     }
<a name="l01559"></a>01559 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ga82e5abe89b86f8ab9d95ac826189b4fc"></a><!-- doxytag: member="test_capi.c::error_handler" ref="ga82e5abe89b86f8ab9d95ac826189b4fc" args="(Z3_context c, Z3_error_code e)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void error_handler </td>
          <td>(</td>
          <td class="paramtype">Z3_context&nbsp;</td>
          <td class="paramname"> <em>c</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__capi.html#gaa9f9e7b1b5b81381fab96debbaaa638f">Z3_error_code</a>&nbsp;</td>
          <td class="paramname"> <em>e</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Simpler error handler. </p>

<p>Definition at line <a class="el" href="test__capi_8c_source.html#l00045">45</a> of file <a class="el" href="test__capi_8c_source.html">test_capi.c</a>.</p>

<p>Referenced by <a class="el" href="test__capi_8c_source.html#l00087">mk_context()</a>, <a class="el" href="test__capi_8c_source.html#l01634">parser_example3()</a>, and <a class="el" href="test__capi_8c_source.html#l01023">quantifier_example1()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00046"></a>00046 {
<a name="l00047"></a>00047     printf(<span class="stringliteral">&quot;Error code: %d\n&quot;</span>, e);
<a name="l00048"></a>00048     <a class="code" href="group__capi__ex.html#gaa325ae9cdfce0e749a254dfffc6c6ace" title="exit gracefully in case of error.">exitf</a>(<span class="stringliteral">&quot;incorrect use of Z3&quot;</span>);
<a name="l00049"></a>00049 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ga1380b031db05b0b63542acf627b6bd1e"></a><!-- doxytag: member="test_capi.c::eval_example1" ref="ga1380b031db05b0b63542acf627b6bd1e" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void eval_example1 </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Demonstrate how to use <a class="el" href="group__capi.html#ga47d3655283564918c85bda0b423b7f67" title="Evaluate the AST node t in the given model. Return Z3_TRUE if succeeded, and store...">Z3_eval</a>. </p>

<p>Definition at line <a class="el" href="test__capi_8c_source.html#l01407">1407</a> of file <a class="el" href="test__capi_8c_source.html">test_capi.c</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l01408"></a>01408 {
<a name="l01409"></a>01409     Z3_context ctx;
<a name="l01410"></a>01410     Z3_ast x, y, two;
<a name="l01411"></a>01411     Z3_ast c1, c2;
<a name="l01412"></a>01412     Z3_model m;
<a name="l01413"></a>01413 
<a name="l01414"></a>01414     printf(<span class="stringliteral">&quot;\neval_example1\n&quot;</span>);
<a name="l01415"></a>01415     LOG_MSG(<span class="stringliteral">&quot;eval_example1&quot;</span>);
<a name="l01416"></a>01416     
<a name="l01417"></a>01417     ctx        = <a class="code" href="group__maxsat__ex.html#ga102b86f8b4829828c5c2d06c5d8b8489" title="Create a logical context. Enable model construction only.">mk_context</a>();
<a name="l01418"></a>01418     x          = <a class="code" href="group__capi__ex.html#gaa7563e3fd1dd6951e4c6afb7aee7f3ee" title="Create an integer variable using the given name.">mk_int_var</a>(ctx, <span class="stringliteral">&quot;x&quot;</span>);
<a name="l01419"></a>01419     y          = <a class="code" href="group__capi__ex.html#gaa7563e3fd1dd6951e4c6afb7aee7f3ee" title="Create an integer variable using the given name.">mk_int_var</a>(ctx, <span class="stringliteral">&quot;y&quot;</span>);
<a name="l01420"></a>01420     two        = <a class="code" href="group__capi__ex.html#gac55b5bc7b387575d70b84ae5f92bc7fc" title="Create a Z3 integer node using a C int.">mk_int</a>(ctx, 2);
<a name="l01421"></a>01421     
<a name="l01422"></a>01422     <span class="comment">/* assert x &lt; y */</span>
<a name="l01423"></a>01423     c1         = <a class="code" href="group__capi.html#ga58a3dc67c5de52cf599c346803ba1534" title="Create less than.">Z3_mk_lt</a>(ctx, x, y);
<a name="l01424"></a>01424     <a class="code" href="group__capi.html#ga1a05ff73a564ae7256a2257048a4680a" title="Assert a constraint into the logical context.">Z3_assert_cnstr</a>(ctx, c1);
<a name="l01425"></a>01425 
<a name="l01426"></a>01426     <span class="comment">/* assert x &gt; 2 */</span>
<a name="l01427"></a>01427     c2         = <a class="code" href="group__capi.html#ga46167b86067586bb742c0557d7babfd3" title="Create greater than.">Z3_mk_gt</a>(ctx, x, two);
<a name="l01428"></a>01428     <a class="code" href="group__capi.html#ga1a05ff73a564ae7256a2257048a4680a" title="Assert a constraint into the logical context.">Z3_assert_cnstr</a>(ctx, c2);
<a name="l01429"></a>01429 
<a name="l01430"></a>01430     <span class="comment">/* find model for the constraints above */</span>
<a name="l01431"></a>01431     <span class="keywordflow">if</span> (<a class="code" href="group__capi.html#gaff310fef80ac8a82d0a51417e073ec0a" title="Check whether the given logical context is consistent or not.">Z3_check_and_get_model</a>(ctx, &amp;m) == Z3_L_TRUE) {
<a name="l01432"></a>01432         Z3_ast   x_plus_y;
<a name="l01433"></a>01433         Z3_ast   args[2] = {x, y};
<a name="l01434"></a>01434         Z3_ast v;
<a name="l01435"></a>01435         printf(<span class="stringliteral">&quot;MODEL:\n%s&quot;</span>, <a class="code" href="group__capi.html#gaf36d49862a8c0d20dd5e6508eef5f8af" title="Convert the given model into a string.">Z3_model_to_string</a>(ctx, m));
<a name="l01436"></a>01436         x_plus_y = <a class="code" href="group__capi.html#ga4e4ac0a4e53eee0b4b0ef159ed7d0cd5" title="Create an AST node representing args[0] + ... + args[num_args-1].">Z3_mk_add</a>(ctx, 2, args);
<a name="l01437"></a>01437         printf(<span class="stringliteral">&quot;\nevaluating x+y\n&quot;</span>);
<a name="l01438"></a>01438         <span class="keywordflow">if</span> (<a class="code" href="group__capi.html#ga47d3655283564918c85bda0b423b7f67" title="Evaluate the AST node t in the given model. Return Z3_TRUE if succeeded, and store...">Z3_eval</a>(ctx, m, x_plus_y, &amp;v)) {
<a name="l01439"></a>01439             printf(<span class="stringliteral">&quot;result = &quot;</span>);
<a name="l01440"></a>01440             <a class="code" href="group__capi__ex.html#ga807b5fe0e26acdec09e52a77318208d0" title="Custom ast pretty printer.">display_ast</a>(ctx, stdout, v);
<a name="l01441"></a>01441             printf(<span class="stringliteral">&quot;\n&quot;</span>);
<a name="l01442"></a>01442         }
<a name="l01443"></a>01443         <span class="keywordflow">else</span> {
<a name="l01444"></a>01444             <a class="code" href="group__capi__ex.html#gaa325ae9cdfce0e749a254dfffc6c6ace" title="exit gracefully in case of error.">exitf</a>(<span class="stringliteral">&quot;failed to evaluate: x+y&quot;</span>);
<a name="l01445"></a>01445         }
<a name="l01446"></a>01446         <a class="code" href="group__capi.html#ga0cc98d3ce68047f873e119bccaabdbee" title="Delete a model object.">Z3_del_model</a>(ctx, m);
<a name="l01447"></a>01447     }
<a name="l01448"></a>01448     <span class="keywordflow">else</span> {
<a name="l01449"></a>01449         <a class="code" href="group__capi__ex.html#gaa325ae9cdfce0e749a254dfffc6c6ace" title="exit gracefully in case of error.">exitf</a>(<span class="stringliteral">&quot;the constraints are satisfiable&quot;</span>);
<a name="l01450"></a>01450     }
<a name="l01451"></a>01451 
<a name="l01452"></a>01452     <a class="code" href="group__capi.html#ga556eae80ed43ab13e1e7dc3b38c35200" title="Delete the given logical context.">Z3_del_context</a>(ctx);
<a name="l01453"></a>01453 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="gaa325ae9cdfce0e749a254dfffc6c6ace"></a><!-- doxytag: member="test_capi.c::exitf" ref="gaa325ae9cdfce0e749a254dfffc6c6ace" args="(const char *message)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void exitf </td>
          <td>(</td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>message</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>exit gracefully in case of error. </p>

<p>Definition at line <a class="el" href="test__capi_8c_source.html#l00028">28</a> of file <a class="el" href="test__capi_8c_source.html">test_capi.c</a>.</p>

<p>Referenced by <a class="el" href="test__capi_8c_source.html#l01195">array_example3()</a>, <a class="el" href="test__capi_8c_source.html#l00349">assert_comm_axiom()</a>, <a class="el" href="test__capi_8c_source.html#l00278">assert_inj_axiom()</a>, <a class="el" href="test__capi_8c_source.html#l02343">assert_retractable_cnstr()</a>, <a class="el" href="test__capi_8c_source.html#l00181">check()</a>, <a class="el" href="test__capi_8c_source.html#l00619">check2()</a>, <a class="el" href="test__capi_8c_source.html#l01484">error_code_example1()</a>, <a class="el" href="test__capi_8c_source.html#l00045">error_handler()</a>, <a class="el" href="test__capi_8c_source.html#l01407">eval_example1()</a>, <a class="el" href="test__capi_8c_source.html#l02387">ext_check()</a>, <a class="el" href="test__capi_8c_source.html#l02435">incremental_example1()</a>, <a class="el" href="test__capi_8c_source.html#l00388">mk_tuple_update()</a>, <a class="el" href="test__capi_8c_source.html#l00215">prove()</a>, <a class="el" href="test__capi_8c_source.html#l01023">quantifier_example1()</a>, <a class="el" href="test__capi_8c_source.html#l02377">reassert_cnstr()</a>, <a class="el" href="test__capi_8c_source.html#l02367">retract_cnstr()</a>, and <a class="el" href="test__capi_8c_source.html#l00037">unreachable()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00029"></a>00029 {
<a name="l00030"></a>00030   fprintf(stderr,<span class="stringliteral">&quot;BUG: %s.\n&quot;</span>, message);
<a name="l00031"></a>00031   exit(1);
<a name="l00032"></a>00032 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ga89f13d1bda45bc9a6583ba84f40cc429"></a><!-- doxytag: member="test_capi.c::ext_check" ref="ga89f13d1bda45bc9a6583ba84f40cc429" args="(Z3_ext_context ctx)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__capi.html#ga6c2de6ea89b244e37c3ffb17a9ea2a89">Z3_lbool</a> ext_check </td>
          <td>(</td>
          <td class="paramtype">Z3_ext_context&nbsp;</td>
          <td class="paramname"> <em>ctx</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Check whether the logical context wrapper with support for retractable assertions is feasible or not. </p>

<p>Definition at line <a class="el" href="test__capi_8c_source.html#l02387">2387</a> of file <a class="el" href="test__capi_8c_source.html">test_capi.c</a>.</p>

<p>Referenced by <a class="el" href="test__capi_8c_source.html#l02435">incremental_example1()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l02387"></a>02387                                        {
<a name="l02388"></a>02388     <a class="code" href="group__capi.html#ga6c2de6ea89b244e37c3ffb17a9ea2a89" title="Lifted Boolean type: false, undefined, true.">Z3_lbool</a> result;
<a name="l02389"></a>02389     <span class="keywordtype">unsigned</span> num_assumptions = 0;
<a name="l02390"></a>02390     Z3_ast assumptions[MAX_RETRACTABLE_ASSERTIONS];
<a name="l02391"></a>02391     Z3_ast core[MAX_RETRACTABLE_ASSERTIONS];
<a name="l02392"></a>02392     <span class="keywordtype">unsigned</span> core_size;
<a name="l02393"></a>02393     Z3_ast   dummy_proof = 0; <span class="comment">// we don&#39;t care about the proof in this example.</span>
<a name="l02394"></a>02394     Z3_model dummy_model = 0; <span class="comment">// we don&#39;t care about the model in this example.</span>
<a name="l02395"></a>02395     <span class="keywordtype">unsigned</span> i;
<a name="l02396"></a>02396     <span class="keywordflow">for</span> (i = 0; i &lt; ctx-&gt;m_num_answer_literals; i++) {
<a name="l02397"></a>02397         <span class="keywordflow">if</span> (ctx-&gt;m_retracted[i] == <a class="code" href="group__capi.html#ga1d9cee57472b2c7623642f123b8f1781" title="False value. It is just an alias for 0.">Z3_FALSE</a>) {
<a name="l02398"></a>02398             <span class="comment">// Since the answer literal was not retracted, we added it as an assumption.</span>
<a name="l02399"></a>02399             <span class="comment">// Recall that we assert (C \/ (not ans_lit)). Therefore, adding ans_lit as an assumption has the effect of &quot;asserting&quot; C.</span>
<a name="l02400"></a>02400             <span class="comment">// If the constraint was &quot;retracted&quot; (ctx-&gt;m_retracted[i] == Z3_true), then we don&#39;t really need to add (not ans_lit) as an assumption.</span>
<a name="l02401"></a>02401             assumptions[num_assumptions] = ctx-&gt;m_answer_literals[i];
<a name="l02402"></a>02402             num_assumptions ++;
<a name="l02403"></a>02403         }
<a name="l02404"></a>02404     }
<a name="l02405"></a>02405     result = <a class="code" href="group__capi.html#ga289e6cfc3207ee0beb4f9dc8dd4e378b" title="Check whether the given logical context and optional assumptions is consistent or...">Z3_check_assumptions</a>(ctx-&gt;m_context, num_assumptions, assumptions, &amp;dummy_model, &amp;dummy_proof, &amp;core_size, core);
<a name="l02406"></a>02406     <span class="keywordflow">if</span> (result == Z3_L_FALSE) {
<a name="l02407"></a>02407         <span class="comment">// Display the UNSAT core</span>
<a name="l02408"></a>02408         printf(<span class="stringliteral">&quot;unsat core: &quot;</span>);
<a name="l02409"></a>02409         <span class="keywordflow">for</span> (i = 0; i &lt; core_size; i++) {
<a name="l02410"></a>02410             <span class="comment">// In this example, we display the core based on the assertion ids.</span>
<a name="l02411"></a>02411             <span class="keywordtype">unsigned</span> j;
<a name="l02412"></a>02412             <span class="keywordflow">for</span> (j = 0; j &lt; ctx-&gt;m_num_answer_literals; j++) {
<a name="l02413"></a>02413                 <span class="keywordflow">if</span> (core[i] == ctx-&gt;m_answer_literals[j]) {
<a name="l02414"></a>02414                     printf(<span class="stringliteral">&quot;%d &quot;</span>, j);
<a name="l02415"></a>02415                     <span class="keywordflow">break</span>;
<a name="l02416"></a>02416                 }
<a name="l02417"></a>02417             }
<a name="l02418"></a>02418             <span class="keywordflow">if</span> (j == ctx-&gt;m_num_answer_literals) {
<a name="l02419"></a>02419                 <a class="code" href="group__capi__ex.html#gaa325ae9cdfce0e749a254dfffc6c6ace" title="exit gracefully in case of error.">exitf</a>(<span class="stringliteral">&quot;bug in Z3, the core contains something that is not an assumption.&quot;</span>);
<a name="l02420"></a>02420             }
<a name="l02421"></a>02421         }
<a name="l02422"></a>02422         printf(<span class="stringliteral">&quot;\n&quot;</span>);
<a name="l02423"></a>02423     }
<a name="l02424"></a>02424 
<a name="l02425"></a>02425     <span class="keywordflow">if</span> (dummy_model) {
<a name="l02426"></a>02426         <a class="code" href="group__capi.html#ga0cc98d3ce68047f873e119bccaabdbee" title="Delete a model object.">Z3_del_model</a>(ctx-&gt;m_context, dummy_model);
<a name="l02427"></a>02427     }
<a name="l02428"></a>02428 
<a name="l02429"></a>02429     <span class="keywordflow">return</span> result;
<a name="l02430"></a>02430 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="gae1fc416964019d6927fd6917ae32d914"></a><!-- doxytag: member="test_capi.c::find_model_example1" ref="gae1fc416964019d6927fd6917ae32d914" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void find_model_example1 </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Find a model for <code>x xor y</code>. </p>

<p>Definition at line <a class="el" href="test__capi_8c_source.html#l00738">738</a> of file <a class="el" href="test__capi_8c_source.html">test_capi.c</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00739"></a>00739 {
<a name="l00740"></a>00740     Z3_context ctx;
<a name="l00741"></a>00741     Z3_ast x, y, x_xor_y;
<a name="l00742"></a>00742 
<a name="l00743"></a>00743     printf(<span class="stringliteral">&quot;\nfind_model_example1\n&quot;</span>);
<a name="l00744"></a>00744     LOG_MSG(<span class="stringliteral">&quot;find_model_example1&quot;</span>);
<a name="l00745"></a>00745 
<a name="l00746"></a>00746     ctx     = <a class="code" href="group__maxsat__ex.html#ga102b86f8b4829828c5c2d06c5d8b8489" title="Create a logical context. Enable model construction only.">mk_context</a>();
<a name="l00747"></a>00747 
<a name="l00748"></a>00748     x       = <a class="code" href="group__maxsat__ex.html#ga397d6e03e2538ff0df36aad6e02030ae" title="Create a boolean variable using the given name.">mk_bool_var</a>(ctx, <span class="stringliteral">&quot;x&quot;</span>);
<a name="l00749"></a>00749     y       = <a class="code" href="group__maxsat__ex.html#ga397d6e03e2538ff0df36aad6e02030ae" title="Create a boolean variable using the given name.">mk_bool_var</a>(ctx, <span class="stringliteral">&quot;y&quot;</span>);
<a name="l00750"></a>00750     x_xor_y = <a class="code" href="group__capi.html#gacc6d1b848032dec0c4617b594d4229ec" title="Create an AST node representing t1 xor t2.">Z3_mk_xor</a>(ctx, x, y);
<a name="l00751"></a>00751     
<a name="l00752"></a>00752     <a class="code" href="group__capi.html#ga1a05ff73a564ae7256a2257048a4680a" title="Assert a constraint into the logical context.">Z3_assert_cnstr</a>(ctx, x_xor_y);
<a name="l00753"></a>00753 
<a name="l00754"></a>00754     printf(<span class="stringliteral">&quot;model for: x xor y\n&quot;</span>);
<a name="l00755"></a>00755     <a class="code" href="group__capi__ex.html#ga4ac4375063bd700cce15158ba6e761be" title="Check whether the logical context is satisfiable, and compare the result with the...">check</a>(ctx, Z3_L_TRUE);
<a name="l00756"></a>00756 
<a name="l00757"></a>00757     <a class="code" href="group__capi.html#ga556eae80ed43ab13e1e7dc3b38c35200" title="Delete the given logical context.">Z3_del_context</a>(ctx);
<a name="l00758"></a>00758 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ga5194ee6f65cb7e4280e7577816d67e4a"></a><!-- doxytag: member="test_capi.c::find_model_example2" ref="ga5194ee6f65cb7e4280e7577816d67e4a" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void find_model_example2 </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Find a model for <code>x &lt; y + 1, x &gt; 2</code>. Then, assert <code>not(x = y)</code>, and find another model. </p>

<p>Definition at line <a class="el" href="test__capi_8c_source.html#l00764">764</a> of file <a class="el" href="test__capi_8c_source.html">test_capi.c</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00765"></a>00765 {
<a name="l00766"></a>00766     Z3_context ctx;
<a name="l00767"></a>00767     Z3_ast x, y, one, two, y_plus_one;
<a name="l00768"></a>00768     Z3_ast x_eq_y;
<a name="l00769"></a>00769     Z3_ast args[2];
<a name="l00770"></a>00770     Z3_ast c1, c2, c3;
<a name="l00771"></a>00771 
<a name="l00772"></a>00772     printf(<span class="stringliteral">&quot;\nfind_model_example2\n&quot;</span>);
<a name="l00773"></a>00773     LOG_MSG(<span class="stringliteral">&quot;find_model_example2&quot;</span>);
<a name="l00774"></a>00774     
<a name="l00775"></a>00775     ctx        = <a class="code" href="group__maxsat__ex.html#ga102b86f8b4829828c5c2d06c5d8b8489" title="Create a logical context. Enable model construction only.">mk_context</a>();
<a name="l00776"></a>00776     x          = <a class="code" href="group__capi__ex.html#gaa7563e3fd1dd6951e4c6afb7aee7f3ee" title="Create an integer variable using the given name.">mk_int_var</a>(ctx, <span class="stringliteral">&quot;x&quot;</span>);
<a name="l00777"></a>00777     y          = <a class="code" href="group__capi__ex.html#gaa7563e3fd1dd6951e4c6afb7aee7f3ee" title="Create an integer variable using the given name.">mk_int_var</a>(ctx, <span class="stringliteral">&quot;y&quot;</span>);
<a name="l00778"></a>00778     one        = <a class="code" href="group__capi__ex.html#gac55b5bc7b387575d70b84ae5f92bc7fc" title="Create a Z3 integer node using a C int.">mk_int</a>(ctx, 1);
<a name="l00779"></a>00779     two        = <a class="code" href="group__capi__ex.html#gac55b5bc7b387575d70b84ae5f92bc7fc" title="Create a Z3 integer node using a C int.">mk_int</a>(ctx, 2);
<a name="l00780"></a>00780 
<a name="l00781"></a>00781     args[0]    = y;
<a name="l00782"></a>00782     args[1]    = one;
<a name="l00783"></a>00783     y_plus_one = <a class="code" href="group__capi.html#ga4e4ac0a4e53eee0b4b0ef159ed7d0cd5" title="Create an AST node representing args[0] + ... + args[num_args-1].">Z3_mk_add</a>(ctx, 2, args);
<a name="l00784"></a>00784 
<a name="l00785"></a>00785     c1         = <a class="code" href="group__capi.html#ga58a3dc67c5de52cf599c346803ba1534" title="Create less than.">Z3_mk_lt</a>(ctx, x, y_plus_one);
<a name="l00786"></a>00786     c2         = <a class="code" href="group__capi.html#ga46167b86067586bb742c0557d7babfd3" title="Create greater than.">Z3_mk_gt</a>(ctx, x, two);
<a name="l00787"></a>00787     
<a name="l00788"></a>00788     <a class="code" href="group__capi.html#ga1a05ff73a564ae7256a2257048a4680a" title="Assert a constraint into the logical context.">Z3_assert_cnstr</a>(ctx, c1);
<a name="l00789"></a>00789     <a class="code" href="group__capi.html#ga1a05ff73a564ae7256a2257048a4680a" title="Assert a constraint into the logical context.">Z3_assert_cnstr</a>(ctx, c2);
<a name="l00790"></a>00790 
<a name="l00791"></a>00791     printf(<span class="stringliteral">&quot;model for: x &lt; y + 1, x &gt; 2\n&quot;</span>);
<a name="l00792"></a>00792     <a class="code" href="group__capi__ex.html#ga4ac4375063bd700cce15158ba6e761be" title="Check whether the logical context is satisfiable, and compare the result with the...">check</a>(ctx, Z3_L_TRUE);
<a name="l00793"></a>00793 
<a name="l00794"></a>00794     <span class="comment">/* assert not(x = y) */</span>
<a name="l00795"></a>00795     x_eq_y     = <a class="code" href="group__capi.html#ga95a19ce675b70e22bb0401f7137af37c" title="Create an AST node representing l = r.">Z3_mk_eq</a>(ctx, x, y);
<a name="l00796"></a>00796     c3         = <a class="code" href="group__capi.html#ga3329538091996eb7b3dc677760a61072" title="Create an AST node representing not(a).">Z3_mk_not</a>(ctx, x_eq_y);
<a name="l00797"></a>00797     <a class="code" href="group__capi.html#ga1a05ff73a564ae7256a2257048a4680a" title="Assert a constraint into the logical context.">Z3_assert_cnstr</a>(ctx, c3);
<a name="l00798"></a>00798 
<a name="l00799"></a>00799     printf(<span class="stringliteral">&quot;model for: x &lt; y + 1, x &gt; 2, not(x = y)\n&quot;</span>);
<a name="l00800"></a>00800     <a class="code" href="group__capi__ex.html#ga4ac4375063bd700cce15158ba6e761be" title="Check whether the logical context is satisfiable, and compare the result with the...">check</a>(ctx, Z3_L_TRUE);
<a name="l00801"></a>00801 
<a name="l00802"></a>00802     <a class="code" href="group__capi.html#ga556eae80ed43ab13e1e7dc3b38c35200" title="Delete the given logical context.">Z3_del_context</a>(ctx);
<a name="l00803"></a>00803 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ga93d1bdb67347976ccffbc086de426f48"></a><!-- doxytag: member="test_capi.c::forest_example" ref="ga93d1bdb67347976ccffbc086de426f48" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void forest_example </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Create a forest of trees. </p>
<p>forest ::= nil | cons(tree, forest) tree ::= nil | cons(forest, forest) </p>

<p>Definition at line <a class="el" href="test__capi_8c_source.html#l01994">1994</a> of file <a class="el" href="test__capi_8c_source.html">test_capi.c</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l01994"></a>01994                       {
<a name="l01995"></a>01995     Z3_context ctx = <a class="code" href="group__maxsat__ex.html#ga102b86f8b4829828c5c2d06c5d8b8489" title="Create a logical context. Enable model construction only.">mk_context</a>();
<a name="l01996"></a>01996     Z3_sort tree, forest;
<a name="l01997"></a>01997     Z3_func_decl nil1_decl, is_nil1_decl, cons1_decl, is_cons1_decl, car1_decl, cdr1_decl;
<a name="l01998"></a>01998     Z3_func_decl nil2_decl, is_nil2_decl, cons2_decl, is_cons2_decl, car2_decl, cdr2_decl;
<a name="l01999"></a>01999     Z3_ast nil1, nil2, t1, t2, t3, t4, f1, f2, f3, l1, l2, x, y, u, v;
<a name="l02000"></a>02000     Z3_symbol head_tail[2] = { <a class="code" href="group__capi.html#ga6b9ed981ba0180962928394fe828b0a7" title="Create a Z3 symbol using a C string.">Z3_mk_string_symbol</a>(ctx, <span class="stringliteral">&quot;car&quot;</span>), <a class="code" href="group__capi.html#ga6b9ed981ba0180962928394fe828b0a7" title="Create a Z3 symbol using a C string.">Z3_mk_string_symbol</a>(ctx, <span class="stringliteral">&quot;cdr&quot;</span>) };
<a name="l02001"></a>02001     Z3_sort sorts[2] = { 0, 0 };
<a name="l02002"></a>02002     <span class="keywordtype">unsigned</span> sort_refs[2] = { 0, 0 };
<a name="l02003"></a>02003     Z3_constructor nil1_con, cons1_con, nil2_con, cons2_con;
<a name="l02004"></a>02004     Z3_constructor constructors1[2], constructors2[2];
<a name="l02005"></a>02005     Z3_func_decl cons_accessors[2];
<a name="l02006"></a>02006     Z3_ast ors[2];
<a name="l02007"></a>02007     Z3_constructor_list clist1, clist2;
<a name="l02008"></a>02008     Z3_constructor_list clists[2];
<a name="l02009"></a>02009     Z3_symbol sort_names[2] = { <a class="code" href="group__capi.html#ga6b9ed981ba0180962928394fe828b0a7" title="Create a Z3 symbol using a C string.">Z3_mk_string_symbol</a>(ctx, <span class="stringliteral">&quot;forest&quot;</span>), <a class="code" href="group__capi.html#ga6b9ed981ba0180962928394fe828b0a7" title="Create a Z3 symbol using a C string.">Z3_mk_string_symbol</a>(ctx, <span class="stringliteral">&quot;tree&quot;</span>) };
<a name="l02010"></a>02010 
<a name="l02011"></a>02011     printf(<span class="stringliteral">&quot;\nforest_example\n&quot;</span>);
<a name="l02012"></a>02012     LOG_MSG(<span class="stringliteral">&quot;forest_example&quot;</span>);
<a name="l02013"></a>02013 
<a name="l02014"></a>02014     <span class="comment">/* build a forest */</span>
<a name="l02015"></a>02015     nil1_con  = <a class="code" href="group__capi.html#gaa779e39f7050b9d51857887954b5f9b0" title="Create a constructor.">Z3_mk_constructor</a>(ctx, <a class="code" href="group__capi.html#ga6b9ed981ba0180962928394fe828b0a7" title="Create a Z3 symbol using a C string.">Z3_mk_string_symbol</a>(ctx, <span class="stringliteral">&quot;nil1&quot;</span>), <a class="code" href="group__capi.html#ga6b9ed981ba0180962928394fe828b0a7" title="Create a Z3 symbol using a C string.">Z3_mk_string_symbol</a>(ctx, <span class="stringliteral">&quot;is_nil1&quot;</span>), 0, 0, 0, 0);
<a name="l02016"></a>02016     sort_refs[0] = 1; <span class="comment">/* the car of a forest is a tree */</span>
<a name="l02017"></a>02017     sort_refs[1] = 0;
<a name="l02018"></a>02018     cons1_con = <a class="code" href="group__capi.html#gaa779e39f7050b9d51857887954b5f9b0" title="Create a constructor.">Z3_mk_constructor</a>(ctx, <a class="code" href="group__capi.html#ga6b9ed981ba0180962928394fe828b0a7" title="Create a Z3 symbol using a C string.">Z3_mk_string_symbol</a>(ctx, <span class="stringliteral">&quot;cons1&quot;</span>), <a class="code" href="group__capi.html#ga6b9ed981ba0180962928394fe828b0a7" title="Create a Z3 symbol using a C string.">Z3_mk_string_symbol</a>(ctx, <span class="stringliteral">&quot;is_cons1&quot;</span>), 2, head_tail, sorts, sort_refs);
<a name="l02019"></a>02019     constructors1[0] = nil1_con;
<a name="l02020"></a>02020     constructors1[1] = cons1_con;
<a name="l02021"></a>02021 
<a name="l02022"></a>02022     <span class="comment">/* build a tree */</span>
<a name="l02023"></a>02023     nil2_con  = <a class="code" href="group__capi.html#gaa779e39f7050b9d51857887954b5f9b0" title="Create a constructor.">Z3_mk_constructor</a>(ctx, <a class="code" href="group__capi.html#ga6b9ed981ba0180962928394fe828b0a7" title="Create a Z3 symbol using a C string.">Z3_mk_string_symbol</a>(ctx, <span class="stringliteral">&quot;nil2&quot;</span>), <a class="code" href="group__capi.html#ga6b9ed981ba0180962928394fe828b0a7" title="Create a Z3 symbol using a C string.">Z3_mk_string_symbol</a>(ctx, <span class="stringliteral">&quot;is_nil2&quot;</span>),0, 0, 0, 0);
<a name="l02024"></a>02024     sort_refs[0] = 0; <span class="comment">/* both branches of a tree are forests */</span>
<a name="l02025"></a>02025     sort_refs[1] = 0;
<a name="l02026"></a>02026     cons2_con = <a class="code" href="group__capi.html#gaa779e39f7050b9d51857887954b5f9b0" title="Create a constructor.">Z3_mk_constructor</a>(ctx, <a class="code" href="group__capi.html#ga6b9ed981ba0180962928394fe828b0a7" title="Create a Z3 symbol using a C string.">Z3_mk_string_symbol</a>(ctx, <span class="stringliteral">&quot;cons2&quot;</span>), <a class="code" href="group__capi.html#ga6b9ed981ba0180962928394fe828b0a7" title="Create a Z3 symbol using a C string.">Z3_mk_string_symbol</a>(ctx, <span class="stringliteral">&quot;is_cons2&quot;</span>),2, head_tail, sorts, sort_refs);
<a name="l02027"></a>02027     constructors2[0] = nil2_con;
<a name="l02028"></a>02028     constructors2[1] = cons2_con;
<a name="l02029"></a>02029     
<a name="l02030"></a>02030     clist1 = <a class="code" href="group__capi.html#gab784bcdbacfc08c2313de5f86edbb0c1" title="Create list of constructors.">Z3_mk_constructor_list</a>(ctx, 2, constructors1);
<a name="l02031"></a>02031     clist2 = <a class="code" href="group__capi.html#gab784bcdbacfc08c2313de5f86edbb0c1" title="Create list of constructors.">Z3_mk_constructor_list</a>(ctx, 2, constructors2);
<a name="l02032"></a>02032 
<a name="l02033"></a>02033     clists[0] = clist1;
<a name="l02034"></a>02034     clists[1] = clist2;
<a name="l02035"></a>02035 
<a name="l02036"></a>02036     <a class="code" href="group__capi.html#ga78cfbf17d313baac0943273d5ff2edf4" title="Create mutually recursive datatypes.">Z3_mk_datatypes</a>(ctx, 2, sort_names, sorts, clists);
<a name="l02037"></a>02037     forest = sorts[0];
<a name="l02038"></a>02038     tree = sorts[1];
<a name="l02039"></a>02039 
<a name="l02040"></a>02040     <a class="code" href="group__capi.html#ga72e643039b46b1e0b82c543479e3bb7f" title="Query constructor for declared functions.">Z3_query_constructor</a>(ctx, nil1_con, 0, &amp;nil1_decl, &amp;is_nil1_decl, 0);
<a name="l02041"></a>02041     <a class="code" href="group__capi.html#ga72e643039b46b1e0b82c543479e3bb7f" title="Query constructor for declared functions.">Z3_query_constructor</a>(ctx, cons1_con, 2, &amp;cons1_decl, &amp;is_cons1_decl, cons_accessors);
<a name="l02042"></a>02042     car1_decl = cons_accessors[0];
<a name="l02043"></a>02043     cdr1_decl = cons_accessors[1];
<a name="l02044"></a>02044 
<a name="l02045"></a>02045     <a class="code" href="group__capi.html#ga72e643039b46b1e0b82c543479e3bb7f" title="Query constructor for declared functions.">Z3_query_constructor</a>(ctx, nil2_con, 0, &amp;nil2_decl, &amp;is_nil2_decl, 0);
<a name="l02046"></a>02046     <a class="code" href="group__capi.html#ga72e643039b46b1e0b82c543479e3bb7f" title="Query constructor for declared functions.">Z3_query_constructor</a>(ctx, cons2_con, 2, &amp;cons2_decl, &amp;is_cons2_decl, cons_accessors);
<a name="l02047"></a>02047     car2_decl = cons_accessors[0];
<a name="l02048"></a>02048     cdr2_decl = cons_accessors[1];
<a name="l02049"></a>02049     
<a name="l02050"></a>02050     <a class="code" href="group__capi.html#gad7f91f3d9618323c8145f34acadbff96" title="Reclaim memory allocated for constructor list.">Z3_del_constructor_list</a>(ctx, clist1);
<a name="l02051"></a>02051     <a class="code" href="group__capi.html#gad7f91f3d9618323c8145f34acadbff96" title="Reclaim memory allocated for constructor list.">Z3_del_constructor_list</a>(ctx, clist2);
<a name="l02052"></a>02052     <a class="code" href="group__capi.html#ga63816efdbce93734c72f395b6a6a9e35" title="Reclaim memory allocated to constructor.">Z3_del_constructor</a>(ctx,nil1_con);
<a name="l02053"></a>02053     <a class="code" href="group__capi.html#ga63816efdbce93734c72f395b6a6a9e35" title="Reclaim memory allocated to constructor.">Z3_del_constructor</a>(ctx,cons1_con);
<a name="l02054"></a>02054     <a class="code" href="group__capi.html#ga63816efdbce93734c72f395b6a6a9e35" title="Reclaim memory allocated to constructor.">Z3_del_constructor</a>(ctx,nil2_con);
<a name="l02055"></a>02055     <a class="code" href="group__capi.html#ga63816efdbce93734c72f395b6a6a9e35" title="Reclaim memory allocated to constructor.">Z3_del_constructor</a>(ctx,cons2_con);
<a name="l02056"></a>02056 
<a name="l02057"></a>02057     nil1 = <a class="code" href="group__capi.html#ga33a202d86bf628bfab9b6f437536cebe" title="Create a constant or function application.">Z3_mk_app</a>(ctx, nil1_decl, 0, 0);
<a name="l02058"></a>02058     nil2 = <a class="code" href="group__capi.html#ga33a202d86bf628bfab9b6f437536cebe" title="Create a constant or function application.">Z3_mk_app</a>(ctx, nil2_decl, 0, 0);
<a name="l02059"></a>02059     f1 = <a class="code" href="group__capi__ex.html#gaa498f025e510b9564ad6afe4c63a743c" title="Create the binary function application: (f x y).">mk_binary_app</a>(ctx, cons1_decl, nil2, nil1);
<a name="l02060"></a>02060     t1 = <a class="code" href="group__capi__ex.html#gaa498f025e510b9564ad6afe4c63a743c" title="Create the binary function application: (f x y).">mk_binary_app</a>(ctx, cons2_decl, nil1, nil1);
<a name="l02061"></a>02061     t2 = <a class="code" href="group__capi__ex.html#gaa498f025e510b9564ad6afe4c63a743c" title="Create the binary function application: (f x y).">mk_binary_app</a>(ctx, cons2_decl, f1, nil1);
<a name="l02062"></a>02062     t3 = <a class="code" href="group__capi__ex.html#gaa498f025e510b9564ad6afe4c63a743c" title="Create the binary function application: (f x y).">mk_binary_app</a>(ctx, cons2_decl, f1, f1);
<a name="l02063"></a>02063     t4 = <a class="code" href="group__capi__ex.html#gaa498f025e510b9564ad6afe4c63a743c" title="Create the binary function application: (f x y).">mk_binary_app</a>(ctx, cons2_decl, nil1, f1);
<a name="l02064"></a>02064     f2 = <a class="code" href="group__capi__ex.html#gaa498f025e510b9564ad6afe4c63a743c" title="Create the binary function application: (f x y).">mk_binary_app</a>(ctx, cons1_decl, t1, nil1);
<a name="l02065"></a>02065     f3 = <a class="code" href="group__capi__ex.html#gaa498f025e510b9564ad6afe4c63a743c" title="Create the binary function application: (f x y).">mk_binary_app</a>(ctx, cons1_decl, t1, f1);
<a name="l02066"></a>02066 
<a name="l02067"></a>02067 
<a name="l02068"></a>02068     <span class="comment">/* nil != cons(nil,nil) */</span>
<a name="l02069"></a>02069     <a class="code" href="group__capi__ex.html#gac1c8ca24db543be3c7c8ada6e3cad89b" title="Prove that the constraints already asserted into the logical context implies the...">prove</a>(ctx, <a class="code" href="group__capi.html#ga3329538091996eb7b3dc677760a61072" title="Create an AST node representing not(a).">Z3_mk_not</a>(ctx, <a class="code" href="group__capi.html#ga95a19ce675b70e22bb0401f7137af37c" title="Create an AST node representing l = r.">Z3_mk_eq</a>(ctx, nil1, f1)), <a class="code" href="group__capi.html#gad86c8730a2e4e61bac585b240a6288d4" title="True value. It is just an alias for 1.">Z3_TRUE</a>);
<a name="l02070"></a>02070     <a class="code" href="group__capi__ex.html#gac1c8ca24db543be3c7c8ada6e3cad89b" title="Prove that the constraints already asserted into the logical context implies the...">prove</a>(ctx, <a class="code" href="group__capi.html#ga3329538091996eb7b3dc677760a61072" title="Create an AST node representing not(a).">Z3_mk_not</a>(ctx, <a class="code" href="group__capi.html#ga95a19ce675b70e22bb0401f7137af37c" title="Create an AST node representing l = r.">Z3_mk_eq</a>(ctx, nil2, t1)), <a class="code" href="group__capi.html#gad86c8730a2e4e61bac585b240a6288d4" title="True value. It is just an alias for 1.">Z3_TRUE</a>);
<a name="l02071"></a>02071 
<a name="l02072"></a>02072 
<a name="l02073"></a>02073     <span class="comment">/* cons(x,u) = cons(x, v) =&gt; u = v */</span>
<a name="l02074"></a>02074     u = <a class="code" href="group__maxsat__ex.html#gad55575aaf95896158c9e2f12e93769c8" title="Create a variable using the given name and type.">mk_var</a>(ctx, <span class="stringliteral">&quot;u&quot;</span>, forest);
<a name="l02075"></a>02075     v = <a class="code" href="group__maxsat__ex.html#gad55575aaf95896158c9e2f12e93769c8" title="Create a variable using the given name and type.">mk_var</a>(ctx, <span class="stringliteral">&quot;v&quot;</span>, forest);    
<a name="l02076"></a>02076     x = <a class="code" href="group__maxsat__ex.html#gad55575aaf95896158c9e2f12e93769c8" title="Create a variable using the given name and type.">mk_var</a>(ctx, <span class="stringliteral">&quot;x&quot;</span>, tree);
<a name="l02077"></a>02077     y = <a class="code" href="group__maxsat__ex.html#gad55575aaf95896158c9e2f12e93769c8" title="Create a variable using the given name and type.">mk_var</a>(ctx, <span class="stringliteral">&quot;y&quot;</span>, tree);
<a name="l02078"></a>02078     l1 = <a class="code" href="group__capi__ex.html#gaa498f025e510b9564ad6afe4c63a743c" title="Create the binary function application: (f x y).">mk_binary_app</a>(ctx, cons1_decl, x, u);
<a name="l02079"></a>02079     l2 = <a class="code" href="group__capi__ex.html#gaa498f025e510b9564ad6afe4c63a743c" title="Create the binary function application: (f x y).">mk_binary_app</a>(ctx, cons1_decl, y, v);
<a name="l02080"></a>02080     <a class="code" href="group__capi__ex.html#gac1c8ca24db543be3c7c8ada6e3cad89b" title="Prove that the constraints already asserted into the logical context implies the...">prove</a>(ctx, <a class="code" href="group__capi.html#gac829c0e25bbbd30343bf073f7b524517" title="Create an AST node representing t1 implies t2.">Z3_mk_implies</a>(ctx, <a class="code" href="group__capi.html#ga95a19ce675b70e22bb0401f7137af37c" title="Create an AST node representing l = r.">Z3_mk_eq</a>(ctx,l1,l2), <a class="code" href="group__capi.html#ga95a19ce675b70e22bb0401f7137af37c" title="Create an AST node representing l = r.">Z3_mk_eq</a>(ctx, u, v)), <a class="code" href="group__capi.html#gad86c8730a2e4e61bac585b240a6288d4" title="True value. It is just an alias for 1.">Z3_TRUE</a>);
<a name="l02081"></a>02081     <a class="code" href="group__capi__ex.html#gac1c8ca24db543be3c7c8ada6e3cad89b" title="Prove that the constraints already asserted into the logical context implies the...">prove</a>(ctx, <a class="code" href="group__capi.html#gac829c0e25bbbd30343bf073f7b524517" title="Create an AST node representing t1 implies t2.">Z3_mk_implies</a>(ctx, <a class="code" href="group__capi.html#ga95a19ce675b70e22bb0401f7137af37c" title="Create an AST node representing l = r.">Z3_mk_eq</a>(ctx,l1,l2), <a class="code" href="group__capi.html#ga95a19ce675b70e22bb0401f7137af37c" title="Create an AST node representing l = r.">Z3_mk_eq</a>(ctx, x, y)), <a class="code" href="group__capi.html#gad86c8730a2e4e61bac585b240a6288d4" title="True value. It is just an alias for 1.">Z3_TRUE</a>);
<a name="l02082"></a>02082 
<a name="l02083"></a>02083     <span class="comment">/* is_nil(u) or is_cons(u) */</span>
<a name="l02084"></a>02084     ors[0] = <a class="code" href="group__capi.html#ga33a202d86bf628bfab9b6f437536cebe" title="Create a constant or function application.">Z3_mk_app</a>(ctx, is_nil1_decl, 1, &amp;u);
<a name="l02085"></a>02085     ors[1] = <a class="code" href="group__capi.html#ga33a202d86bf628bfab9b6f437536cebe" title="Create a constant or function application.">Z3_mk_app</a>(ctx, is_cons1_decl, 1, &amp;u);
<a name="l02086"></a>02086     <a class="code" href="group__capi__ex.html#gac1c8ca24db543be3c7c8ada6e3cad89b" title="Prove that the constraints already asserted into the logical context implies the...">prove</a>(ctx, <a class="code" href="group__capi.html#ga00866d16331d505620a6c515302021f9" title="Create an AST node representing args[0] or ... or args[num_args-1].">Z3_mk_or</a>(ctx, 2, ors), <a class="code" href="group__capi.html#gad86c8730a2e4e61bac585b240a6288d4" title="True value. It is just an alias for 1.">Z3_TRUE</a>);
<a name="l02087"></a>02087 
<a name="l02088"></a>02088     <span class="comment">/* occurs check u != cons(x,u) */</span>    
<a name="l02089"></a>02089     <a class="code" href="group__capi__ex.html#gac1c8ca24db543be3c7c8ada6e3cad89b" title="Prove that the constraints already asserted into the logical context implies the...">prove</a>(ctx, <a class="code" href="group__capi.html#ga3329538091996eb7b3dc677760a61072" title="Create an AST node representing not(a).">Z3_mk_not</a>(ctx, <a class="code" href="group__capi.html#ga95a19ce675b70e22bb0401f7137af37c" title="Create an AST node representing l = r.">Z3_mk_eq</a>(ctx, u, l1)), <a class="code" href="group__capi.html#gad86c8730a2e4e61bac585b240a6288d4" title="True value. It is just an alias for 1.">Z3_TRUE</a>);
<a name="l02090"></a>02090 
<a name="l02091"></a>02091     <span class="comment">/* delete logical context */</span>
<a name="l02092"></a>02092     <a class="code" href="group__capi.html#ga556eae80ed43ab13e1e7dc3b38c35200" title="Delete the given logical context.">Z3_del_context</a>(ctx);
<a name="l02093"></a>02093 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="gaff7e823bf261f63060b7ebdce44f07f5"></a><!-- doxytag: member="test_capi.c::get_implied_equalities_example" ref="gaff7e823bf261f63060b7ebdce44f07f5" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void get_implied_equalities_example </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Extract classes of implied equalities. </p>
<p>This example illustrates the use of <a class="el" href="group__capi.html#ga5aab1bb6c4a879a5c40bd94e5e5ac1c6" title="Retrieve congruence class representatives for terms.">Z3_get_implied_equalities</a>. </p>

<p>Definition at line <a class="el" href="test__capi_8c_source.html#l02257">2257</a> of file <a class="el" href="test__capi_8c_source.html">test_capi.c</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l02257"></a>02257                                       {
<a name="l02258"></a>02258     Z3_config cfg = <a class="code" href="group__capi.html#ga7d6c40d9b79fe8a8851cc8540970787f" title="Create a configuration.">Z3_mk_config</a>();
<a name="l02259"></a>02259     Z3_context ctx; 
<a name="l02260"></a>02260 
<a name="l02261"></a>02261     printf(<span class="stringliteral">&quot;\nget_implied_equalities example\n&quot;</span>);
<a name="l02262"></a>02262     LOG_MSG(<span class="stringliteral">&quot;get_implied_equalities example&quot;</span>);
<a name="l02263"></a>02263     
<a name="l02264"></a>02264     <a class="code" href="group__capi.html#gab6f8f5d3d059be1ae2982902202b3a25" title="Set a configuration parameter.">Z3_set_param_value</a>(cfg, <span class="stringliteral">&quot;ARITH_PROCESS_ALL_EQS&quot;</span>, <span class="stringliteral">&quot;true&quot;</span>);
<a name="l02265"></a>02265     <a class="code" href="group__capi.html#gab6f8f5d3d059be1ae2982902202b3a25" title="Set a configuration parameter.">Z3_set_param_value</a>(cfg, <span class="stringliteral">&quot;ARITH_EQ_BOUNDS&quot;</span>, <span class="stringliteral">&quot;true&quot;</span>);
<a name="l02266"></a>02266     ctx = <a class="code" href="group__capi.html#ga0bd93cfab4d749dd3e2f2a4416820a46" title="Create a context using the given configuration.">Z3_mk_context</a>(cfg);
<a name="l02267"></a>02267     <a class="code" href="group__capi.html#ga5e620acf5d55d0271097c9bb97219774" title="Delete the given configuration object.">Z3_del_config</a>(cfg);
<a name="l02268"></a>02268     {
<a name="l02269"></a>02269         Z3_sort int_ty = <a class="code" href="group__capi.html#ga6cd426ab5748653b77d389fd3eac1015" title="Create the integer type.">Z3_mk_int_sort</a>(ctx);
<a name="l02270"></a>02270         Z3_ast a = <a class="code" href="group__capi__ex.html#gaa7563e3fd1dd6951e4c6afb7aee7f3ee" title="Create an integer variable using the given name.">mk_int_var</a>(ctx,<span class="stringliteral">&quot;a&quot;</span>);
<a name="l02271"></a>02271         Z3_ast b = <a class="code" href="group__capi__ex.html#gaa7563e3fd1dd6951e4c6afb7aee7f3ee" title="Create an integer variable using the given name.">mk_int_var</a>(ctx,<span class="stringliteral">&quot;b&quot;</span>);
<a name="l02272"></a>02272         Z3_ast c = <a class="code" href="group__capi__ex.html#gaa7563e3fd1dd6951e4c6afb7aee7f3ee" title="Create an integer variable using the given name.">mk_int_var</a>(ctx,<span class="stringliteral">&quot;c&quot;</span>);
<a name="l02273"></a>02273         Z3_ast d = <a class="code" href="group__capi__ex.html#gaa7563e3fd1dd6951e4c6afb7aee7f3ee" title="Create an integer variable using the given name.">mk_int_var</a>(ctx,<span class="stringliteral">&quot;d&quot;</span>);
<a name="l02274"></a>02274         Z3_func_decl f = <a class="code" href="group__capi.html#gaa5c5e2602a44d5f1373f077434859ca2" title="Declare a constant or function.">Z3_mk_func_decl</a>(ctx, <a class="code" href="group__capi.html#ga6b9ed981ba0180962928394fe828b0a7" title="Create a Z3 symbol using a C string.">Z3_mk_string_symbol</a>(ctx,<span class="stringliteral">&quot;f&quot;</span>), 1, &amp;int_ty, int_ty);
<a name="l02275"></a>02275         Z3_ast fa = <a class="code" href="group__capi.html#ga33a202d86bf628bfab9b6f437536cebe" title="Create a constant or function application.">Z3_mk_app</a>(ctx, f, 1, &amp;a);
<a name="l02276"></a>02276         Z3_ast fb = <a class="code" href="group__capi.html#ga33a202d86bf628bfab9b6f437536cebe" title="Create a constant or function application.">Z3_mk_app</a>(ctx, f, 1, &amp;b);
<a name="l02277"></a>02277         Z3_ast fc = <a class="code" href="group__capi.html#ga33a202d86bf628bfab9b6f437536cebe" title="Create a constant or function application.">Z3_mk_app</a>(ctx, f, 1, &amp;c);
<a name="l02278"></a>02278         <span class="keywordtype">unsigned</span> <span class="keyword">const</span> num_terms = 7;
<a name="l02279"></a>02279         <span class="keywordtype">unsigned</span> i;
<a name="l02280"></a>02280         Z3_ast terms[7] = { a, b, c, d, fa, fb, fc };
<a name="l02281"></a>02281         <span class="keywordtype">unsigned</span> class_ids[7] = { 0, 0, 0, 0, 0, 0, 0 };
<a name="l02282"></a>02282         
<a name="l02283"></a>02283         <a class="code" href="group__capi.html#ga1a05ff73a564ae7256a2257048a4680a" title="Assert a constraint into the logical context.">Z3_assert_cnstr</a>(ctx, <a class="code" href="group__capi.html#ga95a19ce675b70e22bb0401f7137af37c" title="Create an AST node representing l = r.">Z3_mk_eq</a>(ctx, a, b));
<a name="l02284"></a>02284         <a class="code" href="group__capi.html#ga1a05ff73a564ae7256a2257048a4680a" title="Assert a constraint into the logical context.">Z3_assert_cnstr</a>(ctx, <a class="code" href="group__capi.html#ga95a19ce675b70e22bb0401f7137af37c" title="Create an AST node representing l = r.">Z3_mk_eq</a>(ctx, b, c));
<a name="l02285"></a>02285         <a class="code" href="group__capi.html#ga1a05ff73a564ae7256a2257048a4680a" title="Assert a constraint into the logical context.">Z3_assert_cnstr</a>(ctx, <a class="code" href="group__capi.html#gaa9a33d11096841f4e8c407f1578bc0bf" title="Create less than or equal to.">Z3_mk_le</a>(ctx, fc, b));
<a name="l02286"></a>02286         <a class="code" href="group__capi.html#ga1a05ff73a564ae7256a2257048a4680a" title="Assert a constraint into the logical context.">Z3_assert_cnstr</a>(ctx, <a class="code" href="group__capi.html#gaa9a33d11096841f4e8c407f1578bc0bf" title="Create less than or equal to.">Z3_mk_le</a>(ctx, b, fa));
<a name="l02287"></a>02287         
<a name="l02288"></a>02288         <a class="code" href="group__capi.html#ga5aab1bb6c4a879a5c40bd94e5e5ac1c6" title="Retrieve congruence class representatives for terms.">Z3_get_implied_equalities</a>(ctx, num_terms, terms, class_ids);
<a name="l02289"></a>02289         <span class="keywordflow">for</span> (i = 0; i &lt; num_terms; ++i) {
<a name="l02290"></a>02290             printf(<span class="stringliteral">&quot;Class %s |-&gt; %d\n&quot;</span>, <a class="code" href="group__capi.html#gab1aa4b78298fe00b3167bf7bfd88aea3" title="Convert the given AST node into a string.">Z3_ast_to_string</a>(ctx, terms[i]), class_ids[i]);
<a name="l02291"></a>02291         }
<a name="l02292"></a>02292         printf(<span class="stringliteral">&quot;asserting f(a) &lt;= b\n&quot;</span>);
<a name="l02293"></a>02293         <a class="code" href="group__capi.html#ga1a05ff73a564ae7256a2257048a4680a" title="Assert a constraint into the logical context.">Z3_assert_cnstr</a>(ctx, <a class="code" href="group__capi.html#gaa9a33d11096841f4e8c407f1578bc0bf" title="Create less than or equal to.">Z3_mk_le</a>(ctx, fa, b));
<a name="l02294"></a>02294         <a class="code" href="group__capi.html#ga5aab1bb6c4a879a5c40bd94e5e5ac1c6" title="Retrieve congruence class representatives for terms.">Z3_get_implied_equalities</a>(ctx, num_terms, terms, class_ids);
<a name="l02295"></a>02295         <span class="keywordflow">for</span> (i = 0; i &lt; num_terms; ++i) {
<a name="l02296"></a>02296             printf(<span class="stringliteral">&quot;Class %s |-&gt; %d\n&quot;</span>, <a class="code" href="group__capi.html#gab1aa4b78298fe00b3167bf7bfd88aea3" title="Convert the given AST node into a string.">Z3_ast_to_string</a>(ctx, terms[i]), class_ids[i]);
<a name="l02297"></a>02297         }
<a name="l02298"></a>02298     }
<a name="l02299"></a>02299     <span class="comment">/* delete logical context */</span>
<a name="l02300"></a>02300     <a class="code" href="group__capi.html#ga556eae80ed43ab13e1e7dc3b38c35200" title="Delete the given logical context.">Z3_del_context</a>(ctx);
<a name="l02301"></a>02301 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ga8ece4d1f54bf0c1dce28c5261dc84b24"></a><!-- doxytag: member="test_capi.c::incremental_example1" ref="ga8ece4d1f54bf0c1dce28c5261dc84b24" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void incremental_example1 </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Simple example using the functions: <a class="el" href="group__capi__ex.html#gaee2e7823d9a007a245500395b48fffec" title="Create a logical context wrapper with support for retractable constraints.">mk_ext_context</a>, <a class="el" href="group__capi__ex.html#ga2ded843bd7ba3cf143ee23fd6552ad63" title="Create a retractable constraint.">assert_retractable_cnstr</a>, <a class="el" href="group__capi__ex.html#ga6246dc8b8cf263b38cd698f49a0470b9" title="Retract an constraint asserted using assert_retractable_cnstr.">retract_cnstr</a>, <a class="el" href="group__capi__ex.html#ga25760b66b7ad43e3a902797b5924df73" title="Reassert a constraint retracted using retract_cnstr.">reassert_cnstr</a> and <a class="el" href="group__capi__ex.html#ga6c6fad58070181de432e40aa86c34270" title="Delete the given logical context wrapper.">del_ext_context</a>. </p>

<p>Definition at line <a class="el" href="test__capi_8c_source.html#l02435">2435</a> of file <a class="el" href="test__capi_8c_source.html">test_capi.c</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l02435"></a>02435                             {
<a name="l02436"></a>02436     Z3_ext_context ext_ctx = <a class="code" href="group__capi__ex.html#gaee2e7823d9a007a245500395b48fffec" title="Create a logical context wrapper with support for retractable constraints.">mk_ext_context</a>();
<a name="l02437"></a>02437     Z3_context     ctx     = ext_ctx-&gt;m_context;
<a name="l02438"></a>02438     Z3_ast x, y, z, two, one;
<a name="l02439"></a>02439     <span class="keywordtype">unsigned</span> c1, c2, c3, c4;
<a name="l02440"></a>02440     <a class="code" href="group__capi.html#ga3a65ded0ada3ee285865759a21140eeb" title="Z3 Boolean type. It is just an alias for int.">Z3_bool</a> result;
<a name="l02441"></a>02441 
<a name="l02442"></a>02442     printf(<span class="stringliteral">&quot;\nincremental_example1\n&quot;</span>);
<a name="l02443"></a>02443     LOG_MSG(<span class="stringliteral">&quot;incremental_example1&quot;</span>);
<a name="l02444"></a>02444 
<a name="l02445"></a>02445     x          = <a class="code" href="group__capi__ex.html#gaa7563e3fd1dd6951e4c6afb7aee7f3ee" title="Create an integer variable using the given name.">mk_int_var</a>(ctx, <span class="stringliteral">&quot;x&quot;</span>);
<a name="l02446"></a>02446     y          = <a class="code" href="group__capi__ex.html#gaa7563e3fd1dd6951e4c6afb7aee7f3ee" title="Create an integer variable using the given name.">mk_int_var</a>(ctx, <span class="stringliteral">&quot;y&quot;</span>);
<a name="l02447"></a>02447     z          = <a class="code" href="group__capi__ex.html#gaa7563e3fd1dd6951e4c6afb7aee7f3ee" title="Create an integer variable using the given name.">mk_int_var</a>(ctx, <span class="stringliteral">&quot;z&quot;</span>);
<a name="l02448"></a>02448     two        = <a class="code" href="group__capi__ex.html#gac55b5bc7b387575d70b84ae5f92bc7fc" title="Create a Z3 integer node using a C int.">mk_int</a>(ctx, 2);
<a name="l02449"></a>02449     one        = <a class="code" href="group__capi__ex.html#gac55b5bc7b387575d70b84ae5f92bc7fc" title="Create a Z3 integer node using a C int.">mk_int</a>(ctx, 1);
<a name="l02450"></a>02450     
<a name="l02451"></a>02451     <span class="comment">/* assert x &lt; y */</span>
<a name="l02452"></a>02452     c1 = <a class="code" href="group__capi__ex.html#ga2ded843bd7ba3cf143ee23fd6552ad63" title="Create a retractable constraint.">assert_retractable_cnstr</a>(ext_ctx, <a class="code" href="group__capi.html#ga58a3dc67c5de52cf599c346803ba1534" title="Create less than.">Z3_mk_lt</a>(ctx, x, y));
<a name="l02453"></a>02453     <span class="comment">/* assert x = z */</span>
<a name="l02454"></a>02454     c2 = <a class="code" href="group__capi__ex.html#ga2ded843bd7ba3cf143ee23fd6552ad63" title="Create a retractable constraint.">assert_retractable_cnstr</a>(ext_ctx, <a class="code" href="group__capi.html#ga95a19ce675b70e22bb0401f7137af37c" title="Create an AST node representing l = r.">Z3_mk_eq</a>(ctx, x, z));
<a name="l02455"></a>02455     <span class="comment">/* assert x &gt; 2 */</span>
<a name="l02456"></a>02456     c3 = <a class="code" href="group__capi__ex.html#ga2ded843bd7ba3cf143ee23fd6552ad63" title="Create a retractable constraint.">assert_retractable_cnstr</a>(ext_ctx, <a class="code" href="group__capi.html#ga46167b86067586bb742c0557d7babfd3" title="Create greater than.">Z3_mk_gt</a>(ctx, x, two));
<a name="l02457"></a>02457     <span class="comment">/* assert y &lt; 1 */</span>
<a name="l02458"></a>02458     c4 = <a class="code" href="group__capi__ex.html#ga2ded843bd7ba3cf143ee23fd6552ad63" title="Create a retractable constraint.">assert_retractable_cnstr</a>(ext_ctx, <a class="code" href="group__capi.html#ga58a3dc67c5de52cf599c346803ba1534" title="Create less than.">Z3_mk_lt</a>(ctx, y, one));
<a name="l02459"></a>02459     
<a name="l02460"></a>02460     result = <a class="code" href="group__capi__ex.html#ga89f13d1bda45bc9a6583ba84f40cc429" title="Check whether the logical context wrapper with support for retractable assertions...">ext_check</a>(ext_ctx); 
<a name="l02461"></a>02461     <span class="keywordflow">if</span> (result != Z3_L_FALSE)
<a name="l02462"></a>02462         <a class="code" href="group__capi__ex.html#gaa325ae9cdfce0e749a254dfffc6c6ace" title="exit gracefully in case of error.">exitf</a>(<span class="stringliteral">&quot;bug in Z3&quot;</span>);
<a name="l02463"></a>02463     printf(<span class="stringliteral">&quot;unsat\n&quot;</span>);
<a name="l02464"></a>02464 
<a name="l02465"></a>02465     <a class="code" href="group__capi__ex.html#ga6246dc8b8cf263b38cd698f49a0470b9" title="Retract an constraint asserted using assert_retractable_cnstr.">retract_cnstr</a>(ext_ctx, c4);
<a name="l02466"></a>02466     result = <a class="code" href="group__capi__ex.html#ga89f13d1bda45bc9a6583ba84f40cc429" title="Check whether the logical context wrapper with support for retractable assertions...">ext_check</a>(ext_ctx);
<a name="l02467"></a>02467     <span class="keywordflow">if</span> (result != Z3_L_TRUE)
<a name="l02468"></a>02468         <a class="code" href="group__capi__ex.html#gaa325ae9cdfce0e749a254dfffc6c6ace" title="exit gracefully in case of error.">exitf</a>(<span class="stringliteral">&quot;bug in Z3&quot;</span>);
<a name="l02469"></a>02469     printf(<span class="stringliteral">&quot;sat\n&quot;</span>);
<a name="l02470"></a>02470 
<a name="l02471"></a>02471     <a class="code" href="group__capi__ex.html#ga25760b66b7ad43e3a902797b5924df73" title="Reassert a constraint retracted using retract_cnstr.">reassert_cnstr</a>(ext_ctx, c4);
<a name="l02472"></a>02472     result = <a class="code" href="group__capi__ex.html#ga89f13d1bda45bc9a6583ba84f40cc429" title="Check whether the logical context wrapper with support for retractable assertions...">ext_check</a>(ext_ctx);
<a name="l02473"></a>02473     <span class="keywordflow">if</span> (result != Z3_L_FALSE)
<a name="l02474"></a>02474         <a class="code" href="group__capi__ex.html#gaa325ae9cdfce0e749a254dfffc6c6ace" title="exit gracefully in case of error.">exitf</a>(<span class="stringliteral">&quot;bug in Z3&quot;</span>);
<a name="l02475"></a>02475     printf(<span class="stringliteral">&quot;unsat\n&quot;</span>);
<a name="l02476"></a>02476 
<a name="l02477"></a>02477     <a class="code" href="group__capi__ex.html#ga6246dc8b8cf263b38cd698f49a0470b9" title="Retract an constraint asserted using assert_retractable_cnstr.">retract_cnstr</a>(ext_ctx, c2);
<a name="l02478"></a>02478     result = <a class="code" href="group__capi__ex.html#ga89f13d1bda45bc9a6583ba84f40cc429" title="Check whether the logical context wrapper with support for retractable assertions...">ext_check</a>(ext_ctx);
<a name="l02479"></a>02479     <span class="keywordflow">if</span> (result != Z3_L_FALSE)
<a name="l02480"></a>02480         <a class="code" href="group__capi__ex.html#gaa325ae9cdfce0e749a254dfffc6c6ace" title="exit gracefully in case of error.">exitf</a>(<span class="stringliteral">&quot;bug in Z3&quot;</span>);
<a name="l02481"></a>02481     printf(<span class="stringliteral">&quot;unsat\n&quot;</span>);
<a name="l02482"></a>02482 
<a name="l02483"></a>02483     <a class="code" href="group__capi__ex.html#ga6246dc8b8cf263b38cd698f49a0470b9" title="Retract an constraint asserted using assert_retractable_cnstr.">retract_cnstr</a>(ext_ctx, c3);
<a name="l02484"></a>02484     result = <a class="code" href="group__capi__ex.html#ga89f13d1bda45bc9a6583ba84f40cc429" title="Check whether the logical context wrapper with support for retractable assertions...">ext_check</a>(ext_ctx);
<a name="l02485"></a>02485     <span class="keywordflow">if</span> (result != Z3_L_TRUE)
<a name="l02486"></a>02486         <a class="code" href="group__capi__ex.html#gaa325ae9cdfce0e749a254dfffc6c6ace" title="exit gracefully in case of error.">exitf</a>(<span class="stringliteral">&quot;bug in Z3&quot;</span>);
<a name="l02487"></a>02487     printf(<span class="stringliteral">&quot;sat\n&quot;</span>);
<a name="l02488"></a>02488 
<a name="l02489"></a>02489     <a class="code" href="group__capi__ex.html#ga6c6fad58070181de432e40aa86c34270" title="Delete the given logical context wrapper.">del_ext_context</a>(ext_ctx);
<a name="l02490"></a>02490 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="gafa3f89e53c339dda8c0a9b4b126139f7"></a><!-- doxytag: member="test_capi.c::ite_example" ref="gafa3f89e53c339dda8c0a9b4b126139f7" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ite_example </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Test ite-term (if-then-else terms). </p>

<p>Definition at line <a class="el" href="test__capi_8c_source.html#l01771">1771</a> of file <a class="el" href="test__capi_8c_source.html">test_capi.c</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l01772"></a>01772 {
<a name="l01773"></a>01773     Z3_context ctx;
<a name="l01774"></a>01774     Z3_ast f, one, zero, ite;
<a name="l01775"></a>01775     
<a name="l01776"></a>01776     printf(<span class="stringliteral">&quot;\nite_example\n&quot;</span>);
<a name="l01777"></a>01777     LOG_MSG(<span class="stringliteral">&quot;ite_example&quot;</span>);
<a name="l01778"></a>01778 
<a name="l01779"></a>01779     ctx = <a class="code" href="group__maxsat__ex.html#ga102b86f8b4829828c5c2d06c5d8b8489" title="Create a logical context. Enable model construction only.">mk_context</a>();
<a name="l01780"></a>01780     
<a name="l01781"></a>01781     f    = <a class="code" href="group__capi.html#ga5952ac17671117a02001fed6575c778d" title="Create an AST node representing false.">Z3_mk_false</a>(ctx);
<a name="l01782"></a>01782     one  = <a class="code" href="group__capi__ex.html#gac55b5bc7b387575d70b84ae5f92bc7fc" title="Create a Z3 integer node using a C int.">mk_int</a>(ctx, 1);
<a name="l01783"></a>01783     zero = <a class="code" href="group__capi__ex.html#gac55b5bc7b387575d70b84ae5f92bc7fc" title="Create a Z3 integer node using a C int.">mk_int</a>(ctx, 0);
<a name="l01784"></a>01784     ite  = <a class="code" href="group__capi.html#ga94417eed5c36e1ad48bcfc8ad6e83547" title="Create an AST node representing an if-then-else: ite(t1, t2, t3).">Z3_mk_ite</a>(ctx, f, one, zero);
<a name="l01785"></a>01785     
<a name="l01786"></a>01786     printf(<span class="stringliteral">&quot;term: %s\n&quot;</span>, <a class="code" href="group__capi.html#gab1aa4b78298fe00b3167bf7bfd88aea3" title="Convert the given AST node into a string.">Z3_ast_to_string</a>(ctx, ite));
<a name="l01787"></a>01787 
<a name="l01788"></a>01788     <span class="comment">/* delete logical context */</span>
<a name="l01789"></a>01789     <a class="code" href="group__capi.html#ga556eae80ed43ab13e1e7dc3b38c35200" title="Delete the given logical context.">Z3_del_context</a>(ctx);
<a name="l01790"></a>01790 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="gab3287b9c46ad438c87aa1f42b0e0dea8"></a><!-- doxytag: member="test_capi.c::list_example" ref="gab3287b9c46ad438c87aa1f42b0e0dea8" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void list_example </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Create a list datatype. </p>

<p>Definition at line <a class="el" href="test__capi_8c_source.html#l01852">1852</a> of file <a class="el" href="test__capi_8c_source.html">test_capi.c</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l01852"></a>01852                     {
<a name="l01853"></a>01853     Z3_context ctx = <a class="code" href="group__maxsat__ex.html#ga102b86f8b4829828c5c2d06c5d8b8489" title="Create a logical context. Enable model construction only.">mk_context</a>();
<a name="l01854"></a>01854     Z3_sort int_ty, int_list;
<a name="l01855"></a>01855     Z3_func_decl nil_decl, is_nil_decl, cons_decl, is_cons_decl, head_decl, tail_decl;
<a name="l01856"></a>01856     Z3_ast nil, l1, l2, x, y, u, v, fml, fml1;
<a name="l01857"></a>01857     Z3_ast ors[2];
<a name="l01858"></a>01858     
<a name="l01859"></a>01859 
<a name="l01860"></a>01860     printf(<span class="stringliteral">&quot;\nlist_example\n&quot;</span>);
<a name="l01861"></a>01861     LOG_MSG(<span class="stringliteral">&quot;list_example&quot;</span>);
<a name="l01862"></a>01862 
<a name="l01863"></a>01863     int_ty = <a class="code" href="group__capi.html#ga6cd426ab5748653b77d389fd3eac1015" title="Create the integer type.">Z3_mk_int_sort</a>(ctx);
<a name="l01864"></a>01864 
<a name="l01865"></a>01865     int_list = <a class="code" href="group__capi.html#ga7026ae7f8f1e8f50a8103acdc723d3c0" title="Create a list sort.">Z3_mk_list_sort</a>(ctx, <a class="code" href="group__capi.html#ga6b9ed981ba0180962928394fe828b0a7" title="Create a Z3 symbol using a C string.">Z3_mk_string_symbol</a>(ctx, <span class="stringliteral">&quot;int_list&quot;</span>), int_ty,
<a name="l01866"></a>01866                                &amp;nil_decl, &amp;is_nil_decl, &amp;cons_decl, &amp;is_cons_decl, &amp;head_decl, &amp;tail_decl);
<a name="l01867"></a>01867                     
<a name="l01868"></a>01868     nil = <a class="code" href="group__capi.html#ga33a202d86bf628bfab9b6f437536cebe" title="Create a constant or function application.">Z3_mk_app</a>(ctx, nil_decl, 0, 0);
<a name="l01869"></a>01869     l1 = <a class="code" href="group__capi__ex.html#gaa498f025e510b9564ad6afe4c63a743c" title="Create the binary function application: (f x y).">mk_binary_app</a>(ctx, cons_decl, <a class="code" href="group__capi__ex.html#gac55b5bc7b387575d70b84ae5f92bc7fc" title="Create a Z3 integer node using a C int.">mk_int</a>(ctx, 1), nil);
<a name="l01870"></a>01870     l2 = <a class="code" href="group__capi__ex.html#gaa498f025e510b9564ad6afe4c63a743c" title="Create the binary function application: (f x y).">mk_binary_app</a>(ctx, cons_decl, <a class="code" href="group__capi__ex.html#gac55b5bc7b387575d70b84ae5f92bc7fc" title="Create a Z3 integer node using a C int.">mk_int</a>(ctx, 2), nil);
<a name="l01871"></a>01871 
<a name="l01872"></a>01872     <span class="comment">/* nil != cons(1, nil) */</span>
<a name="l01873"></a>01873     <a class="code" href="group__capi__ex.html#gac1c8ca24db543be3c7c8ada6e3cad89b" title="Prove that the constraints already asserted into the logical context implies the...">prove</a>(ctx, <a class="code" href="group__capi.html#ga3329538091996eb7b3dc677760a61072" title="Create an AST node representing not(a).">Z3_mk_not</a>(ctx, <a class="code" href="group__capi.html#ga95a19ce675b70e22bb0401f7137af37c" title="Create an AST node representing l = r.">Z3_mk_eq</a>(ctx, nil, l1)), <a class="code" href="group__capi.html#gad86c8730a2e4e61bac585b240a6288d4" title="True value. It is just an alias for 1.">Z3_TRUE</a>);
<a name="l01874"></a>01874 
<a name="l01875"></a>01875     <span class="comment">/* cons(2,nil) != cons(1, nil) */</span>
<a name="l01876"></a>01876     <a class="code" href="group__capi__ex.html#gac1c8ca24db543be3c7c8ada6e3cad89b" title="Prove that the constraints already asserted into the logical context implies the...">prove</a>(ctx, <a class="code" href="group__capi.html#ga3329538091996eb7b3dc677760a61072" title="Create an AST node representing not(a).">Z3_mk_not</a>(ctx, <a class="code" href="group__capi.html#ga95a19ce675b70e22bb0401f7137af37c" title="Create an AST node representing l = r.">Z3_mk_eq</a>(ctx, l1, l2)), <a class="code" href="group__capi.html#gad86c8730a2e4e61bac585b240a6288d4" title="True value. It is just an alias for 1.">Z3_TRUE</a>);
<a name="l01877"></a>01877 
<a name="l01878"></a>01878     <span class="comment">/* cons(x,nil) = cons(y, nil) =&gt; x = y */</span>
<a name="l01879"></a>01879     x = <a class="code" href="group__maxsat__ex.html#gad55575aaf95896158c9e2f12e93769c8" title="Create a variable using the given name and type.">mk_var</a>(ctx, <span class="stringliteral">&quot;x&quot;</span>, int_ty);
<a name="l01880"></a>01880     y = <a class="code" href="group__maxsat__ex.html#gad55575aaf95896158c9e2f12e93769c8" title="Create a variable using the given name and type.">mk_var</a>(ctx, <span class="stringliteral">&quot;y&quot;</span>, int_ty);    
<a name="l01881"></a>01881     l1 = <a class="code" href="group__capi__ex.html#gaa498f025e510b9564ad6afe4c63a743c" title="Create the binary function application: (f x y).">mk_binary_app</a>(ctx, cons_decl, x, nil);
<a name="l01882"></a>01882         l2 = <a class="code" href="group__capi__ex.html#gaa498f025e510b9564ad6afe4c63a743c" title="Create the binary function application: (f x y).">mk_binary_app</a>(ctx, cons_decl, y, nil);
<a name="l01883"></a>01883     <a class="code" href="group__capi__ex.html#gac1c8ca24db543be3c7c8ada6e3cad89b" title="Prove that the constraints already asserted into the logical context implies the...">prove</a>(ctx, <a class="code" href="group__capi.html#gac829c0e25bbbd30343bf073f7b524517" title="Create an AST node representing t1 implies t2.">Z3_mk_implies</a>(ctx, <a class="code" href="group__capi.html#ga95a19ce675b70e22bb0401f7137af37c" title="Create an AST node representing l = r.">Z3_mk_eq</a>(ctx,l1,l2), <a class="code" href="group__capi.html#ga95a19ce675b70e22bb0401f7137af37c" title="Create an AST node representing l = r.">Z3_mk_eq</a>(ctx, x, y)), <a class="code" href="group__capi.html#gad86c8730a2e4e61bac585b240a6288d4" title="True value. It is just an alias for 1.">Z3_TRUE</a>);
<a name="l01884"></a>01884 
<a name="l01885"></a>01885     <span class="comment">/* cons(x,u) = cons(x, v) =&gt; u = v */</span>
<a name="l01886"></a>01886     u = <a class="code" href="group__maxsat__ex.html#gad55575aaf95896158c9e2f12e93769c8" title="Create a variable using the given name and type.">mk_var</a>(ctx, <span class="stringliteral">&quot;u&quot;</span>, int_list);
<a name="l01887"></a>01887     v = <a class="code" href="group__maxsat__ex.html#gad55575aaf95896158c9e2f12e93769c8" title="Create a variable using the given name and type.">mk_var</a>(ctx, <span class="stringliteral">&quot;v&quot;</span>, int_list);    
<a name="l01888"></a>01888     l1 = <a class="code" href="group__capi__ex.html#gaa498f025e510b9564ad6afe4c63a743c" title="Create the binary function application: (f x y).">mk_binary_app</a>(ctx, cons_decl, x, u);
<a name="l01889"></a>01889         l2 = <a class="code" href="group__capi__ex.html#gaa498f025e510b9564ad6afe4c63a743c" title="Create the binary function application: (f x y).">mk_binary_app</a>(ctx, cons_decl, y, v);
<a name="l01890"></a>01890     <a class="code" href="group__capi__ex.html#gac1c8ca24db543be3c7c8ada6e3cad89b" title="Prove that the constraints already asserted into the logical context implies the...">prove</a>(ctx, <a class="code" href="group__capi.html#gac829c0e25bbbd30343bf073f7b524517" title="Create an AST node representing t1 implies t2.">Z3_mk_implies</a>(ctx, <a class="code" href="group__capi.html#ga95a19ce675b70e22bb0401f7137af37c" title="Create an AST node representing l = r.">Z3_mk_eq</a>(ctx,l1,l2), <a class="code" href="group__capi.html#ga95a19ce675b70e22bb0401f7137af37c" title="Create an AST node representing l = r.">Z3_mk_eq</a>(ctx, u, v)), <a class="code" href="group__capi.html#gad86c8730a2e4e61bac585b240a6288d4" title="True value. It is just an alias for 1.">Z3_TRUE</a>);
<a name="l01891"></a>01891     <a class="code" href="group__capi__ex.html#gac1c8ca24db543be3c7c8ada6e3cad89b" title="Prove that the constraints already asserted into the logical context implies the...">prove</a>(ctx, <a class="code" href="group__capi.html#gac829c0e25bbbd30343bf073f7b524517" title="Create an AST node representing t1 implies t2.">Z3_mk_implies</a>(ctx, <a class="code" href="group__capi.html#ga95a19ce675b70e22bb0401f7137af37c" title="Create an AST node representing l = r.">Z3_mk_eq</a>(ctx,l1,l2), <a class="code" href="group__capi.html#ga95a19ce675b70e22bb0401f7137af37c" title="Create an AST node representing l = r.">Z3_mk_eq</a>(ctx, x, y)), <a class="code" href="group__capi.html#gad86c8730a2e4e61bac585b240a6288d4" title="True value. It is just an alias for 1.">Z3_TRUE</a>);
<a name="l01892"></a>01892 
<a name="l01893"></a>01893     <span class="comment">/* is_nil(u) or is_cons(u) */</span>
<a name="l01894"></a>01894     ors[0] = <a class="code" href="group__capi.html#ga33a202d86bf628bfab9b6f437536cebe" title="Create a constant or function application.">Z3_mk_app</a>(ctx, is_nil_decl, 1, &amp;u);
<a name="l01895"></a>01895     ors[1] = <a class="code" href="group__capi.html#ga33a202d86bf628bfab9b6f437536cebe" title="Create a constant or function application.">Z3_mk_app</a>(ctx, is_cons_decl, 1, &amp;u);
<a name="l01896"></a>01896     <a class="code" href="group__capi__ex.html#gac1c8ca24db543be3c7c8ada6e3cad89b" title="Prove that the constraints already asserted into the logical context implies the...">prove</a>(ctx, <a class="code" href="group__capi.html#ga00866d16331d505620a6c515302021f9" title="Create an AST node representing args[0] or ... or args[num_args-1].">Z3_mk_or</a>(ctx, 2, ors), <a class="code" href="group__capi.html#gad86c8730a2e4e61bac585b240a6288d4" title="True value. It is just an alias for 1.">Z3_TRUE</a>);
<a name="l01897"></a>01897 
<a name="l01898"></a>01898     <span class="comment">/* occurs check u != cons(x,u) */</span>    
<a name="l01899"></a>01899     <a class="code" href="group__capi__ex.html#gac1c8ca24db543be3c7c8ada6e3cad89b" title="Prove that the constraints already asserted into the logical context implies the...">prove</a>(ctx, <a class="code" href="group__capi.html#ga3329538091996eb7b3dc677760a61072" title="Create an AST node representing not(a).">Z3_mk_not</a>(ctx, <a class="code" href="group__capi.html#ga95a19ce675b70e22bb0401f7137af37c" title="Create an AST node representing l = r.">Z3_mk_eq</a>(ctx, u, l1)), <a class="code" href="group__capi.html#gad86c8730a2e4e61bac585b240a6288d4" title="True value. It is just an alias for 1.">Z3_TRUE</a>);
<a name="l01900"></a>01900 
<a name="l01901"></a>01901     <span class="comment">/* destructors: is_cons(u) =&gt; u = cons(head(u),tail(u)) */</span>
<a name="l01902"></a>01902     fml1 = <a class="code" href="group__capi.html#ga95a19ce675b70e22bb0401f7137af37c" title="Create an AST node representing l = r.">Z3_mk_eq</a>(ctx, u, <a class="code" href="group__capi__ex.html#gaa498f025e510b9564ad6afe4c63a743c" title="Create the binary function application: (f x y).">mk_binary_app</a>(ctx, cons_decl, <a class="code" href="group__capi__ex.html#ga27ac720892fd2ea62deca501d6d2e706" title="Create the unary function application: (f x).">mk_unary_app</a>(ctx, head_decl, u), <a class="code" href="group__capi__ex.html#ga27ac720892fd2ea62deca501d6d2e706" title="Create the unary function application: (f x).">mk_unary_app</a>(ctx, tail_decl, u)));
<a name="l01903"></a>01903     fml = <a class="code" href="group__capi.html#gac829c0e25bbbd30343bf073f7b524517" title="Create an AST node representing t1 implies t2.">Z3_mk_implies</a>(ctx, <a class="code" href="group__capi.html#ga33a202d86bf628bfab9b6f437536cebe" title="Create a constant or function application.">Z3_mk_app</a>(ctx, is_cons_decl, 1, &amp;u), fml1);
<a name="l01904"></a>01904     printf(<span class="stringliteral">&quot;Formula %s\n&quot;</span>, <a class="code" href="group__capi.html#gab1aa4b78298fe00b3167bf7bfd88aea3" title="Convert the given AST node into a string.">Z3_ast_to_string</a>(ctx, fml));
<a name="l01905"></a>01905     <a class="code" href="group__capi__ex.html#gac1c8ca24db543be3c7c8ada6e3cad89b" title="Prove that the constraints already asserted into the logical context implies the...">prove</a>(ctx, fml, <a class="code" href="group__capi.html#gad86c8730a2e4e61bac585b240a6288d4" title="True value. It is just an alias for 1.">Z3_TRUE</a>);
<a name="l01906"></a>01906 
<a name="l01907"></a>01907     <a class="code" href="group__capi__ex.html#gac1c8ca24db543be3c7c8ada6e3cad89b" title="Prove that the constraints already asserted into the logical context implies the...">prove</a>(ctx, fml1, <a class="code" href="group__capi.html#ga1d9cee57472b2c7623642f123b8f1781" title="False value. It is just an alias for 0.">Z3_FALSE</a>);
<a name="l01908"></a>01908 
<a name="l01909"></a>01909     <span class="comment">/* delete logical context */</span>
<a name="l01910"></a>01910     <a class="code" href="group__capi.html#ga556eae80ed43ab13e1e7dc3b38c35200" title="Delete the given logical context.">Z3_del_context</a>(ctx);
<a name="l01911"></a>01911 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="gaa498f025e510b9564ad6afe4c63a743c"></a><!-- doxytag: member="test_capi.c::mk_binary_app" ref="gaa498f025e510b9564ad6afe4c63a743c" args="(Z3_context ctx, Z3_func_decl f, Z3_ast x, Z3_ast y)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Z3_ast mk_binary_app </td>
          <td>(</td>
          <td class="paramtype">Z3_context&nbsp;</td>
          <td class="paramname"> <em>ctx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Z3_func_decl&nbsp;</td>
          <td class="paramname"> <em>f</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Z3_ast&nbsp;</td>
          <td class="paramname"> <em>x</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Z3_ast&nbsp;</td>
          <td class="paramname"> <em>y</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Create the binary function application: <code>(f x y)</code>. </p>

<p>Definition at line <a class="el" href="test__capi_8c_source.html#l00171">171</a> of file <a class="el" href="test__capi_8c_source.html">test_capi.c</a>.</p>

<p>Referenced by <a class="el" href="test__user__theory_8c_source.html#l00704">apply_compare_axiom_for_parents_of()</a>, <a class="el" href="test__user__theory_8c_source.html#l00336">apply_unit_axiom_for_parents_of()</a>, <a class="el" href="test__capi_8c_source.html#l01994">forest_example()</a>, <a class="el" href="test__capi_8c_source.html#l01852">list_example()</a>, <a class="el" href="test__user__theory_8c_source.html#l00814">pa_theory_example1()</a>, <a class="el" href="test__user__theory_8c_source.html#l00842">pa_theory_example2()</a>, <a class="el" href="test__capi_8c_source.html#l01023">quantifier_example1()</a>, <a class="el" href="test__user__theory_8c_source.html#l00488">simple_example1()</a>, <a class="el" href="test__user__theory_8c_source.html#l00515">simple_example2()</a>, <a class="el" href="test__capi_8c_source.html#l01916">tree_example()</a>, and <a class="el" href="test__capi_8c_source.html#l01233">tuple_example1()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00172"></a>00172 {
<a name="l00173"></a>00173     Z3_ast args[2] = {x, y};
<a name="l00174"></a>00174     <span class="keywordflow">return</span> <a class="code" href="group__capi.html#ga33a202d86bf628bfab9b6f437536cebe" title="Create a constant or function application.">Z3_mk_app</a>(ctx, f, 2, args);
<a name="l00175"></a>00175 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ga397d6e03e2538ff0df36aad6e02030ae"></a><!-- doxytag: member="test_capi.c::mk_bool_var" ref="ga397d6e03e2538ff0df36aad6e02030ae" args="(Z3_context ctx, const char *name)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Z3_ast mk_bool_var </td>
          <td>(</td>
          <td class="paramtype">Z3_context&nbsp;</td>
          <td class="paramname"> <em>ctx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>name</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Create a boolean variable using the given name. </p>

<p>Definition at line <a class="el" href="test__capi_8c_source.html#l00126">126</a> of file <a class="el" href="test__capi_8c_source.html">test_capi.c</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00127"></a>00127 {
<a name="l00128"></a>00128     Z3_sort ty = <a class="code" href="group__capi.html#gacdc73510b69a010b71793d429015f342" title="Create the Boolean type.">Z3_mk_bool_sort</a>(ctx);
<a name="l00129"></a>00129     <span class="keywordflow">return</span> <a class="code" href="group__maxsat__ex.html#gad55575aaf95896158c9e2f12e93769c8" title="Create a variable using the given name and type.">mk_var</a>(ctx, name, ty);
<a name="l00130"></a>00130 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ga102b86f8b4829828c5c2d06c5d8b8489"></a><!-- doxytag: member="test_capi.c::mk_context" ref="ga102b86f8b4829828c5c2d06c5d8b8489" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Z3_context mk_context </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Create a logical context. </p>
<p>Enable model construction only.</p>
<p>Also enable tracing to stderr and register standard error handler. </p>

<p>Definition at line <a class="el" href="test__capi_8c_source.html#l00087">87</a> of file <a class="el" href="test__capi_8c_source.html">test_capi.c</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00088"></a>00088 {
<a name="l00089"></a>00089     Z3_config  cfg;
<a name="l00090"></a>00090     Z3_context ctx;
<a name="l00091"></a>00091     cfg = <a class="code" href="group__capi.html#ga7d6c40d9b79fe8a8851cc8540970787f" title="Create a configuration.">Z3_mk_config</a>();
<a name="l00092"></a>00092     ctx = <a class="code" href="group__capi__ex.html#ga4e884f4048e2a5937f97bb9667d6bae6" title="Create a logical context.">mk_context_custom</a>(cfg, <a class="code" href="group__capi__ex.html#ga82e5abe89b86f8ab9d95ac826189b4fc" title="Simpler error handler.">error_handler</a>);
<a name="l00093"></a>00093     <a class="code" href="group__capi.html#ga5e620acf5d55d0271097c9bb97219774" title="Delete the given configuration object.">Z3_del_config</a>(cfg);
<a name="l00094"></a>00094     <span class="keywordflow">return</span> ctx;
<a name="l00095"></a>00095 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ga4e884f4048e2a5937f97bb9667d6bae6"></a><!-- doxytag: member="test_capi.c::mk_context_custom" ref="ga4e884f4048e2a5937f97bb9667d6bae6" args="(Z3_config cfg, Z3_error_handler err)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Z3_context mk_context_custom </td>
          <td>(</td>
          <td class="paramtype">Z3_config&nbsp;</td>
          <td class="paramname"> <em>cfg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__capi.html#ga4f0c179e183c96ebdaa639628c6cdbb2">Z3_error_handler</a>&nbsp;</td>
          <td class="paramname"> <em>err</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Create a logical context. </p>
<p>Enable model construction. Other configuration parameters can be passed in the cfg variable.</p>
<p>Also enable tracing to stderr and register custom error handler. </p>

<p>Definition at line <a class="el" href="test__capi_8c_source.html#l00069">69</a> of file <a class="el" href="test__capi_8c_source.html">test_capi.c</a>.</p>

<p>Referenced by <a class="el" href="test__capi_8c_source.html#l01484">error_code_example1()</a>, <a class="el" href="test__capi_8c_source.html#l01528">error_code_example2()</a>, <a class="el" href="test__capi_8c_source.html#l00087">mk_context()</a>, <a class="el" href="test__capi_8c_source.html#l00105">mk_proof_context()</a>, <a class="el" href="test__capi_8c_source.html#l01634">parser_example3()</a>, <a class="el" href="test__capi_8c_source.html#l01711">parser_example5()</a>, and <a class="el" href="test__capi_8c_source.html#l01023">quantifier_example1()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00070"></a>00070 {
<a name="l00071"></a>00071     Z3_context ctx;
<a name="l00072"></a>00072     
<a name="l00073"></a>00073     <a class="code" href="group__capi.html#gab6f8f5d3d059be1ae2982902202b3a25" title="Set a configuration parameter.">Z3_set_param_value</a>(cfg, <span class="stringliteral">&quot;MODEL&quot;</span>, <span class="stringliteral">&quot;true&quot;</span>);
<a name="l00074"></a>00074     ctx = <a class="code" href="group__capi.html#ga0bd93cfab4d749dd3e2f2a4416820a46" title="Create a context using the given configuration.">Z3_mk_context</a>(cfg);
<a name="l00075"></a>00075     <a class="code" href="group__capi.html#gadaa12e9990f37b0c1e2bf1dd502dbf39" title="Register a Z3 error handler.">Z3_set_error_handler</a>(ctx, err);
<a name="l00076"></a>00076     
<a name="l00077"></a>00077     <span class="keywordflow">return</span> ctx;
<a name="l00078"></a>00078 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="gaee2e7823d9a007a245500395b48fffec"></a><!-- doxytag: member="test_capi.c::mk_ext_context" ref="gaee2e7823d9a007a245500395b48fffec" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Z3_ext_context mk_ext_context </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Create a logical context wrapper with support for retractable constraints. </p>

<p>Definition at line <a class="el" href="test__capi_8c_source.html#l02323">2323</a> of file <a class="el" href="test__capi_8c_source.html">test_capi.c</a>.</p>

<p>Referenced by <a class="el" href="test__capi_8c_source.html#l02435">incremental_example1()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l02323"></a>02323                                 {
<a name="l02324"></a>02324     Z3_ext_context ctx         = (Z3_ext_context) malloc(<span class="keyword">sizeof</span>(Z3_ext_context_struct));
<a name="l02325"></a>02325     ctx-&gt;m_context             = <a class="code" href="group__maxsat__ex.html#ga102b86f8b4829828c5c2d06c5d8b8489" title="Create a logical context. Enable model construction only.">mk_context</a>();
<a name="l02326"></a>02326     ctx-&gt;m_num_answer_literals = 0;
<a name="l02327"></a>02327     <span class="keywordflow">return</span> ctx;
<a name="l02328"></a>02328 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="gac55b5bc7b387575d70b84ae5f92bc7fc"></a><!-- doxytag: member="test_capi.c::mk_int" ref="gac55b5bc7b387575d70b84ae5f92bc7fc" args="(Z3_context ctx, int v)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Z3_ast mk_int </td>
          <td>(</td>
          <td class="paramtype">Z3_context&nbsp;</td>
          <td class="paramname"> <em>ctx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>v</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Create a Z3 integer node using a C int. </p>

<p>Definition at line <a class="el" href="test__capi_8c_source.html#l00144">144</a> of file <a class="el" href="test__capi_8c_source.html">test_capi.c</a>.</p>

<p>Referenced by <a class="el" href="test__capi_8c_source.html#l02102">binary_tree_example()</a>, <a class="el" href="test__capi_8c_source.html#l01407">eval_example1()</a>, <a class="el" href="test__capi_8c_source.html#l00764">find_model_example2()</a>, <a class="el" href="test__capi_8c_source.html#l02435">incremental_example1()</a>, <a class="el" href="test__capi_8c_source.html#l01771">ite_example()</a>, <a class="el" href="test__capi_8c_source.html#l01852">list_example()</a>, and <a class="el" href="test__capi_8c_source.html#l00871">prove_example2()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00145"></a>00145 {
<a name="l00146"></a>00146     Z3_sort ty = <a class="code" href="group__capi.html#ga6cd426ab5748653b77d389fd3eac1015" title="Create the integer type.">Z3_mk_int_sort</a>(ctx);
<a name="l00147"></a>00147     <span class="keywordflow">return</span> <a class="code" href="group__capi.html#ga8779204998136569c3e166c34cfd3e2c" title="Create a numeral of an int, bit-vector, or finite-domain sort.">Z3_mk_int</a>(ctx, v, ty);
<a name="l00148"></a>00148 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="gaa7563e3fd1dd6951e4c6afb7aee7f3ee"></a><!-- doxytag: member="test_capi.c::mk_int_var" ref="gaa7563e3fd1dd6951e4c6afb7aee7f3ee" args="(Z3_context ctx, const char *name)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Z3_ast mk_int_var </td>
          <td>(</td>
          <td class="paramtype">Z3_context&nbsp;</td>
          <td class="paramname"> <em>ctx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>name</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Create an integer variable using the given name. </p>

<p>Definition at line <a class="el" href="test__capi_8c_source.html#l00135">135</a> of file <a class="el" href="test__capi_8c_source.html">test_capi.c</a>.</p>

<p>Referenced by <a class="el" href="test__capi_8c_source.html#l01528">error_code_example2()</a>, <a class="el" href="test__capi_8c_source.html#l01407">eval_example1()</a>, <a class="el" href="test__capi_8c_source.html#l00764">find_model_example2()</a>, <a class="el" href="test__capi_8c_source.html#l02257">get_implied_equalities_example()</a>, <a class="el" href="test__capi_8c_source.html#l02435">incremental_example1()</a>, <a class="el" href="test__capi_8c_source.html#l01593">parser_example2()</a>, <a class="el" href="test__capi_8c_source.html#l00871">prove_example2()</a>, <a class="el" href="test__capi_8c_source.html#l01023">quantifier_example1()</a>, <a class="el" href="test__capi_8c_source.html#l02561">substitute_example()</a>, and <a class="el" href="test__capi_8c_source.html#l02606">substitute_vars_example()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00136"></a>00136 {
<a name="l00137"></a>00137     Z3_sort ty = <a class="code" href="group__capi.html#ga6cd426ab5748653b77d389fd3eac1015" title="Create the integer type.">Z3_mk_int_sort</a>(ctx);
<a name="l00138"></a>00138     <span class="keywordflow">return</span> <a class="code" href="group__maxsat__ex.html#gad55575aaf95896158c9e2f12e93769c8" title="Create a variable using the given name and type.">mk_var</a>(ctx, name, ty);
<a name="l00139"></a>00139 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="gaf861446b22ab36b8ffe20a4aba630075"></a><!-- doxytag: member="test_capi.c::mk_proof_context" ref="gaf861446b22ab36b8ffe20a4aba630075" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Z3_context mk_proof_context </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Create a logical context. </p>
<p>Enable fine-grained proof construction. Enable model construction.</p>
<p>Also enable tracing to stderr and register standard error handler. </p>

<p>Definition at line <a class="el" href="test__capi_8c_source.html#l00105">105</a> of file <a class="el" href="test__capi_8c_source.html">test_capi.c</a>.</p>

<p>Referenced by <a class="el" href="test__capi_8c_source.html#l02184">unsat_core_and_proof_example()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00105"></a>00105                               {
<a name="l00106"></a>00106     Z3_config cfg = <a class="code" href="group__capi.html#ga7d6c40d9b79fe8a8851cc8540970787f" title="Create a configuration.">Z3_mk_config</a>();
<a name="l00107"></a>00107     Z3_context ctx;
<a name="l00108"></a>00108     <a class="code" href="group__capi.html#gab6f8f5d3d059be1ae2982902202b3a25" title="Set a configuration parameter.">Z3_set_param_value</a>(cfg, <span class="stringliteral">&quot;PROOF_MODE&quot;</span>, <span class="stringliteral">&quot;2&quot;</span>);
<a name="l00109"></a>00109     ctx = <a class="code" href="group__capi__ex.html#ga4e884f4048e2a5937f97bb9667d6bae6" title="Create a logical context.">mk_context_custom</a>(cfg, <a class="code" href="group__capi__ex.html#gaa6d66d26409a97ec721d1fe6814757c9" title="Low tech exceptions.">throw_z3_error</a>);
<a name="l00110"></a>00110     <a class="code" href="group__capi.html#ga5e620acf5d55d0271097c9bb97219774" title="Delete the given configuration object.">Z3_del_config</a>(cfg);
<a name="l00111"></a>00111     <span class="keywordflow">return</span> ctx;
<a name="l00112"></a>00112 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ga440884a8a38a8b2201e4713862358aae"></a><!-- doxytag: member="test_capi.c::mk_real_var" ref="ga440884a8a38a8b2201e4713862358aae" args="(Z3_context ctx, const char *name)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Z3_ast mk_real_var </td>
          <td>(</td>
          <td class="paramtype">Z3_context&nbsp;</td>
          <td class="paramname"> <em>ctx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>name</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Create a real variable using the given name. </p>

<p>Definition at line <a class="el" href="test__capi_8c_source.html#l00153">153</a> of file <a class="el" href="test__capi_8c_source.html">test_capi.c</a>.</p>

<p>Referenced by <a class="el" href="test__capi_8c_source.html#l01233">tuple_example1()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00154"></a>00154 {
<a name="l00155"></a>00155     Z3_sort ty = <a class="code" href="group__capi.html#ga40ef93b9738485caed6dc84631c3c1a0" title="Create the real type.">Z3_mk_real_sort</a>(ctx);
<a name="l00156"></a>00156     <span class="keywordflow">return</span> <a class="code" href="group__maxsat__ex.html#gad55575aaf95896158c9e2f12e93769c8" title="Create a variable using the given name and type.">mk_var</a>(ctx, name, ty);
<a name="l00157"></a>00157 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ga7e3e44186510e02e3fa143689fef6fd3"></a><!-- doxytag: member="test_capi.c::mk_tuple_update" ref="ga7e3e44186510e02e3fa143689fef6fd3" args="(Z3_context c, Z3_ast t, unsigned i, Z3_ast new_val)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Z3_ast mk_tuple_update </td>
          <td>(</td>
          <td class="paramtype">Z3_context&nbsp;</td>
          <td class="paramname"> <em>c</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Z3_ast&nbsp;</td>
          <td class="paramname"> <em>t</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&nbsp;</td>
          <td class="paramname"> <em>i</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Z3_ast&nbsp;</td>
          <td class="paramname"> <em>new_val</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Z3 does not support explicitly tuple updates. They can be easily implemented as macros. The argument <code>t</code> must have tuple type. A tuple update is a new tuple where field <code>i</code> has value <code>new_val</code>, and all other fields have the value of the respective field of <code>t</code>. </p>
<p><code>update(t, i, new_val)</code> is equivalent to <code>mk_tuple(proj_0(t), ..., new_val, ..., proj_n(t))</code> </p>

<p>Definition at line <a class="el" href="test__capi_8c_source.html#l00388">388</a> of file <a class="el" href="test__capi_8c_source.html">test_capi.c</a>.</p>

<p>Referenced by <a class="el" href="test__capi_8c_source.html#l01233">tuple_example1()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00389"></a>00389 {
<a name="l00390"></a>00390     Z3_sort         ty;
<a name="l00391"></a>00391     Z3_func_decl   mk_tuple_decl;
<a name="l00392"></a>00392     <span class="keywordtype">unsigned</span>            num_fields, j;
<a name="l00393"></a>00393     Z3_ast *            new_fields;
<a name="l00394"></a>00394     Z3_ast              result;
<a name="l00395"></a>00395 
<a name="l00396"></a>00396     ty = <a class="code" href="group__capi.html#ga0a4dac7e9397ff067136354cd33cb933" title="Return the sort of an AST node.">Z3_get_sort</a>(c, t);
<a name="l00397"></a>00397 
<a name="l00398"></a>00398     <span class="keywordflow">if</span> (<a class="code" href="group__capi.html#ga6d694951de4c7f115ed472eb32ef963c" title="Return the sort kind (e.g., array, tuple, int, bool, etc).">Z3_get_sort_kind</a>(c, ty) != Z3_DATATYPE_SORT) {
<a name="l00399"></a>00399         <a class="code" href="group__capi__ex.html#gaa325ae9cdfce0e749a254dfffc6c6ace" title="exit gracefully in case of error.">exitf</a>(<span class="stringliteral">&quot;argument must be a tuple&quot;</span>);
<a name="l00400"></a>00400     }
<a name="l00401"></a>00401 
<a name="l00402"></a>00402     num_fields = <a class="code" href="group__capi.html#gaff3ba6ad93295a4b4d8a8d3c06b7aa72" title="Return the number of fields of the given tuple sort.">Z3_get_tuple_sort_num_fields</a>(c, ty);
<a name="l00403"></a>00403     
<a name="l00404"></a>00404     <span class="keywordflow">if</span> (i &gt;= num_fields) {
<a name="l00405"></a>00405         <a class="code" href="group__capi__ex.html#gaa325ae9cdfce0e749a254dfffc6c6ace" title="exit gracefully in case of error.">exitf</a>(<span class="stringliteral">&quot;invalid tuple update, index is too big&quot;</span>);
<a name="l00406"></a>00406     }
<a name="l00407"></a>00407     
<a name="l00408"></a>00408     new_fields = (Z3_ast*) malloc(<span class="keyword">sizeof</span>(Z3_ast) * num_fields);
<a name="l00409"></a>00409     <span class="keywordflow">for</span> (j = 0; j &lt; num_fields; j++) {
<a name="l00410"></a>00410         <span class="keywordflow">if</span> (i == j) {
<a name="l00411"></a>00411             <span class="comment">/* use new_val at position i */</span>
<a name="l00412"></a>00412             new_fields[j] = new_val;
<a name="l00413"></a>00413         }
<a name="l00414"></a>00414         <span class="keywordflow">else</span> {
<a name="l00415"></a>00415             <span class="comment">/* use field j of t */</span>
<a name="l00416"></a>00416             Z3_func_decl proj_decl = <a class="code" href="group__capi.html#gae17ed9db93c03f4f60a336c95fb60c44" title="Return the i-th field declaration (i.e., projection function declaration) of the...">Z3_get_tuple_sort_field_decl</a>(c, ty, j);
<a name="l00417"></a>00417             new_fields[j] = <a class="code" href="group__capi__ex.html#ga27ac720892fd2ea62deca501d6d2e706" title="Create the unary function application: (f x).">mk_unary_app</a>(c, proj_decl, t);
<a name="l00418"></a>00418         }
<a name="l00419"></a>00419     }
<a name="l00420"></a>00420     mk_tuple_decl = <a class="code" href="group__capi.html#gad16a0317b4ed90ccb4037f7e624bfd88" title="Return the constructor declaration of the given tuple sort.">Z3_get_tuple_sort_mk_decl</a>(c, ty);
<a name="l00421"></a>00421     result = <a class="code" href="group__capi.html#ga33a202d86bf628bfab9b6f437536cebe" title="Create a constant or function application.">Z3_mk_app</a>(c, mk_tuple_decl, num_fields, new_fields);
<a name="l00422"></a>00422     free(new_fields);
<a name="l00423"></a>00423     <span class="keywordflow">return</span> result;
<a name="l00424"></a>00424 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ga27ac720892fd2ea62deca501d6d2e706"></a><!-- doxytag: member="test_capi.c::mk_unary_app" ref="ga27ac720892fd2ea62deca501d6d2e706" args="(Z3_context ctx, Z3_func_decl f, Z3_ast x)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Z3_ast mk_unary_app </td>
          <td>(</td>
          <td class="paramtype">Z3_context&nbsp;</td>
          <td class="paramname"> <em>ctx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Z3_func_decl&nbsp;</td>
          <td class="paramname"> <em>f</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Z3_ast&nbsp;</td>
          <td class="paramname"> <em>x</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Create the unary function application: <code>(f x)</code>. </p>

<p>Definition at line <a class="el" href="test__capi_8c_source.html#l00162">162</a> of file <a class="el" href="test__capi_8c_source.html">test_capi.c</a>.</p>

<p>Referenced by <a class="el" href="test__capi_8c_source.html#l00278">assert_inj_axiom()</a>, <a class="el" href="test__capi_8c_source.html#l02102">binary_tree_example()</a>, <a class="el" href="test__capi_8c_source.html#l01852">list_example()</a>, <a class="el" href="test__capi_8c_source.html#l00388">mk_tuple_update()</a>, <a class="el" href="test__capi_8c_source.html#l00812">prove_example1()</a>, <a class="el" href="test__capi_8c_source.html#l00871">prove_example2()</a>, <a class="el" href="test__user__theory_8c_source.html#l00515">simple_example2()</a>, <a class="el" href="test__capi_8c_source.html#l01916">tree_example()</a>, and <a class="el" href="test__capi_8c_source.html#l01233">tuple_example1()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00163"></a>00163 {
<a name="l00164"></a>00164     Z3_ast args[1] = {x};
<a name="l00165"></a>00165     <span class="keywordflow">return</span> <a class="code" href="group__capi.html#ga33a202d86bf628bfab9b6f437536cebe" title="Create a constant or function application.">Z3_mk_app</a>(ctx, f, 1, args);
<a name="l00166"></a>00166 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="gad55575aaf95896158c9e2f12e93769c8"></a><!-- doxytag: member="test_capi.c::mk_var" ref="gad55575aaf95896158c9e2f12e93769c8" args="(Z3_context ctx, const char *name, Z3_sort ty)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Z3_ast mk_var </td>
          <td>(</td>
          <td class="paramtype">Z3_context&nbsp;</td>
          <td class="paramname"> <em>ctx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Z3_sort&nbsp;</td>
          <td class="paramname"> <em>ty</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Create a variable using the given name and type. </p>

<p>Definition at line <a class="el" href="test__capi_8c_source.html#l00117">117</a> of file <a class="el" href="test__capi_8c_source.html">test_capi.c</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00118"></a>00118 {
<a name="l00119"></a>00119     Z3_symbol   s  = <a class="code" href="group__capi.html#ga6b9ed981ba0180962928394fe828b0a7" title="Create a Z3 symbol using a C string.">Z3_mk_string_symbol</a>(ctx, name);
<a name="l00120"></a>00120     <span class="keywordflow">return</span> <a class="code" href="group__capi.html#ga093c9703393f33ae282ec5e8729354ef" title="Declare and create a constant.">Z3_mk_const</a>(ctx, s, ty);
<a name="l00121"></a>00121 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="gad037a932d83d106438f08cacaeb6d642"></a><!-- doxytag: member="test_capi.c::numeral_example" ref="gad037a932d83d106438f08cacaeb6d642" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void numeral_example </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Demonstrate different ways of creating rational numbers: decimal and fractional representations. </p>

<p>Definition at line <a class="el" href="test__capi_8c_source.html#l01745">1745</a> of file <a class="el" href="test__capi_8c_source.html">test_capi.c</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l01745"></a>01745                        {
<a name="l01746"></a>01746     Z3_context ctx;
<a name="l01747"></a>01747     Z3_ast n1, n2;
<a name="l01748"></a>01748     Z3_sort real_ty;
<a name="l01749"></a>01749     printf(<span class="stringliteral">&quot;\nnumeral_example\n&quot;</span>);
<a name="l01750"></a>01750     LOG_MSG(<span class="stringliteral">&quot;numeral_example&quot;</span>);
<a name="l01751"></a>01751     
<a name="l01752"></a>01752     ctx        = <a class="code" href="group__maxsat__ex.html#ga102b86f8b4829828c5c2d06c5d8b8489" title="Create a logical context. Enable model construction only.">mk_context</a>();
<a name="l01753"></a>01753     real_ty    = <a class="code" href="group__capi.html#ga40ef93b9738485caed6dc84631c3c1a0" title="Create the real type.">Z3_mk_real_sort</a>(ctx);
<a name="l01754"></a>01754     n1 = <a class="code" href="group__capi.html#ga92e75c71f0d602c65b67ae8ae82dcb6a" title="Create a numeral of a given sort.">Z3_mk_numeral</a>(ctx, <span class="stringliteral">&quot;1/2&quot;</span>, real_ty);
<a name="l01755"></a>01755     n2 = <a class="code" href="group__capi.html#ga92e75c71f0d602c65b67ae8ae82dcb6a" title="Create a numeral of a given sort.">Z3_mk_numeral</a>(ctx, <span class="stringliteral">&quot;0.5&quot;</span>, real_ty);
<a name="l01756"></a>01756     printf(<span class="stringliteral">&quot;Numerals n1:%s&quot;</span>, <a class="code" href="group__capi.html#gab1aa4b78298fe00b3167bf7bfd88aea3" title="Convert the given AST node into a string.">Z3_ast_to_string</a>(ctx, n1));
<a name="l01757"></a>01757     printf(<span class="stringliteral">&quot; n2:%s\n&quot;</span>, <a class="code" href="group__capi.html#gab1aa4b78298fe00b3167bf7bfd88aea3" title="Convert the given AST node into a string.">Z3_ast_to_string</a>(ctx, n2));
<a name="l01758"></a>01758     <a class="code" href="group__capi__ex.html#gac1c8ca24db543be3c7c8ada6e3cad89b" title="Prove that the constraints already asserted into the logical context implies the...">prove</a>(ctx, <a class="code" href="group__capi.html#ga95a19ce675b70e22bb0401f7137af37c" title="Create an AST node representing l = r.">Z3_mk_eq</a>(ctx, n1, n2), <a class="code" href="group__capi.html#gad86c8730a2e4e61bac585b240a6288d4" title="True value. It is just an alias for 1.">Z3_TRUE</a>);
<a name="l01759"></a>01759 
<a name="l01760"></a>01760     n1 = <a class="code" href="group__capi.html#ga92e75c71f0d602c65b67ae8ae82dcb6a" title="Create a numeral of a given sort.">Z3_mk_numeral</a>(ctx, <span class="stringliteral">&quot;-1/3&quot;</span>, real_ty);
<a name="l01761"></a>01761     n2 = <a class="code" href="group__capi.html#ga92e75c71f0d602c65b67ae8ae82dcb6a" title="Create a numeral of a given sort.">Z3_mk_numeral</a>(ctx, <span class="stringliteral">&quot;-0.33333333333333333333333333333333333333333333333333&quot;</span>, real_ty);
<a name="l01762"></a>01762     printf(<span class="stringliteral">&quot;Numerals n1:%s&quot;</span>, <a class="code" href="group__capi.html#gab1aa4b78298fe00b3167bf7bfd88aea3" title="Convert the given AST node into a string.">Z3_ast_to_string</a>(ctx, n1));
<a name="l01763"></a>01763     printf(<span class="stringliteral">&quot; n2:%s\n&quot;</span>, <a class="code" href="group__capi.html#gab1aa4b78298fe00b3167bf7bfd88aea3" title="Convert the given AST node into a string.">Z3_ast_to_string</a>(ctx, n2));
<a name="l01764"></a>01764     <a class="code" href="group__capi__ex.html#gac1c8ca24db543be3c7c8ada6e3cad89b" title="Prove that the constraints already asserted into the logical context implies the...">prove</a>(ctx, <a class="code" href="group__capi.html#ga3329538091996eb7b3dc677760a61072" title="Create an AST node representing not(a).">Z3_mk_not</a>(ctx, <a class="code" href="group__capi.html#ga95a19ce675b70e22bb0401f7137af37c" title="Create an AST node representing l = r.">Z3_mk_eq</a>(ctx, n1, n2)), <a class="code" href="group__capi.html#gad86c8730a2e4e61bac585b240a6288d4" title="True value. It is just an alias for 1.">Z3_TRUE</a>);
<a name="l01765"></a>01765     <a class="code" href="group__capi.html#ga556eae80ed43ab13e1e7dc3b38c35200" title="Delete the given logical context.">Z3_del_context</a>(ctx);
<a name="l01766"></a>01766 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ga34d5e8e536a5649693f8cefa4805a81e"></a><!-- doxytag: member="test_capi.c::parser_example1" ref="ga34d5e8e536a5649693f8cefa4805a81e" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void parser_example1 </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Demonstrates how to use the SMTLIB parser. </p>

<p>Definition at line <a class="el" href="test__capi_8c_source.html#l01564">1564</a> of file <a class="el" href="test__capi_8c_source.html">test_capi.c</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l01565"></a>01565 {
<a name="l01566"></a>01566     Z3_context ctx;
<a name="l01567"></a>01567     <span class="keywordtype">unsigned</span> i, num_formulas;
<a name="l01568"></a>01568 
<a name="l01569"></a>01569     printf(<span class="stringliteral">&quot;\nparser_example1\n&quot;</span>);
<a name="l01570"></a>01570     LOG_MSG(<span class="stringliteral">&quot;parser_example1&quot;</span>);
<a name="l01571"></a>01571     
<a name="l01572"></a>01572     ctx        = <a class="code" href="group__maxsat__ex.html#ga102b86f8b4829828c5c2d06c5d8b8489" title="Create a logical context. Enable model construction only.">mk_context</a>();
<a name="l01573"></a>01573    
<a name="l01574"></a>01574     <a class="code" href="group__capi.html#ga56e0d31f1769ec44bc2f8dc4697ef689" title="Parse the given string using the SMT-LIB parser.">Z3_parse_smtlib_string</a>(ctx, 
<a name="l01575"></a>01575                            <span class="stringliteral">&quot;(benchmark tst :extrafuns ((x Int) (y Int)) :formula (&gt; x y) :formula (&gt; x 0))&quot;</span>,
<a name="l01576"></a>01576                            0, 0, 0,
<a name="l01577"></a>01577                            0, 0, 0);
<a name="l01578"></a>01578     num_formulas = <a class="code" href="group__capi.html#ga5dd0dfb9ec1fcc7edba1e86a6ff98a77" title="Return the number of SMTLIB formulas parsed by the last call to Z3_parse_smtlib_string...">Z3_get_smtlib_num_formulas</a>(ctx);
<a name="l01579"></a>01579     <span class="keywordflow">for</span> (i = 0; i &lt; num_formulas; i++) {
<a name="l01580"></a>01580         Z3_ast f = <a class="code" href="group__capi.html#ga0ac42d0fa1874e4e773c89a56066f242" title="Return the i-th formula parsed by the last call to Z3_parse_smtlib_string or Z3_parse_smtlib_file...">Z3_get_smtlib_formula</a>(ctx, i);
<a name="l01581"></a>01581         printf(<span class="stringliteral">&quot;formula %d: %s\n&quot;</span>, i, <a class="code" href="group__capi.html#gab1aa4b78298fe00b3167bf7bfd88aea3" title="Convert the given AST node into a string.">Z3_ast_to_string</a>(ctx, f));
<a name="l01582"></a>01582         <a class="code" href="group__capi.html#ga1a05ff73a564ae7256a2257048a4680a" title="Assert a constraint into the logical context.">Z3_assert_cnstr</a>(ctx, f);
<a name="l01583"></a>01583     }
<a name="l01584"></a>01584     
<a name="l01585"></a>01585     <a class="code" href="group__capi__ex.html#ga4ac4375063bd700cce15158ba6e761be" title="Check whether the logical context is satisfiable, and compare the result with the...">check</a>(ctx, Z3_L_TRUE);
<a name="l01586"></a>01586 
<a name="l01587"></a>01587     <a class="code" href="group__capi.html#ga556eae80ed43ab13e1e7dc3b38c35200" title="Delete the given logical context.">Z3_del_context</a>(ctx);
<a name="l01588"></a>01588 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ga9c8fd60a787198a88ebcefc0282ea3cd"></a><!-- doxytag: member="test_capi.c::parser_example2" ref="ga9c8fd60a787198a88ebcefc0282ea3cd" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void parser_example2 </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Demonstrates how to initialize the parser symbol table. </p>

<p>Definition at line <a class="el" href="test__capi_8c_source.html#l01593">1593</a> of file <a class="el" href="test__capi_8c_source.html">test_capi.c</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l01594"></a>01594 {
<a name="l01595"></a>01595     Z3_context ctx;
<a name="l01596"></a>01596     Z3_ast x, y;
<a name="l01597"></a>01597     Z3_symbol         names[2];
<a name="l01598"></a>01598     Z3_func_decl decls[2];
<a name="l01599"></a>01599     Z3_ast f;
<a name="l01600"></a>01600 
<a name="l01601"></a>01601     printf(<span class="stringliteral">&quot;\nparser_example2\n&quot;</span>);
<a name="l01602"></a>01602     LOG_MSG(<span class="stringliteral">&quot;parser_example2&quot;</span>);
<a name="l01603"></a>01603 
<a name="l01604"></a>01604     ctx        = <a class="code" href="group__maxsat__ex.html#ga102b86f8b4829828c5c2d06c5d8b8489" title="Create a logical context. Enable model construction only.">mk_context</a>();
<a name="l01605"></a>01605 
<a name="l01606"></a>01606     <span class="comment">/* Z3_enable_arithmetic doesn&#39;t need to be invoked in this example</span>
<a name="l01607"></a>01607 <span class="comment">       because it will be implicitly invoked by mk_int_var.</span>
<a name="l01608"></a>01608 <span class="comment">    */</span>
<a name="l01609"></a>01609     
<a name="l01610"></a>01610     x        = <a class="code" href="group__capi__ex.html#gaa7563e3fd1dd6951e4c6afb7aee7f3ee" title="Create an integer variable using the given name.">mk_int_var</a>(ctx, <span class="stringliteral">&quot;x&quot;</span>);
<a name="l01611"></a>01611     decls[0] = <a class="code" href="group__capi.html#ga4ffab51c30484a32edc65194573cfd28" title="Return the declaration of a constant or function application.">Z3_get_app_decl</a>(ctx, <a class="code" href="group__capi.html#gaf9345fd0822d7e9928dd4ab14a09765b" title="Convert an ast into an APP_AST. This is just type casting.">Z3_to_app</a>(ctx, x));
<a name="l01612"></a>01612     y        = <a class="code" href="group__capi__ex.html#gaa7563e3fd1dd6951e4c6afb7aee7f3ee" title="Create an integer variable using the given name.">mk_int_var</a>(ctx, <span class="stringliteral">&quot;y&quot;</span>);
<a name="l01613"></a>01613     decls[1] = <a class="code" href="group__capi.html#ga4ffab51c30484a32edc65194573cfd28" title="Return the declaration of a constant or function application.">Z3_get_app_decl</a>(ctx, <a class="code" href="group__capi.html#gaf9345fd0822d7e9928dd4ab14a09765b" title="Convert an ast into an APP_AST. This is just type casting.">Z3_to_app</a>(ctx, y));
<a name="l01614"></a>01614     
<a name="l01615"></a>01615     names[0] = <a class="code" href="group__capi.html#ga6b9ed981ba0180962928394fe828b0a7" title="Create a Z3 symbol using a C string.">Z3_mk_string_symbol</a>(ctx, <span class="stringliteral">&quot;a&quot;</span>);
<a name="l01616"></a>01616     names[1] = <a class="code" href="group__capi.html#ga6b9ed981ba0180962928394fe828b0a7" title="Create a Z3 symbol using a C string.">Z3_mk_string_symbol</a>(ctx, <span class="stringliteral">&quot;b&quot;</span>);
<a name="l01617"></a>01617     
<a name="l01618"></a>01618     <a class="code" href="group__capi.html#ga56e0d31f1769ec44bc2f8dc4697ef689" title="Parse the given string using the SMT-LIB parser.">Z3_parse_smtlib_string</a>(ctx, 
<a name="l01619"></a>01619                            <span class="stringliteral">&quot;(benchmark tst :formula (&gt; a b))&quot;</span>,
<a name="l01620"></a>01620                            0, 0, 0,
<a name="l01621"></a>01621                            <span class="comment">/* &#39;x&#39; and &#39;y&#39; declarations are inserted as &#39;a&#39; and &#39;b&#39; into the parser symbol table. */</span>
<a name="l01622"></a>01622                            2, names, decls);
<a name="l01623"></a>01623     f = <a class="code" href="group__capi.html#ga0ac42d0fa1874e4e773c89a56066f242" title="Return the i-th formula parsed by the last call to Z3_parse_smtlib_string or Z3_parse_smtlib_file...">Z3_get_smtlib_formula</a>(ctx, 0);
<a name="l01624"></a>01624     printf(<span class="stringliteral">&quot;formula: %s\n&quot;</span>, <a class="code" href="group__capi.html#gab1aa4b78298fe00b3167bf7bfd88aea3" title="Convert the given AST node into a string.">Z3_ast_to_string</a>(ctx, f));
<a name="l01625"></a>01625     <a class="code" href="group__capi.html#ga1a05ff73a564ae7256a2257048a4680a" title="Assert a constraint into the logical context.">Z3_assert_cnstr</a>(ctx, f);
<a name="l01626"></a>01626     <a class="code" href="group__capi__ex.html#ga4ac4375063bd700cce15158ba6e761be" title="Check whether the logical context is satisfiable, and compare the result with the...">check</a>(ctx, Z3_L_TRUE);
<a name="l01627"></a>01627 
<a name="l01628"></a>01628     <a class="code" href="group__capi.html#ga556eae80ed43ab13e1e7dc3b38c35200" title="Delete the given logical context.">Z3_del_context</a>(ctx);
<a name="l01629"></a>01629 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="gaad0cce961cb43f47950149c5bb3729ae"></a><!-- doxytag: member="test_capi.c::parser_example3" ref="gaad0cce961cb43f47950149c5bb3729ae" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void parser_example3 </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Demonstrates how to initialize the parser symbol table. </p>

<p>Definition at line <a class="el" href="test__capi_8c_source.html#l01634">1634</a> of file <a class="el" href="test__capi_8c_source.html">test_capi.c</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l01635"></a>01635 {
<a name="l01636"></a>01636     Z3_config  cfg;
<a name="l01637"></a>01637     Z3_context ctx;
<a name="l01638"></a>01638     Z3_sort       int_sort;
<a name="l01639"></a>01639     Z3_symbol     g_name;
<a name="l01640"></a>01640     Z3_sort       g_domain[2];
<a name="l01641"></a>01641     Z3_func_decl  g;
<a name="l01642"></a>01642     Z3_ast        thm;
<a name="l01643"></a>01643 
<a name="l01644"></a>01644     printf(<span class="stringliteral">&quot;\nparser_example3\n&quot;</span>);
<a name="l01645"></a>01645     LOG_MSG(<span class="stringliteral">&quot;parser_example3&quot;</span>);
<a name="l01646"></a>01646 
<a name="l01647"></a>01647     cfg = <a class="code" href="group__capi.html#ga7d6c40d9b79fe8a8851cc8540970787f" title="Create a configuration.">Z3_mk_config</a>();
<a name="l01648"></a>01648     <span class="comment">/* See quantifer_example1 */</span>
<a name="l01649"></a>01649     <a class="code" href="group__capi.html#gab6f8f5d3d059be1ae2982902202b3a25" title="Set a configuration parameter.">Z3_set_param_value</a>(cfg, <span class="stringliteral">&quot;MODEL&quot;</span>, <span class="stringliteral">&quot;true&quot;</span>);
<a name="l01650"></a>01650     ctx = <a class="code" href="group__capi__ex.html#ga4e884f4048e2a5937f97bb9667d6bae6" title="Create a logical context.">mk_context_custom</a>(cfg, <a class="code" href="group__capi__ex.html#ga82e5abe89b86f8ab9d95ac826189b4fc" title="Simpler error handler.">error_handler</a>);
<a name="l01651"></a>01651     <a class="code" href="group__capi.html#ga5e620acf5d55d0271097c9bb97219774" title="Delete the given configuration object.">Z3_del_config</a>(cfg);
<a name="l01652"></a>01652 
<a name="l01653"></a>01653     <span class="comment">/* declare function g */</span>
<a name="l01654"></a>01654     int_sort    = <a class="code" href="group__capi.html#ga6cd426ab5748653b77d389fd3eac1015" title="Create the integer type.">Z3_mk_int_sort</a>(ctx);
<a name="l01655"></a>01655     g_name      = <a class="code" href="group__capi.html#ga6b9ed981ba0180962928394fe828b0a7" title="Create a Z3 symbol using a C string.">Z3_mk_string_symbol</a>(ctx, <span class="stringliteral">&quot;g&quot;</span>);
<a name="l01656"></a>01656     g_domain[0] = int_sort;
<a name="l01657"></a>01657     g_domain[1] = int_sort;
<a name="l01658"></a>01658     g           = <a class="code" href="group__capi.html#gaa5c5e2602a44d5f1373f077434859ca2" title="Declare a constant or function.">Z3_mk_func_decl</a>(ctx, g_name, 2, g_domain, int_sort);
<a name="l01659"></a>01659     
<a name="l01660"></a>01660     <a class="code" href="group__capi__ex.html#ga7cc571ff97eb60e06c6a6aff9b6c8c69" title="Assert the axiom: function f is commutative.">assert_comm_axiom</a>(ctx, g);
<a name="l01661"></a>01661 
<a name="l01662"></a>01662     <a class="code" href="group__capi.html#ga56e0d31f1769ec44bc2f8dc4697ef689" title="Parse the given string using the SMT-LIB parser.">Z3_parse_smtlib_string</a>(ctx, 
<a name="l01663"></a>01663                            <span class="stringliteral">&quot;(benchmark tst :formula (forall (x Int) (y Int) (implies (= x y) (= (g x 0) (g 0 y)))))&quot;</span>,
<a name="l01664"></a>01664                            0, 0, 0,
<a name="l01665"></a>01665                            1, &amp;g_name, &amp;g);
<a name="l01666"></a>01666     thm = <a class="code" href="group__capi.html#ga0ac42d0fa1874e4e773c89a56066f242" title="Return the i-th formula parsed by the last call to Z3_parse_smtlib_string or Z3_parse_smtlib_file...">Z3_get_smtlib_formula</a>(ctx, 0);
<a name="l01667"></a>01667     printf(<span class="stringliteral">&quot;formula: %s\n&quot;</span>, <a class="code" href="group__capi.html#gab1aa4b78298fe00b3167bf7bfd88aea3" title="Convert the given AST node into a string.">Z3_ast_to_string</a>(ctx, thm));
<a name="l01668"></a>01668     <a class="code" href="group__capi__ex.html#gac1c8ca24db543be3c7c8ada6e3cad89b" title="Prove that the constraints already asserted into the logical context implies the...">prove</a>(ctx, thm, <a class="code" href="group__capi.html#gad86c8730a2e4e61bac585b240a6288d4" title="True value. It is just an alias for 1.">Z3_TRUE</a>);
<a name="l01669"></a>01669 
<a name="l01670"></a>01670     <a class="code" href="group__capi.html#ga556eae80ed43ab13e1e7dc3b38c35200" title="Delete the given logical context.">Z3_del_context</a>(ctx);
<a name="l01671"></a>01671 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="gab1d78024df78dbb10723537c15647aed"></a><!-- doxytag: member="test_capi.c::parser_example4" ref="gab1d78024df78dbb10723537c15647aed" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void parser_example4 </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Display the declarations, assumptions and formulas in a SMT-LIB string. </p>

<p>Definition at line <a class="el" href="test__capi_8c_source.html#l01676">1676</a> of file <a class="el" href="test__capi_8c_source.html">test_capi.c</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l01677"></a>01677 {
<a name="l01678"></a>01678     Z3_context ctx;
<a name="l01679"></a>01679     <span class="keywordtype">unsigned</span> i, num_decls, num_assumptions, num_formulas;
<a name="l01680"></a>01680 
<a name="l01681"></a>01681     printf(<span class="stringliteral">&quot;\nparser_example4\n&quot;</span>);
<a name="l01682"></a>01682     LOG_MSG(<span class="stringliteral">&quot;parser_example4&quot;</span>);
<a name="l01683"></a>01683     
<a name="l01684"></a>01684     ctx        = <a class="code" href="group__maxsat__ex.html#ga102b86f8b4829828c5c2d06c5d8b8489" title="Create a logical context. Enable model construction only.">mk_context</a>();
<a name="l01685"></a>01685     
<a name="l01686"></a>01686     <a class="code" href="group__capi.html#ga56e0d31f1769ec44bc2f8dc4697ef689" title="Parse the given string using the SMT-LIB parser.">Z3_parse_smtlib_string</a>(ctx, 
<a name="l01687"></a>01687                            <span class="stringliteral">&quot;(benchmark tst :extrafuns ((x Int) (y Int)) :assumption (= x 20) :formula (&gt; x y) :formula (&gt; x 0))&quot;</span>,
<a name="l01688"></a>01688                            0, 0, 0,
<a name="l01689"></a>01689                            0, 0, 0);
<a name="l01690"></a>01690     num_decls = <a class="code" href="group__capi.html#ga33fc0f55a4d60408a6e15d89da5b1cbe" title="Return the number of declarations parsed by Z3_parse_smtlib_string or Z3_parse_smtlib_file...">Z3_get_smtlib_num_decls</a>(ctx);
<a name="l01691"></a>01691     <span class="keywordflow">for</span> (i = 0; i &lt; num_decls; i++) {
<a name="l01692"></a>01692         Z3_func_decl d = <a class="code" href="group__capi.html#ga9cb99b7d3b0ff5ea324f799c660ac3cb" title="Return the i-th declaration parsed by the last call to Z3_parse_smtlib_string or...">Z3_get_smtlib_decl</a>(ctx, i);
<a name="l01693"></a>01693         printf(<span class="stringliteral">&quot;declaration %d: %s\n&quot;</span>, i, Z3_func_decl_to_string(ctx, d));
<a name="l01694"></a>01694     }
<a name="l01695"></a>01695     num_assumptions = <a class="code" href="group__capi.html#gaa6682931827a2af6413c2ad6e57a01b4" title="Return the number of SMTLIB assumptions parsed by Z3_parse_smtlib_string or Z3_parse_smtlib_file...">Z3_get_smtlib_num_assumptions</a>(ctx);
<a name="l01696"></a>01696     <span class="keywordflow">for</span> (i = 0; i &lt; num_assumptions; i++) {
<a name="l01697"></a>01697         Z3_ast a = <a class="code" href="group__capi.html#ga00764430965b47fbcba657305e1dd820" title="Return the i-th assumption parsed by the last call to Z3_parse_smtlib_string or Z3_parse_smtlib_file...">Z3_get_smtlib_assumption</a>(ctx, i);
<a name="l01698"></a>01698         printf(<span class="stringliteral">&quot;assumption %d: %s\n&quot;</span>, i, <a class="code" href="group__capi.html#gab1aa4b78298fe00b3167bf7bfd88aea3" title="Convert the given AST node into a string.">Z3_ast_to_string</a>(ctx, a));
<a name="l01699"></a>01699     }
<a name="l01700"></a>01700     num_formulas = <a class="code" href="group__capi.html#ga5dd0dfb9ec1fcc7edba1e86a6ff98a77" title="Return the number of SMTLIB formulas parsed by the last call to Z3_parse_smtlib_string...">Z3_get_smtlib_num_formulas</a>(ctx);
<a name="l01701"></a>01701     <span class="keywordflow">for</span> (i = 0; i &lt; num_formulas; i++) {
<a name="l01702"></a>01702         Z3_ast f = <a class="code" href="group__capi.html#ga0ac42d0fa1874e4e773c89a56066f242" title="Return the i-th formula parsed by the last call to Z3_parse_smtlib_string or Z3_parse_smtlib_file...">Z3_get_smtlib_formula</a>(ctx, i);
<a name="l01703"></a>01703         printf(<span class="stringliteral">&quot;formula %d: %s\n&quot;</span>, i, <a class="code" href="group__capi.html#gab1aa4b78298fe00b3167bf7bfd88aea3" title="Convert the given AST node into a string.">Z3_ast_to_string</a>(ctx, f));
<a name="l01704"></a>01704     }
<a name="l01705"></a>01705     <a class="code" href="group__capi.html#ga556eae80ed43ab13e1e7dc3b38c35200" title="Delete the given logical context.">Z3_del_context</a>(ctx);
<a name="l01706"></a>01706 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="gab9594032459f28272bbc74fe5e2c54fc"></a><!-- doxytag: member="test_capi.c::parser_example5" ref="gab9594032459f28272bbc74fe5e2c54fc" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void parser_example5 </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Demonstrates how to handle parser errors using Z3 error handling support. </p>

<p>Definition at line <a class="el" href="test__capi_8c_source.html#l01711">1711</a> of file <a class="el" href="test__capi_8c_source.html">test_capi.c</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l01711"></a>01711                        {
<a name="l01712"></a>01712     Z3_config  cfg;
<a name="l01713"></a>01713     Z3_context ctx = NULL;
<a name="l01714"></a>01714     <span class="keywordtype">int</span> r;
<a name="l01715"></a>01715 
<a name="l01716"></a>01716     printf(<span class="stringliteral">&quot;\nparser_example5\n&quot;</span>);
<a name="l01717"></a>01717     LOG_MSG(<span class="stringliteral">&quot;parser_example5&quot;</span>);
<a name="l01718"></a>01718 
<a name="l01719"></a>01719     r = setjmp(g_catch_buffer);
<a name="l01720"></a>01720     <span class="keywordflow">if</span> (r == 0) {
<a name="l01721"></a>01721         cfg = <a class="code" href="group__capi.html#ga7d6c40d9b79fe8a8851cc8540970787f" title="Create a configuration.">Z3_mk_config</a>();
<a name="l01722"></a>01722         ctx = <a class="code" href="group__capi__ex.html#ga4e884f4048e2a5937f97bb9667d6bae6" title="Create a logical context.">mk_context_custom</a>(cfg, <a class="code" href="group__capi__ex.html#gaa6d66d26409a97ec721d1fe6814757c9" title="Low tech exceptions.">throw_z3_error</a>);
<a name="l01723"></a>01723         <a class="code" href="group__capi.html#ga5e620acf5d55d0271097c9bb97219774" title="Delete the given configuration object.">Z3_del_config</a>(cfg);
<a name="l01724"></a>01724                 
<a name="l01725"></a>01725         <a class="code" href="group__capi.html#ga56e0d31f1769ec44bc2f8dc4697ef689" title="Parse the given string using the SMT-LIB parser.">Z3_parse_smtlib_string</a>(ctx, 
<a name="l01726"></a>01726                                <span class="comment">/* the following string has a parsing error: missing parenthesis */</span>
<a name="l01727"></a>01727                                <span class="stringliteral">&quot;(benchmark tst :extrafuns ((x Int (y Int)) :formula (&gt; x y) :formula (&gt; x 0))&quot;</span>,
<a name="l01728"></a>01728                                0, 0, 0,
<a name="l01729"></a>01729                                0, 0, 0);
<a name="l01730"></a>01730         <a class="code" href="group__capi__ex.html#ga98a996adc7ad22a8dc75b936e74b73ca" title="exit if unreachable code was reached.">unreachable</a>();
<a name="l01731"></a>01731         <a class="code" href="group__capi.html#ga556eae80ed43ab13e1e7dc3b38c35200" title="Delete the given logical context.">Z3_del_context</a>(ctx);
<a name="l01732"></a>01732     }
<a name="l01733"></a>01733     <span class="keywordflow">else</span> {
<a name="l01734"></a>01734         printf(<span class="stringliteral">&quot;Z3 error: %s.\n&quot;</span>, <a class="code" href="group__capi.html#gaf06357c49299efb8a0bdaeb3bc96c6d6" title="Return a string describing the given error code.">Z3_get_error_msg</a>((<a class="code" href="group__capi.html#gaa9f9e7b1b5b81381fab96debbaaa638f" title="Z3 error codes (See Z3_get_error_code).">Z3_error_code</a>)r));
<a name="l01735"></a>01735         <span class="keywordflow">if</span> (ctx != NULL) {
<a name="l01736"></a>01736             printf(<span class="stringliteral">&quot;Error message: &#39;%s&#39;.\n&quot;</span>,<a class="code" href="group__capi.html#gaf595a7ac994547d11525cc1b21083c76" title="Retrieve that last error message information generated from parsing.">Z3_get_smtlib_error</a>(ctx));
<a name="l01737"></a>01737             <a class="code" href="group__capi.html#ga556eae80ed43ab13e1e7dc3b38c35200" title="Delete the given logical context.">Z3_del_context</a>(ctx);
<a name="l01738"></a>01738         }
<a name="l01739"></a>01739     }
<a name="l01740"></a>01740 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="gac1c8ca24db543be3c7c8ada6e3cad89b"></a><!-- doxytag: member="test_capi.c::prove" ref="gac1c8ca24db543be3c7c8ada6e3cad89b" args="(Z3_context ctx, Z3_ast f, Z3_bool is_valid)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void prove </td>
          <td>(</td>
          <td class="paramtype">Z3_context&nbsp;</td>
          <td class="paramname"> <em>ctx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Z3_ast&nbsp;</td>
          <td class="paramname"> <em>f</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__capi.html#ga3a65ded0ada3ee285865759a21140eeb">Z3_bool</a>&nbsp;</td>
          <td class="paramname"> <em>is_valid</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Prove that the constraints already asserted into the logical context implies the given formula. The result of the proof is displayed. </p>
<p>Z3 is a satisfiability checker. So, one can prove <code>f</code> by showing that <code>(not f)</code> is unsatisfiable.</p>
<p>The context <code>ctx</code> is not modified by this function. </p>

<p>Definition at line <a class="el" href="test__capi_8c_source.html#l00215">215</a> of file <a class="el" href="test__capi_8c_source.html">test_capi.c</a>.</p>

<p>Referenced by <a class="el" href="test__capi_8c_source.html#l01099">array_example1()</a>, <a class="el" href="test__capi_8c_source.html#l02102">binary_tree_example()</a>, <a class="el" href="test__capi_8c_source.html#l01347">bitvector_example1()</a>, <a class="el" href="test__capi_8c_source.html#l01795">enum_example()</a>, <a class="el" href="test__capi_8c_source.html#l01994">forest_example()</a>, <a class="el" href="test__capi_8c_source.html#l01852">list_example()</a>, <a class="el" href="test__capi_8c_source.html#l01745">numeral_example()</a>, <a class="el" href="test__capi_8c_source.html#l01634">parser_example3()</a>, <a class="el" href="test__capi_8c_source.html#l00812">prove_example1()</a>, <a class="el" href="test__capi_8c_source.html#l00871">prove_example2()</a>, <a class="el" href="test__capi_8c_source.html#l01023">quantifier_example1()</a>, <a class="el" href="test__capi_8c_source.html#l01916">tree_example()</a>, and <a class="el" href="test__capi_8c_source.html#l01233">tuple_example1()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00216"></a>00216 {
<a name="l00217"></a>00217     Z3_model m;
<a name="l00218"></a>00218     Z3_ast   not_f;
<a name="l00219"></a>00219 
<a name="l00220"></a>00220     <span class="comment">/* save the current state of the context */</span>
<a name="l00221"></a>00221     <a class="code" href="group__capi.html#gad651ad68c7a060cbb5616349233cb10f" title="Create a backtracking point.">Z3_push</a>(ctx);
<a name="l00222"></a>00222 
<a name="l00223"></a>00223     not_f = <a class="code" href="group__capi.html#ga3329538091996eb7b3dc677760a61072" title="Create an AST node representing not(a).">Z3_mk_not</a>(ctx, f);
<a name="l00224"></a>00224     <a class="code" href="group__capi.html#ga1a05ff73a564ae7256a2257048a4680a" title="Assert a constraint into the logical context.">Z3_assert_cnstr</a>(ctx, not_f);
<a name="l00225"></a>00225     
<a name="l00226"></a>00226     m = 0;
<a name="l00227"></a>00227     
<a name="l00228"></a>00228     <span class="keywordflow">switch</span> (<a class="code" href="group__capi.html#gaff310fef80ac8a82d0a51417e073ec0a" title="Check whether the given logical context is consistent or not.">Z3_check_and_get_model</a>(ctx, &amp;m)) {
<a name="l00229"></a>00229     <span class="keywordflow">case</span> Z3_L_FALSE:
<a name="l00230"></a>00230         <span class="comment">/* proved */</span>
<a name="l00231"></a>00231         printf(<span class="stringliteral">&quot;valid\n&quot;</span>);
<a name="l00232"></a>00232         <span class="keywordflow">if</span> (!is_valid) {
<a name="l00233"></a>00233             <a class="code" href="group__capi__ex.html#gaa325ae9cdfce0e749a254dfffc6c6ace" title="exit gracefully in case of error.">exitf</a>(<span class="stringliteral">&quot;unexpected result&quot;</span>);
<a name="l00234"></a>00234         }
<a name="l00235"></a>00235         <span class="keywordflow">break</span>;
<a name="l00236"></a>00236     <span class="keywordflow">case</span> Z3_L_UNDEF:
<a name="l00237"></a>00237         <span class="comment">/* Z3 failed to prove/disprove f. */</span>
<a name="l00238"></a>00238         printf(<span class="stringliteral">&quot;unknown\n&quot;</span>);
<a name="l00239"></a>00239         <span class="keywordflow">if</span> (m != 0) {
<a name="l00240"></a>00240             <span class="comment">/* m should be viewed as a potential counterexample. */</span>
<a name="l00241"></a>00241             printf(<span class="stringliteral">&quot;potential counterexample:\n%s\n&quot;</span>, <a class="code" href="group__capi.html#gaf36d49862a8c0d20dd5e6508eef5f8af" title="Convert the given model into a string.">Z3_model_to_string</a>(ctx, m));
<a name="l00242"></a>00242         }
<a name="l00243"></a>00243         <span class="keywordflow">if</span> (is_valid) {
<a name="l00244"></a>00244             <a class="code" href="group__capi__ex.html#gaa325ae9cdfce0e749a254dfffc6c6ace" title="exit gracefully in case of error.">exitf</a>(<span class="stringliteral">&quot;unexpected result&quot;</span>);
<a name="l00245"></a>00245         }
<a name="l00246"></a>00246         <span class="keywordflow">break</span>;
<a name="l00247"></a>00247     <span class="keywordflow">case</span> Z3_L_TRUE:
<a name="l00248"></a>00248         <span class="comment">/* disproved */</span>
<a name="l00249"></a>00249         printf(<span class="stringliteral">&quot;invalid\n&quot;</span>);
<a name="l00250"></a>00250         <span class="keywordflow">if</span> (m) {
<a name="l00251"></a>00251             <span class="comment">/* the model returned by Z3 is a counterexample */</span>
<a name="l00252"></a>00252             printf(<span class="stringliteral">&quot;counterexample:\n%s\n&quot;</span>, <a class="code" href="group__capi.html#gaf36d49862a8c0d20dd5e6508eef5f8af" title="Convert the given model into a string.">Z3_model_to_string</a>(ctx, m));
<a name="l00253"></a>00253         }
<a name="l00254"></a>00254         <span class="keywordflow">if</span> (is_valid) {
<a name="l00255"></a>00255             <a class="code" href="group__capi__ex.html#gaa325ae9cdfce0e749a254dfffc6c6ace" title="exit gracefully in case of error.">exitf</a>(<span class="stringliteral">&quot;unexpected result&quot;</span>);
<a name="l00256"></a>00256         }
<a name="l00257"></a>00257         <span class="keywordflow">break</span>;
<a name="l00258"></a>00258     }
<a name="l00259"></a>00259 
<a name="l00260"></a>00260     <span class="keywordflow">if</span> (m) {
<a name="l00261"></a>00261         <a class="code" href="group__capi.html#ga0cc98d3ce68047f873e119bccaabdbee" title="Delete a model object.">Z3_del_model</a>(ctx, m);
<a name="l00262"></a>00262     }
<a name="l00263"></a>00263 
<a name="l00264"></a>00264     <span class="comment">/* restore context */</span>
<a name="l00265"></a>00265     <a class="code" href="group__capi.html#gab2b3a542006c86c8d86dc37872f88b61" title="Backtrack.">Z3_pop</a>(ctx, 1);
<a name="l00266"></a>00266 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ga0cd53c9f10e66950a9121f5702bf8705"></a><!-- doxytag: member="test_capi.c::prove_example1" ref="ga0cd53c9f10e66950a9121f5702bf8705" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void prove_example1 </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Prove <code>x = y implies g(x) = g(y)</code>, and disprove <code>x = y implies g(g(x)) = g(y)</code>. </p>
<p>This function demonstrates how to create uninterpreted types and functions. </p>

<p>Definition at line <a class="el" href="test__capi_8c_source.html#l00812">812</a> of file <a class="el" href="test__capi_8c_source.html">test_capi.c</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00813"></a>00813 {
<a name="l00814"></a>00814     Z3_context ctx;
<a name="l00815"></a>00815     Z3_symbol U_name, g_name, x_name, y_name;
<a name="l00816"></a>00816     Z3_sort U;
<a name="l00817"></a>00817     Z3_sort g_domain[1];
<a name="l00818"></a>00818     Z3_func_decl g;
<a name="l00819"></a>00819     Z3_ast x, y, gx, ggx, gy;
<a name="l00820"></a>00820     Z3_ast eq, f;
<a name="l00821"></a>00821 
<a name="l00822"></a>00822     printf(<span class="stringliteral">&quot;\nprove_example1\n&quot;</span>);
<a name="l00823"></a>00823     LOG_MSG(<span class="stringliteral">&quot;prove_example1&quot;</span>);
<a name="l00824"></a>00824     
<a name="l00825"></a>00825     ctx        = <a class="code" href="group__maxsat__ex.html#ga102b86f8b4829828c5c2d06c5d8b8489" title="Create a logical context. Enable model construction only.">mk_context</a>();
<a name="l00826"></a>00826     
<a name="l00827"></a>00827     <span class="comment">/* create uninterpreted type. */</span>
<a name="l00828"></a>00828     U_name     = <a class="code" href="group__capi.html#ga6b9ed981ba0180962928394fe828b0a7" title="Create a Z3 symbol using a C string.">Z3_mk_string_symbol</a>(ctx, <span class="stringliteral">&quot;U&quot;</span>);
<a name="l00829"></a>00829     U          = <a class="code" href="group__capi.html#ga736e88741af1c178cbebf94c49aa42de" title="Create a free (uninterpreted) type using the given name (symbol).">Z3_mk_uninterpreted_sort</a>(ctx, U_name);
<a name="l00830"></a>00830     
<a name="l00831"></a>00831     <span class="comment">/* declare function g */</span>
<a name="l00832"></a>00832     g_name      = <a class="code" href="group__capi.html#ga6b9ed981ba0180962928394fe828b0a7" title="Create a Z3 symbol using a C string.">Z3_mk_string_symbol</a>(ctx, <span class="stringliteral">&quot;g&quot;</span>);
<a name="l00833"></a>00833     g_domain[0] = U;
<a name="l00834"></a>00834     g           = <a class="code" href="group__capi.html#gaa5c5e2602a44d5f1373f077434859ca2" title="Declare a constant or function.">Z3_mk_func_decl</a>(ctx, g_name, 1, g_domain, U);
<a name="l00835"></a>00835 
<a name="l00836"></a>00836     <span class="comment">/* create x and y */</span>
<a name="l00837"></a>00837     x_name      = <a class="code" href="group__capi.html#ga6b9ed981ba0180962928394fe828b0a7" title="Create a Z3 symbol using a C string.">Z3_mk_string_symbol</a>(ctx, <span class="stringliteral">&quot;x&quot;</span>);
<a name="l00838"></a>00838     y_name      = <a class="code" href="group__capi.html#ga6b9ed981ba0180962928394fe828b0a7" title="Create a Z3 symbol using a C string.">Z3_mk_string_symbol</a>(ctx, <span class="stringliteral">&quot;y&quot;</span>);
<a name="l00839"></a>00839     x           = <a class="code" href="group__capi.html#ga093c9703393f33ae282ec5e8729354ef" title="Declare and create a constant.">Z3_mk_const</a>(ctx, x_name, U);
<a name="l00840"></a>00840     y           = <a class="code" href="group__capi.html#ga093c9703393f33ae282ec5e8729354ef" title="Declare and create a constant.">Z3_mk_const</a>(ctx, y_name, U);
<a name="l00841"></a>00841     <span class="comment">/* create g(x), g(y) */</span>
<a name="l00842"></a>00842     gx          = <a class="code" href="group__capi__ex.html#ga27ac720892fd2ea62deca501d6d2e706" title="Create the unary function application: (f x).">mk_unary_app</a>(ctx, g, x);
<a name="l00843"></a>00843     gy          = <a class="code" href="group__capi__ex.html#ga27ac720892fd2ea62deca501d6d2e706" title="Create the unary function application: (f x).">mk_unary_app</a>(ctx, g, y);
<a name="l00844"></a>00844     
<a name="l00845"></a>00845     <span class="comment">/* assert x = y */</span>
<a name="l00846"></a>00846     eq          = <a class="code" href="group__capi.html#ga95a19ce675b70e22bb0401f7137af37c" title="Create an AST node representing l = r.">Z3_mk_eq</a>(ctx, x, y);
<a name="l00847"></a>00847     <a class="code" href="group__capi.html#ga1a05ff73a564ae7256a2257048a4680a" title="Assert a constraint into the logical context.">Z3_assert_cnstr</a>(ctx, eq);
<a name="l00848"></a>00848 
<a name="l00849"></a>00849     <span class="comment">/* prove g(x) = g(y) */</span>
<a name="l00850"></a>00850     f           = <a class="code" href="group__capi.html#ga95a19ce675b70e22bb0401f7137af37c" title="Create an AST node representing l = r.">Z3_mk_eq</a>(ctx, gx, gy);
<a name="l00851"></a>00851     printf(<span class="stringliteral">&quot;prove: x = y implies g(x) = g(y)\n&quot;</span>);
<a name="l00852"></a>00852     <a class="code" href="group__capi__ex.html#gac1c8ca24db543be3c7c8ada6e3cad89b" title="Prove that the constraints already asserted into the logical context implies the...">prove</a>(ctx, f, <a class="code" href="group__capi.html#gad86c8730a2e4e61bac585b240a6288d4" title="True value. It is just an alias for 1.">Z3_TRUE</a>);
<a name="l00853"></a>00853 
<a name="l00854"></a>00854     <span class="comment">/* create g(g(x)) */</span>
<a name="l00855"></a>00855     ggx         = <a class="code" href="group__capi__ex.html#ga27ac720892fd2ea62deca501d6d2e706" title="Create the unary function application: (f x).">mk_unary_app</a>(ctx, g, gx);
<a name="l00856"></a>00856     
<a name="l00857"></a>00857     <span class="comment">/* disprove g(g(x)) = g(y) */</span>
<a name="l00858"></a>00858     f           = <a class="code" href="group__capi.html#ga95a19ce675b70e22bb0401f7137af37c" title="Create an AST node representing l = r.">Z3_mk_eq</a>(ctx, ggx, gy);
<a name="l00859"></a>00859     printf(<span class="stringliteral">&quot;disprove: x = y implies g(g(x)) = g(y)\n&quot;</span>);
<a name="l00860"></a>00860     <a class="code" href="group__capi__ex.html#gac1c8ca24db543be3c7c8ada6e3cad89b" title="Prove that the constraints already asserted into the logical context implies the...">prove</a>(ctx, f, <a class="code" href="group__capi.html#ga1d9cee57472b2c7623642f123b8f1781" title="False value. It is just an alias for 0.">Z3_FALSE</a>);
<a name="l00861"></a>00861 
<a name="l00862"></a>00862     <a class="code" href="group__capi.html#ga556eae80ed43ab13e1e7dc3b38c35200" title="Delete the given logical context.">Z3_del_context</a>(ctx);
<a name="l00863"></a>00863 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ga8a474ab19f7f08b45bf69d1bd6e2bb43"></a><!-- doxytag: member="test_capi.c::prove_example2" ref="ga8a474ab19f7f08b45bf69d1bd6e2bb43" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void prove_example2 </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Prove <code>not(g(g(x) - g(y)) = g(z)), x + z &lt;= y &lt;= x implies z &lt; 0 </code>. Then, show that <code>z &lt; -1</code> is not implied. </p>
<p>This example demonstrates how to combine uninterpreted functions and arithmetic. </p>

<p>Definition at line <a class="el" href="test__capi_8c_source.html#l00871">871</a> of file <a class="el" href="test__capi_8c_source.html">test_capi.c</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00872"></a>00872 {
<a name="l00873"></a>00873     Z3_context ctx;
<a name="l00874"></a>00874     Z3_sort int_sort;
<a name="l00875"></a>00875     Z3_symbol g_name;
<a name="l00876"></a>00876     Z3_sort g_domain[1];
<a name="l00877"></a>00877     Z3_func_decl g;
<a name="l00878"></a>00878     Z3_ast x, y, z, zero, minus_one, x_plus_z, gx, gy, gz, gx_gy, ggx_gy;
<a name="l00879"></a>00879     Z3_ast args[2];
<a name="l00880"></a>00880     Z3_ast eq, c1, c2, c3, f;
<a name="l00881"></a>00881 
<a name="l00882"></a>00882     printf(<span class="stringliteral">&quot;\nprove_example2\n&quot;</span>);
<a name="l00883"></a>00883     LOG_MSG(<span class="stringliteral">&quot;prove_example2&quot;</span>);
<a name="l00884"></a>00884     
<a name="l00885"></a>00885     ctx        = <a class="code" href="group__maxsat__ex.html#ga102b86f8b4829828c5c2d06c5d8b8489" title="Create a logical context. Enable model construction only.">mk_context</a>();
<a name="l00886"></a>00886 
<a name="l00887"></a>00887     <span class="comment">/* declare function g */</span>
<a name="l00888"></a>00888     int_sort    = <a class="code" href="group__capi.html#ga6cd426ab5748653b77d389fd3eac1015" title="Create the integer type.">Z3_mk_int_sort</a>(ctx);
<a name="l00889"></a>00889     g_name      = <a class="code" href="group__capi.html#ga6b9ed981ba0180962928394fe828b0a7" title="Create a Z3 symbol using a C string.">Z3_mk_string_symbol</a>(ctx, <span class="stringliteral">&quot;g&quot;</span>);
<a name="l00890"></a>00890     g_domain[0] = int_sort;
<a name="l00891"></a>00891     g           = <a class="code" href="group__capi.html#gaa5c5e2602a44d5f1373f077434859ca2" title="Declare a constant or function.">Z3_mk_func_decl</a>(ctx, g_name, 1, g_domain, int_sort);
<a name="l00892"></a>00892     
<a name="l00893"></a>00893     <span class="comment">/* create x, y, and z */</span>
<a name="l00894"></a>00894     x           = <a class="code" href="group__capi__ex.html#gaa7563e3fd1dd6951e4c6afb7aee7f3ee" title="Create an integer variable using the given name.">mk_int_var</a>(ctx, <span class="stringliteral">&quot;x&quot;</span>);
<a name="l00895"></a>00895     y           = <a class="code" href="group__capi__ex.html#gaa7563e3fd1dd6951e4c6afb7aee7f3ee" title="Create an integer variable using the given name.">mk_int_var</a>(ctx, <span class="stringliteral">&quot;y&quot;</span>);
<a name="l00896"></a>00896     z           = <a class="code" href="group__capi__ex.html#gaa7563e3fd1dd6951e4c6afb7aee7f3ee" title="Create an integer variable using the given name.">mk_int_var</a>(ctx, <span class="stringliteral">&quot;z&quot;</span>);
<a name="l00897"></a>00897 
<a name="l00898"></a>00898     <span class="comment">/* create gx, gy, gz */</span>
<a name="l00899"></a>00899     gx          = <a class="code" href="group__capi__ex.html#ga27ac720892fd2ea62deca501d6d2e706" title="Create the unary function application: (f x).">mk_unary_app</a>(ctx, g, x);
<a name="l00900"></a>00900     gy          = <a class="code" href="group__capi__ex.html#ga27ac720892fd2ea62deca501d6d2e706" title="Create the unary function application: (f x).">mk_unary_app</a>(ctx, g, y);
<a name="l00901"></a>00901     gz          = <a class="code" href="group__capi__ex.html#ga27ac720892fd2ea62deca501d6d2e706" title="Create the unary function application: (f x).">mk_unary_app</a>(ctx, g, z);
<a name="l00902"></a>00902     
<a name="l00903"></a>00903     <span class="comment">/* create zero */</span>
<a name="l00904"></a>00904     zero        = <a class="code" href="group__capi__ex.html#gac55b5bc7b387575d70b84ae5f92bc7fc" title="Create a Z3 integer node using a C int.">mk_int</a>(ctx, 0);
<a name="l00905"></a>00905 
<a name="l00906"></a>00906     <span class="comment">/* assert not(g(g(x) - g(y)) = g(z)) */</span>
<a name="l00907"></a>00907     args[0]     = gx;
<a name="l00908"></a>00908     args[1]     = gy;
<a name="l00909"></a>00909     gx_gy       = <a class="code" href="group__capi.html#ga4f5fea9b683f9e674fd8f14d676cc9a9" title="Create an AST node representing args[0] - ... - args[num_args - 1].">Z3_mk_sub</a>(ctx, 2, args);
<a name="l00910"></a>00910     ggx_gy      = <a class="code" href="group__capi__ex.html#ga27ac720892fd2ea62deca501d6d2e706" title="Create the unary function application: (f x).">mk_unary_app</a>(ctx, g, gx_gy);
<a name="l00911"></a>00911     eq          = <a class="code" href="group__capi.html#ga95a19ce675b70e22bb0401f7137af37c" title="Create an AST node representing l = r.">Z3_mk_eq</a>(ctx, ggx_gy, gz);
<a name="l00912"></a>00912     c1          = <a class="code" href="group__capi.html#ga3329538091996eb7b3dc677760a61072" title="Create an AST node representing not(a).">Z3_mk_not</a>(ctx, eq);
<a name="l00913"></a>00913     <a class="code" href="group__capi.html#ga1a05ff73a564ae7256a2257048a4680a" title="Assert a constraint into the logical context.">Z3_assert_cnstr</a>(ctx, c1);
<a name="l00914"></a>00914 
<a name="l00915"></a>00915     <span class="comment">/* assert x + z &lt;= y */</span>
<a name="l00916"></a>00916     args[0]     = x;
<a name="l00917"></a>00917     args[1]     = z;
<a name="l00918"></a>00918     x_plus_z    = <a class="code" href="group__capi.html#ga4e4ac0a4e53eee0b4b0ef159ed7d0cd5" title="Create an AST node representing args[0] + ... + args[num_args-1].">Z3_mk_add</a>(ctx, 2, args);
<a name="l00919"></a>00919     c2          = <a class="code" href="group__capi.html#gaa9a33d11096841f4e8c407f1578bc0bf" title="Create less than or equal to.">Z3_mk_le</a>(ctx, x_plus_z, y);
<a name="l00920"></a>00920     <a class="code" href="group__capi.html#ga1a05ff73a564ae7256a2257048a4680a" title="Assert a constraint into the logical context.">Z3_assert_cnstr</a>(ctx, c2);
<a name="l00921"></a>00921 
<a name="l00922"></a>00922     <span class="comment">/* assert y &lt;= x */</span>
<a name="l00923"></a>00923     c3          = <a class="code" href="group__capi.html#gaa9a33d11096841f4e8c407f1578bc0bf" title="Create less than or equal to.">Z3_mk_le</a>(ctx, y, x);
<a name="l00924"></a>00924     <a class="code" href="group__capi.html#ga1a05ff73a564ae7256a2257048a4680a" title="Assert a constraint into the logical context.">Z3_assert_cnstr</a>(ctx, c3);
<a name="l00925"></a>00925 
<a name="l00926"></a>00926     <span class="comment">/* prove z &lt; 0 */</span>
<a name="l00927"></a>00927     f           = <a class="code" href="group__capi.html#ga58a3dc67c5de52cf599c346803ba1534" title="Create less than.">Z3_mk_lt</a>(ctx, z, zero);
<a name="l00928"></a>00928     printf(<span class="stringliteral">&quot;prove: not(g(g(x) - g(y)) = g(z)), x + z &lt;= y &lt;= x implies z &lt; 0\n&quot;</span>);
<a name="l00929"></a>00929     <a class="code" href="group__capi__ex.html#gac1c8ca24db543be3c7c8ada6e3cad89b" title="Prove that the constraints already asserted into the logical context implies the...">prove</a>(ctx, f, <a class="code" href="group__capi.html#gad86c8730a2e4e61bac585b240a6288d4" title="True value. It is just an alias for 1.">Z3_TRUE</a>);
<a name="l00930"></a>00930 
<a name="l00931"></a>00931     <span class="comment">/* disprove z &lt; -1 */</span>
<a name="l00932"></a>00932     minus_one   = <a class="code" href="group__capi__ex.html#gac55b5bc7b387575d70b84ae5f92bc7fc" title="Create a Z3 integer node using a C int.">mk_int</a>(ctx, -1);
<a name="l00933"></a>00933     f           = <a class="code" href="group__capi.html#ga58a3dc67c5de52cf599c346803ba1534" title="Create less than.">Z3_mk_lt</a>(ctx, z, minus_one);
<a name="l00934"></a>00934     printf(<span class="stringliteral">&quot;disprove: not(g(g(x) - g(y)) = g(z)), x + z &lt;= y &lt;= x implies z &lt; -1\n&quot;</span>);
<a name="l00935"></a>00935     <a class="code" href="group__capi__ex.html#gac1c8ca24db543be3c7c8ada6e3cad89b" title="Prove that the constraints already asserted into the logical context implies the...">prove</a>(ctx, f, <a class="code" href="group__capi.html#ga1d9cee57472b2c7623642f123b8f1781" title="False value. It is just an alias for 0.">Z3_FALSE</a>);
<a name="l00936"></a>00936 
<a name="l00937"></a>00937     <a class="code" href="group__capi.html#ga556eae80ed43ab13e1e7dc3b38c35200" title="Delete the given logical context.">Z3_del_context</a>(ctx);
<a name="l00938"></a>00938 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ga07ee56f1ada5226634e68a8b37989fbd"></a><!-- doxytag: member="test_capi.c::push_pop_example1" ref="ga07ee56f1ada5226634e68a8b37989fbd" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void push_pop_example1 </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Show how push &amp; pop can be used to create "backtracking" points. </p>
<p>This example also demonstrates how big numbers can be created in Z3. </p>

<p>Definition at line <a class="el" href="test__capi_8c_source.html#l00946">946</a> of file <a class="el" href="test__capi_8c_source.html">test_capi.c</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00947"></a>00947 {
<a name="l00948"></a>00948     Z3_context ctx;
<a name="l00949"></a>00949     Z3_sort int_sort;
<a name="l00950"></a>00950     Z3_symbol x_sym, y_sym;
<a name="l00951"></a>00951     Z3_ast x, y, big_number, three;
<a name="l00952"></a>00952     Z3_ast c1, c2, c3;
<a name="l00953"></a>00953 
<a name="l00954"></a>00954     printf(<span class="stringliteral">&quot;\npush_pop_example1\n&quot;</span>);
<a name="l00955"></a>00955     LOG_MSG(<span class="stringliteral">&quot;push_pop_example1&quot;</span>);
<a name="l00956"></a>00956 
<a name="l00957"></a>00957     ctx        = <a class="code" href="group__maxsat__ex.html#ga102b86f8b4829828c5c2d06c5d8b8489" title="Create a logical context. Enable model construction only.">mk_context</a>();
<a name="l00958"></a>00958 
<a name="l00959"></a>00959     <span class="comment">/* create a big number */</span>
<a name="l00960"></a>00960     int_sort   = <a class="code" href="group__capi.html#ga6cd426ab5748653b77d389fd3eac1015" title="Create the integer type.">Z3_mk_int_sort</a>(ctx);
<a name="l00961"></a>00961     big_number = <a class="code" href="group__capi.html#ga92e75c71f0d602c65b67ae8ae82dcb6a" title="Create a numeral of a given sort.">Z3_mk_numeral</a>(ctx, <span class="stringliteral">&quot;1000000000000000000000000000000000000000000000000000000&quot;</span>, int_sort);
<a name="l00962"></a>00962     
<a name="l00963"></a>00963     <span class="comment">/* create number 3 */</span>
<a name="l00964"></a>00964     three      = <a class="code" href="group__capi.html#ga92e75c71f0d602c65b67ae8ae82dcb6a" title="Create a numeral of a given sort.">Z3_mk_numeral</a>(ctx, <span class="stringliteral">&quot;3&quot;</span>, int_sort);
<a name="l00965"></a>00965 
<a name="l00966"></a>00966     <span class="comment">/* create x */</span>
<a name="l00967"></a>00967     x_sym      = <a class="code" href="group__capi.html#ga6b9ed981ba0180962928394fe828b0a7" title="Create a Z3 symbol using a C string.">Z3_mk_string_symbol</a>(ctx, <span class="stringliteral">&quot;x&quot;</span>);
<a name="l00968"></a>00968     x          = <a class="code" href="group__capi.html#ga093c9703393f33ae282ec5e8729354ef" title="Declare and create a constant.">Z3_mk_const</a>(ctx, x_sym, int_sort);
<a name="l00969"></a>00969 
<a name="l00970"></a>00970     <span class="comment">/* assert x &gt;= &quot;big number&quot; */</span>
<a name="l00971"></a>00971     c1         = <a class="code" href="group__capi.html#gad9245cbadb80b192323d01a8360fb942" title="Create greater than or equal to.">Z3_mk_ge</a>(ctx, x, big_number);
<a name="l00972"></a>00972     printf(<span class="stringliteral">&quot;assert: x &gt;= &#39;big number&#39;\n&quot;</span>);
<a name="l00973"></a>00973     <a class="code" href="group__capi.html#ga1a05ff73a564ae7256a2257048a4680a" title="Assert a constraint into the logical context.">Z3_assert_cnstr</a>(ctx, c1);
<a name="l00974"></a>00974 
<a name="l00975"></a>00975     <span class="comment">/* create a backtracking point */</span>
<a name="l00976"></a>00976     printf(<span class="stringliteral">&quot;push\n&quot;</span>);
<a name="l00977"></a>00977     <a class="code" href="group__capi.html#gad651ad68c7a060cbb5616349233cb10f" title="Create a backtracking point.">Z3_push</a>(ctx);
<a name="l00978"></a>00978 
<a name="l00979"></a>00979     printf(<span class="stringliteral">&quot;number of scopes: %d\n&quot;</span>, <a class="code" href="group__capi.html#ga676dc88a0b2ce9fb736be803bc3247f0" title="Retrieve the current scope level.">Z3_get_num_scopes</a>(ctx));
<a name="l00980"></a>00980 
<a name="l00981"></a>00981     <span class="comment">/* assert x &lt;= 3 */</span>
<a name="l00982"></a>00982     c2         = <a class="code" href="group__capi.html#gaa9a33d11096841f4e8c407f1578bc0bf" title="Create less than or equal to.">Z3_mk_le</a>(ctx, x, three);
<a name="l00983"></a>00983     printf(<span class="stringliteral">&quot;assert: x &lt;= 3\n&quot;</span>);
<a name="l00984"></a>00984     <a class="code" href="group__capi.html#ga1a05ff73a564ae7256a2257048a4680a" title="Assert a constraint into the logical context.">Z3_assert_cnstr</a>(ctx, c2);
<a name="l00985"></a>00985 
<a name="l00986"></a>00986     <span class="comment">/* context is inconsistent at this point */</span>
<a name="l00987"></a>00987     <a class="code" href="group__capi__ex.html#ga9dd6fa6c5fa72c0cd87eb5ec5a6c4965" title="Similar to check, but uses display_model instead of Z3_model_to_string.">check2</a>(ctx, Z3_L_FALSE);
<a name="l00988"></a>00988 
<a name="l00989"></a>00989     <span class="comment">/* backtrack: the constraint x &lt;= 3 will be removed, since it was</span>
<a name="l00990"></a>00990 <span class="comment">       asserted after the last Z3_push. */</span>
<a name="l00991"></a>00991     printf(<span class="stringliteral">&quot;pop\n&quot;</span>);
<a name="l00992"></a>00992     <a class="code" href="group__capi.html#gab2b3a542006c86c8d86dc37872f88b61" title="Backtrack.">Z3_pop</a>(ctx, 1);
<a name="l00993"></a>00993 
<a name="l00994"></a>00994     printf(<span class="stringliteral">&quot;number of scopes: %d\n&quot;</span>, <a class="code" href="group__capi.html#ga676dc88a0b2ce9fb736be803bc3247f0" title="Retrieve the current scope level.">Z3_get_num_scopes</a>(ctx));
<a name="l00995"></a>00995 
<a name="l00996"></a>00996 
<a name="l00997"></a>00997     <span class="comment">/* the context is consistent again. */</span>
<a name="l00998"></a>00998     <a class="code" href="group__capi__ex.html#ga9dd6fa6c5fa72c0cd87eb5ec5a6c4965" title="Similar to check, but uses display_model instead of Z3_model_to_string.">check2</a>(ctx, Z3_L_TRUE);
<a name="l00999"></a>00999 
<a name="l01000"></a>01000     <span class="comment">/* new constraints can be asserted... */</span>
<a name="l01001"></a>01001     
<a name="l01002"></a>01002     <span class="comment">/* create y */</span>
<a name="l01003"></a>01003     y_sym      = <a class="code" href="group__capi.html#ga6b9ed981ba0180962928394fe828b0a7" title="Create a Z3 symbol using a C string.">Z3_mk_string_symbol</a>(ctx, <span class="stringliteral">&quot;y&quot;</span>);
<a name="l01004"></a>01004     y          = <a class="code" href="group__capi.html#ga093c9703393f33ae282ec5e8729354ef" title="Declare and create a constant.">Z3_mk_const</a>(ctx, y_sym, int_sort);
<a name="l01005"></a>01005 
<a name="l01006"></a>01006     <span class="comment">/* assert y &gt; x */</span>
<a name="l01007"></a>01007     c3         = <a class="code" href="group__capi.html#ga46167b86067586bb742c0557d7babfd3" title="Create greater than.">Z3_mk_gt</a>(ctx, y, x);
<a name="l01008"></a>01008     printf(<span class="stringliteral">&quot;assert: y &gt; x\n&quot;</span>);
<a name="l01009"></a>01009     <a class="code" href="group__capi.html#ga1a05ff73a564ae7256a2257048a4680a" title="Assert a constraint into the logical context.">Z3_assert_cnstr</a>(ctx, c3);
<a name="l01010"></a>01010 
<a name="l01011"></a>01011     <span class="comment">/* the context is still consistent. */</span>
<a name="l01012"></a>01012     <a class="code" href="group__capi__ex.html#ga9dd6fa6c5fa72c0cd87eb5ec5a6c4965" title="Similar to check, but uses display_model instead of Z3_model_to_string.">check2</a>(ctx, Z3_L_TRUE);
<a name="l01013"></a>01013     
<a name="l01014"></a>01014     <a class="code" href="group__capi.html#ga556eae80ed43ab13e1e7dc3b38c35200" title="Delete the given logical context.">Z3_del_context</a>(ctx);
<a name="l01015"></a>01015 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ga06e4829a7db00856491745b17a4201b7"></a><!-- doxytag: member="test_capi.c::quantifier_example1" ref="ga06e4829a7db00856491745b17a4201b7" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void quantifier_example1 </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Prove that <code>f(x, y) = f(w, v) implies y = v</code> when <code>f</code> is injective in the second argument. </p>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="group__capi__ex.html#gaca2791e8333199e32873def86c8e465a" title="Assert the axiom: function f is injective in the i-th argument.">assert_inj_axiom</a>. </dd></dl>

<p>Definition at line <a class="el" href="test__capi_8c_source.html#l01023">1023</a> of file <a class="el" href="test__capi_8c_source.html">test_capi.c</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l01024"></a>01024 {
<a name="l01025"></a>01025     Z3_config  cfg;
<a name="l01026"></a>01026     Z3_context ctx;
<a name="l01027"></a>01027     Z3_sort       int_sort;
<a name="l01028"></a>01028     Z3_symbol         f_name;
<a name="l01029"></a>01029     Z3_sort       f_domain[2];
<a name="l01030"></a>01030     Z3_func_decl f;
<a name="l01031"></a>01031     Z3_ast            x, y, w, v, fxy, fwv;
<a name="l01032"></a>01032     Z3_ast            p1, p2, p3, not_p3;
<a name="l01033"></a>01033 
<a name="l01034"></a>01034     printf(<span class="stringliteral">&quot;\nquantifier_example1\n&quot;</span>);
<a name="l01035"></a>01035     LOG_MSG(<span class="stringliteral">&quot;quantifier_example1&quot;</span>);
<a name="l01036"></a>01036 
<a name="l01037"></a>01037     cfg = <a class="code" href="group__capi.html#ga7d6c40d9b79fe8a8851cc8540970787f" title="Create a configuration.">Z3_mk_config</a>();
<a name="l01038"></a>01038     <span class="comment">/* If quantified formulas are asserted in a logical context, then</span>
<a name="l01039"></a>01039 <span class="comment">       Z3 may return L_UNDEF. In this case, the model produced by Z3 should be viewed as a potential/candidate model.</span>
<a name="l01040"></a>01040 <span class="comment">    */</span>
<a name="l01041"></a>01041     <a class="code" href="group__capi.html#gab6f8f5d3d059be1ae2982902202b3a25" title="Set a configuration parameter.">Z3_set_param_value</a>(cfg, <span class="stringliteral">&quot;MODEL&quot;</span>, <span class="stringliteral">&quot;true&quot;</span>);
<a name="l01042"></a>01042     <span class="comment">/*</span>
<a name="l01043"></a>01043 <span class="comment">       The current model finder for quantified formulas cannot handle injectivity.</span>
<a name="l01044"></a>01044 <span class="comment">       So, we are limiting the number of iterations to avoid a long &quot;wait&quot;.</span>
<a name="l01045"></a>01045 <span class="comment">    */</span>
<a name="l01046"></a>01046     <a class="code" href="group__capi.html#gab6f8f5d3d059be1ae2982902202b3a25" title="Set a configuration parameter.">Z3_set_param_value</a>(cfg, <span class="stringliteral">&quot;MBQI_MAX_ITERATIONS&quot;</span>, <span class="stringliteral">&quot;10&quot;</span>);
<a name="l01047"></a>01047     ctx = <a class="code" href="group__capi__ex.html#ga4e884f4048e2a5937f97bb9667d6bae6" title="Create a logical context.">mk_context_custom</a>(cfg, <a class="code" href="group__capi__ex.html#ga82e5abe89b86f8ab9d95ac826189b4fc" title="Simpler error handler.">error_handler</a>);
<a name="l01048"></a>01048     <a class="code" href="group__capi.html#ga5e620acf5d55d0271097c9bb97219774" title="Delete the given configuration object.">Z3_del_config</a>(cfg);
<a name="l01049"></a>01049 
<a name="l01050"></a>01050     <span class="comment">/* declare function f */</span>
<a name="l01051"></a>01051     int_sort    = <a class="code" href="group__capi.html#ga6cd426ab5748653b77d389fd3eac1015" title="Create the integer type.">Z3_mk_int_sort</a>(ctx);
<a name="l01052"></a>01052     f_name      = <a class="code" href="group__capi.html#ga6b9ed981ba0180962928394fe828b0a7" title="Create a Z3 symbol using a C string.">Z3_mk_string_symbol</a>(ctx, <span class="stringliteral">&quot;f&quot;</span>);
<a name="l01053"></a>01053     f_domain[0] = int_sort;
<a name="l01054"></a>01054     f_domain[1] = int_sort;
<a name="l01055"></a>01055     f           = <a class="code" href="group__capi.html#gaa5c5e2602a44d5f1373f077434859ca2" title="Declare a constant or function.">Z3_mk_func_decl</a>(ctx, f_name, 2, f_domain, int_sort);
<a name="l01056"></a>01056   
<a name="l01057"></a>01057     <span class="comment">/* assert that f is injective in the second argument. */</span>
<a name="l01058"></a>01058     <a class="code" href="group__capi__ex.html#gaca2791e8333199e32873def86c8e465a" title="Assert the axiom: function f is injective in the i-th argument.">assert_inj_axiom</a>(ctx, f, 1);
<a name="l01059"></a>01059     
<a name="l01060"></a>01060     <span class="comment">/* create x, y, v, w, fxy, fwv */</span>
<a name="l01061"></a>01061     x           = <a class="code" href="group__capi__ex.html#gaa7563e3fd1dd6951e4c6afb7aee7f3ee" title="Create an integer variable using the given name.">mk_int_var</a>(ctx, <span class="stringliteral">&quot;x&quot;</span>);
<a name="l01062"></a>01062     y           = <a class="code" href="group__capi__ex.html#gaa7563e3fd1dd6951e4c6afb7aee7f3ee" title="Create an integer variable using the given name.">mk_int_var</a>(ctx, <span class="stringliteral">&quot;y&quot;</span>);
<a name="l01063"></a>01063     v           = <a class="code" href="group__capi__ex.html#gaa7563e3fd1dd6951e4c6afb7aee7f3ee" title="Create an integer variable using the given name.">mk_int_var</a>(ctx, <span class="stringliteral">&quot;v&quot;</span>);
<a name="l01064"></a>01064     w           = <a class="code" href="group__capi__ex.html#gaa7563e3fd1dd6951e4c6afb7aee7f3ee" title="Create an integer variable using the given name.">mk_int_var</a>(ctx, <span class="stringliteral">&quot;w&quot;</span>);
<a name="l01065"></a>01065     fxy         = <a class="code" href="group__capi__ex.html#gaa498f025e510b9564ad6afe4c63a743c" title="Create the binary function application: (f x y).">mk_binary_app</a>(ctx, f, x, y);
<a name="l01066"></a>01066     fwv         = <a class="code" href="group__capi__ex.html#gaa498f025e510b9564ad6afe4c63a743c" title="Create the binary function application: (f x y).">mk_binary_app</a>(ctx, f, w, v);
<a name="l01067"></a>01067     
<a name="l01068"></a>01068     <span class="comment">/* assert f(x, y) = f(w, v) */</span>
<a name="l01069"></a>01069     p1          = <a class="code" href="group__capi.html#ga95a19ce675b70e22bb0401f7137af37c" title="Create an AST node representing l = r.">Z3_mk_eq</a>(ctx, fxy, fwv);
<a name="l01070"></a>01070     <a class="code" href="group__capi.html#ga1a05ff73a564ae7256a2257048a4680a" title="Assert a constraint into the logical context.">Z3_assert_cnstr</a>(ctx, p1);
<a name="l01071"></a>01071 
<a name="l01072"></a>01072     <span class="comment">/* prove f(x, y) = f(w, v) implies y = v */</span>
<a name="l01073"></a>01073     p2          = <a class="code" href="group__capi.html#ga95a19ce675b70e22bb0401f7137af37c" title="Create an AST node representing l = r.">Z3_mk_eq</a>(ctx, y, v);
<a name="l01074"></a>01074     printf(<span class="stringliteral">&quot;prove: f(x, y) = f(w, v) implies y = v\n&quot;</span>);
<a name="l01075"></a>01075     <a class="code" href="group__capi__ex.html#gac1c8ca24db543be3c7c8ada6e3cad89b" title="Prove that the constraints already asserted into the logical context implies the...">prove</a>(ctx, p2, <a class="code" href="group__capi.html#gad86c8730a2e4e61bac585b240a6288d4" title="True value. It is just an alias for 1.">Z3_TRUE</a>);
<a name="l01076"></a>01076 
<a name="l01077"></a>01077     <span class="comment">/* disprove f(x, y) = f(w, v) implies x = w */</span>
<a name="l01078"></a>01078     <span class="comment">/* using check2 instead of prove */</span>
<a name="l01079"></a>01079     p3          = <a class="code" href="group__capi.html#ga95a19ce675b70e22bb0401f7137af37c" title="Create an AST node representing l = r.">Z3_mk_eq</a>(ctx, x, w);
<a name="l01080"></a>01080     not_p3      = <a class="code" href="group__capi.html#ga3329538091996eb7b3dc677760a61072" title="Create an AST node representing not(a).">Z3_mk_not</a>(ctx, p3);
<a name="l01081"></a>01081     <a class="code" href="group__capi.html#ga1a05ff73a564ae7256a2257048a4680a" title="Assert a constraint into the logical context.">Z3_assert_cnstr</a>(ctx, not_p3);
<a name="l01082"></a>01082     printf(<span class="stringliteral">&quot;disprove: f(x, y) = f(w, v) implies x = w\n&quot;</span>);
<a name="l01083"></a>01083     printf(<span class="stringliteral">&quot;that is: not(f(x, y) = f(w, v) implies x = w) is satisfiable\n&quot;</span>);
<a name="l01084"></a>01084     <a class="code" href="group__capi__ex.html#ga9dd6fa6c5fa72c0cd87eb5ec5a6c4965" title="Similar to check, but uses display_model instead of Z3_model_to_string.">check2</a>(ctx, Z3_L_UNDEF);
<a name="l01085"></a>01085     printf(<span class="stringliteral">&quot;reason for last failure: %d (7 = quantifiers)\n&quot;</span>, 
<a name="l01086"></a>01086            <a class="code" href="group__capi.html#ga3d00a3a21612b8279e4646e8117defb9" title="Retrieve reason for search failure.">Z3_get_search_failure</a>(ctx));
<a name="l01087"></a>01087     <span class="keywordflow">if</span> (<a class="code" href="group__capi.html#ga3d00a3a21612b8279e4646e8117defb9" title="Retrieve reason for search failure.">Z3_get_search_failure</a>(ctx) != Z3_QUANTIFIERS) {
<a name="l01088"></a>01088         <a class="code" href="group__capi__ex.html#gaa325ae9cdfce0e749a254dfffc6c6ace" title="exit gracefully in case of error.">exitf</a>(<span class="stringliteral">&quot;unexpected result&quot;</span>);
<a name="l01089"></a>01089     }
<a name="l01090"></a>01090 
<a name="l01091"></a>01091     <a class="code" href="group__capi.html#ga556eae80ed43ab13e1e7dc3b38c35200" title="Delete the given logical context.">Z3_del_context</a>(ctx);
<a name="l01092"></a>01092 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ga25760b66b7ad43e3a902797b5924df73"></a><!-- doxytag: member="test_capi.c::reassert_cnstr" ref="ga25760b66b7ad43e3a902797b5924df73" args="(Z3_ext_context ctx, unsigned id)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void reassert_cnstr </td>
          <td>(</td>
          <td class="paramtype">Z3_ext_context&nbsp;</td>
          <td class="paramname"> <em>ctx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&nbsp;</td>
          <td class="paramname"> <em>id</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Reassert a constraint retracted using <a class="el" href="group__capi__ex.html#ga6246dc8b8cf263b38cd698f49a0470b9" title="Retract an constraint asserted using assert_retractable_cnstr.">retract_cnstr</a>. </p>

<p>Definition at line <a class="el" href="test__capi_8c_source.html#l02377">2377</a> of file <a class="el" href="test__capi_8c_source.html">test_capi.c</a>.</p>

<p>Referenced by <a class="el" href="test__capi_8c_source.html#l02435">incremental_example1()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l02377"></a>02377                                                      {
<a name="l02378"></a>02378     <span class="keywordflow">if</span> (<span class="keywordtype">id</span> &gt;= ctx-&gt;m_num_answer_literals) {
<a name="l02379"></a>02379         <a class="code" href="group__capi__ex.html#gaa325ae9cdfce0e749a254dfffc6c6ace" title="exit gracefully in case of error.">exitf</a>(<span class="stringliteral">&quot;invalid constraint id.&quot;</span>);
<a name="l02380"></a>02380     }
<a name="l02381"></a>02381     ctx-&gt;m_retracted[id] = <a class="code" href="group__capi.html#ga1d9cee57472b2c7623642f123b8f1781" title="False value. It is just an alias for 0.">Z3_FALSE</a>;
<a name="l02382"></a>02382 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="gabd06302d2f38c978cd27532d1d368532"></a><!-- doxytag: member="test_capi.c::reference_counter_example" ref="gabd06302d2f38c978cd27532d1d368532" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void reference_counter_example </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Simple example showing how to use reference counters in Z3 to manage memory efficiently. </p>

<p>Definition at line <a class="el" href="test__capi_8c_source.html#l02496">2496</a> of file <a class="el" href="test__capi_8c_source.html">test_capi.c</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l02496"></a>02496                                  {
<a name="l02497"></a>02497     Z3_config cfg;
<a name="l02498"></a>02498     Z3_context ctx;
<a name="l02499"></a>02499     Z3_sort ty;
<a name="l02500"></a>02500     Z3_ast x, y, x_xor_y;
<a name="l02501"></a>02501     Z3_symbol sx, sy;
<a name="l02502"></a>02502 
<a name="l02503"></a>02503     printf(<span class="stringliteral">&quot;\nreference_counter_example\n&quot;</span>);
<a name="l02504"></a>02504     LOG_MSG(<span class="stringliteral">&quot;reference_counter_example&quot;</span>);
<a name="l02505"></a>02505 
<a name="l02506"></a>02506     cfg                = <a class="code" href="group__capi.html#ga7d6c40d9b79fe8a8851cc8540970787f" title="Create a configuration.">Z3_mk_config</a>();
<a name="l02507"></a>02507     <a class="code" href="group__capi.html#gab6f8f5d3d059be1ae2982902202b3a25" title="Set a configuration parameter.">Z3_set_param_value</a>(cfg, <span class="stringliteral">&quot;MODEL&quot;</span>, <span class="stringliteral">&quot;true&quot;</span>);
<a name="l02508"></a>02508     <span class="comment">// Create a Z3 context where the user is reponsible for managing</span>
<a name="l02509"></a>02509     <span class="comment">// Z3_ast reference counters.</span>
<a name="l02510"></a>02510     ctx                = <a class="code" href="group__capi.html#ga98acd59d946eceb4f261bc50489216ee" title="Create a context using the given configuration. This function is similar to Z3_mk_context...">Z3_mk_context_rc</a>(cfg);
<a name="l02511"></a>02511     <a class="code" href="group__capi.html#ga5e620acf5d55d0271097c9bb97219774" title="Delete the given configuration object.">Z3_del_config</a>(cfg); 
<a name="l02512"></a>02512 
<a name="l02513"></a>02513     ty      = <a class="code" href="group__capi.html#gacdc73510b69a010b71793d429015f342" title="Create the Boolean type.">Z3_mk_bool_sort</a>(ctx);
<a name="l02514"></a>02514     <a class="code" href="group__capi.html#ga4a11514494fbf3467b89f0a80ac81e7a" title="Increment the reference counter of the given AST. The context c should have been...">Z3_inc_ref</a>(ctx, <a class="code" href="group__capi.html#ga57c27f2c4e9eccf17072a84c6cecb1db" title="Convert a Z3_sort into Z3_ast. This is just type casting.">Z3_sort_to_ast</a>(ctx, ty)); <span class="comment">// Z3_sort_to_ast(ty) is just syntax sugar for ((Z3_ast) ty)</span>
<a name="l02515"></a>02515     sx      = <a class="code" href="group__capi.html#ga6b9ed981ba0180962928394fe828b0a7" title="Create a Z3 symbol using a C string.">Z3_mk_string_symbol</a>(ctx, <span class="stringliteral">&quot;x&quot;</span>);
<a name="l02516"></a>02516     <span class="comment">// Z3_symbol is not a Z3_ast. No reference counting is not needed.</span>
<a name="l02517"></a>02517     x       = <a class="code" href="group__capi.html#ga093c9703393f33ae282ec5e8729354ef" title="Declare and create a constant.">Z3_mk_const</a>(ctx, sx, ty);
<a name="l02518"></a>02518     <a class="code" href="group__capi.html#ga4a11514494fbf3467b89f0a80ac81e7a" title="Increment the reference counter of the given AST. The context c should have been...">Z3_inc_ref</a>(ctx, x);
<a name="l02519"></a>02519     sy      = <a class="code" href="group__capi.html#ga6b9ed981ba0180962928394fe828b0a7" title="Create a Z3 symbol using a C string.">Z3_mk_string_symbol</a>(ctx, <span class="stringliteral">&quot;y&quot;</span>);
<a name="l02520"></a>02520     y       = <a class="code" href="group__capi.html#ga093c9703393f33ae282ec5e8729354ef" title="Declare and create a constant.">Z3_mk_const</a>(ctx, sy, ty);
<a name="l02521"></a>02521     <a class="code" href="group__capi.html#ga4a11514494fbf3467b89f0a80ac81e7a" title="Increment the reference counter of the given AST. The context c should have been...">Z3_inc_ref</a>(ctx, y);
<a name="l02522"></a>02522     <span class="comment">// ty is not needed anymore.</span>
<a name="l02523"></a>02523     <a class="code" href="group__capi.html#ga9cd52225142c085630495044acc68bd2" title="Decrement the reference counter of the given AST. The context c should have been...">Z3_dec_ref</a>(ctx, <a class="code" href="group__capi.html#ga57c27f2c4e9eccf17072a84c6cecb1db" title="Convert a Z3_sort into Z3_ast. This is just type casting.">Z3_sort_to_ast</a>(ctx, ty)); 
<a name="l02524"></a>02524     x_xor_y = <a class="code" href="group__capi.html#gacc6d1b848032dec0c4617b594d4229ec" title="Create an AST node representing t1 xor t2.">Z3_mk_xor</a>(ctx, x, y);
<a name="l02525"></a>02525     <a class="code" href="group__capi.html#ga4a11514494fbf3467b89f0a80ac81e7a" title="Increment the reference counter of the given AST. The context c should have been...">Z3_inc_ref</a>(ctx, x_xor_y);
<a name="l02526"></a>02526     <span class="comment">// x and y are not needed anymore.</span>
<a name="l02527"></a>02527     <a class="code" href="group__capi.html#ga9cd52225142c085630495044acc68bd2" title="Decrement the reference counter of the given AST. The context c should have been...">Z3_dec_ref</a>(ctx, x); 
<a name="l02528"></a>02528     <a class="code" href="group__capi.html#ga9cd52225142c085630495044acc68bd2" title="Decrement the reference counter of the given AST. The context c should have been...">Z3_dec_ref</a>(ctx, y);
<a name="l02529"></a>02529     <a class="code" href="group__capi.html#ga1a05ff73a564ae7256a2257048a4680a" title="Assert a constraint into the logical context.">Z3_assert_cnstr</a>(ctx, x_xor_y);
<a name="l02530"></a>02530     <span class="comment">// x_or_y is not needed anymore.</span>
<a name="l02531"></a>02531     <a class="code" href="group__capi.html#ga9cd52225142c085630495044acc68bd2" title="Decrement the reference counter of the given AST. The context c should have been...">Z3_dec_ref</a>(ctx, x_xor_y); 
<a name="l02532"></a>02532     
<a name="l02533"></a>02533     printf(<span class="stringliteral">&quot;model for: x xor y\n&quot;</span>);
<a name="l02534"></a>02534     <a class="code" href="group__capi__ex.html#ga4ac4375063bd700cce15158ba6e761be" title="Check whether the logical context is satisfiable, and compare the result with the...">check</a>(ctx, Z3_L_TRUE);
<a name="l02535"></a>02535 
<a name="l02536"></a>02536     <span class="comment">// Test push &amp; pop</span>
<a name="l02537"></a>02537     <a class="code" href="group__capi.html#gad651ad68c7a060cbb5616349233cb10f" title="Create a backtracking point.">Z3_push</a>(ctx);
<a name="l02538"></a>02538     <a class="code" href="group__capi.html#gab2b3a542006c86c8d86dc37872f88b61" title="Backtrack.">Z3_pop</a>(ctx, 1);
<a name="l02539"></a>02539 
<a name="l02540"></a>02540     <a class="code" href="group__capi.html#ga556eae80ed43ab13e1e7dc3b38c35200" title="Delete the given logical context.">Z3_del_context</a>(ctx);
<a name="l02541"></a>02541 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ga6246dc8b8cf263b38cd698f49a0470b9"></a><!-- doxytag: member="test_capi.c::retract_cnstr" ref="ga6246dc8b8cf263b38cd698f49a0470b9" args="(Z3_ext_context ctx, unsigned id)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void retract_cnstr </td>
          <td>(</td>
          <td class="paramtype">Z3_ext_context&nbsp;</td>
          <td class="paramname"> <em>ctx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&nbsp;</td>
          <td class="paramname"> <em>id</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Retract an constraint asserted using <a class="el" href="group__capi__ex.html#ga2ded843bd7ba3cf143ee23fd6552ad63" title="Create a retractable constraint.">assert_retractable_cnstr</a>. </p>

<p>Definition at line <a class="el" href="test__capi_8c_source.html#l02367">2367</a> of file <a class="el" href="test__capi_8c_source.html">test_capi.c</a>.</p>

<p>Referenced by <a class="el" href="test__capi_8c_source.html#l02435">incremental_example1()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l02367"></a>02367                                                     {
<a name="l02368"></a>02368     <span class="keywordflow">if</span> (<span class="keywordtype">id</span> &gt;= ctx-&gt;m_num_answer_literals) {
<a name="l02369"></a>02369         <a class="code" href="group__capi__ex.html#gaa325ae9cdfce0e749a254dfffc6c6ace" title="exit gracefully in case of error.">exitf</a>(<span class="stringliteral">&quot;invalid constraint id.&quot;</span>);
<a name="l02370"></a>02370     }
<a name="l02371"></a>02371     ctx-&gt;m_retracted[id] = <a class="code" href="group__capi.html#gad86c8730a2e4e61bac585b240a6288d4" title="True value. It is just an alias for 1.">Z3_TRUE</a>;
<a name="l02372"></a>02372 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="gab7c1e72848c0e19ca409fc7acd888310"></a><!-- doxytag: member="test_capi.c::simple_example" ref="gab7c1e72848c0e19ca409fc7acd888310" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void simple_example </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>"Hello world" example: create a Z3 logical context, and delete it. </p>

<p>Definition at line <a class="el" href="test__capi_8c_source.html#l00663">663</a> of file <a class="el" href="test__capi_8c_source.html">test_capi.c</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00664"></a>00664 {
<a name="l00665"></a>00665     Z3_context ctx;
<a name="l00666"></a>00666     LOG_MSG(<span class="stringliteral">&quot;simple_example&quot;</span>);
<a name="l00667"></a>00667     printf(<span class="stringliteral">&quot;\nsimple_example\n&quot;</span>);
<a name="l00668"></a>00668  
<a name="l00669"></a>00669     ctx = <a class="code" href="group__maxsat__ex.html#ga102b86f8b4829828c5c2d06c5d8b8489" title="Create a logical context. Enable model construction only.">mk_context</a>();
<a name="l00670"></a>00670 
<a name="l00671"></a>00671     <span class="comment">/* do something with the context */</span>
<a name="l00672"></a>00672     printf(<span class="stringliteral">&quot;CONTEXT:\n%sEND OF CONTEXT\n&quot;</span>, <a class="code" href="group__capi.html#ga165e38ddfc928f586cb738cdf6c5f216" title="Convert the given logical context into a string.">Z3_context_to_string</a>(ctx));
<a name="l00673"></a>00673 
<a name="l00674"></a>00674     <span class="comment">/* delete logical context */</span>
<a name="l00675"></a>00675     <a class="code" href="group__capi.html#ga556eae80ed43ab13e1e7dc3b38c35200" title="Delete the given logical context.">Z3_del_context</a>(ctx);
<a name="l00676"></a>00676 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ga748ec8e9525340e9237dee62cd589672"></a><!-- doxytag: member="test_capi.c::smt2parser_example" ref="ga748ec8e9525340e9237dee62cd589672" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void smt2parser_example </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Demonstrates how to use SMT2 parser. </p>

<p>Definition at line <a class="el" href="test__capi_8c_source.html#l02546">2546</a> of file <a class="el" href="test__capi_8c_source.html">test_capi.c</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l02546"></a>02546                           {
<a name="l02547"></a>02547     Z3_context ctx;
<a name="l02548"></a>02548     Z3_ast fs;
<a name="l02549"></a>02549     printf(<span class="stringliteral">&quot;\nsmt2parser_example\n&quot;</span>);
<a name="l02550"></a>02550     LOG_MSG(<span class="stringliteral">&quot;smt2parser_example&quot;</span>);
<a name="l02551"></a>02551 
<a name="l02552"></a>02552     ctx = <a class="code" href="group__maxsat__ex.html#ga102b86f8b4829828c5c2d06c5d8b8489" title="Create a logical context. Enable model construction only.">mk_context</a>();
<a name="l02553"></a>02553     fs  = <a class="code" href="group__capi.html#ga666126cb89d0cc64027e58d13960accf" title="Parse the given string using the SMT-LIB2 parser.">Z3_parse_smtlib2_string</a>(ctx, <span class="stringliteral">&quot;(declare-fun a () (_ BitVec 8)) (assert (bvuge a #x10)) (assert (bvule a #xf0))&quot;</span>, 0, 0, 0, 0, 0, 0);
<a name="l02554"></a>02554     printf(<span class="stringliteral">&quot;formulas: %s\n&quot;</span>, <a class="code" href="group__capi.html#gab1aa4b78298fe00b3167bf7bfd88aea3" title="Convert the given AST node into a string.">Z3_ast_to_string</a>(ctx, fs));
<a name="l02555"></a>02555     <a class="code" href="group__capi.html#ga556eae80ed43ab13e1e7dc3b38c35200" title="Delete the given logical context.">Z3_del_context</a>(ctx);
<a name="l02556"></a>02556 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="gabd85b3bf5fb4c602b1852338c9340931"></a><!-- doxytag: member="test_capi.c::substitute_example" ref="gabd85b3bf5fb4c602b1852338c9340931" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void substitute_example </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Demonstrates how to use the function <code>Z3_substitute</code> to replace subexpressions in a Z3 AST. </p>

<p>Definition at line <a class="el" href="test__capi_8c_source.html#l02561">2561</a> of file <a class="el" href="test__capi_8c_source.html">test_capi.c</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l02561"></a>02561                           {
<a name="l02562"></a>02562     Z3_context ctx;
<a name="l02563"></a>02563     Z3_sort int_ty;
<a name="l02564"></a>02564     Z3_ast a, b;
<a name="l02565"></a>02565     Z3_func_decl f;
<a name="l02566"></a>02566     Z3_func_decl g;
<a name="l02567"></a>02567     Z3_ast fab, ga, ffabga, r;
<a name="l02568"></a>02568 
<a name="l02569"></a>02569     printf(<span class="stringliteral">&quot;\nsubstitute_example\n&quot;</span>);
<a name="l02570"></a>02570     LOG_MSG(<span class="stringliteral">&quot;substitute_example&quot;</span>);
<a name="l02571"></a>02571 
<a name="l02572"></a>02572     ctx = <a class="code" href="group__maxsat__ex.html#ga102b86f8b4829828c5c2d06c5d8b8489" title="Create a logical context. Enable model construction only.">mk_context</a>();
<a name="l02573"></a>02573     int_ty = <a class="code" href="group__capi.html#ga6cd426ab5748653b77d389fd3eac1015" title="Create the integer type.">Z3_mk_int_sort</a>(ctx);
<a name="l02574"></a>02574     a = <a class="code" href="group__capi__ex.html#gaa7563e3fd1dd6951e4c6afb7aee7f3ee" title="Create an integer variable using the given name.">mk_int_var</a>(ctx,<span class="stringliteral">&quot;a&quot;</span>);
<a name="l02575"></a>02575     b = <a class="code" href="group__capi__ex.html#gaa7563e3fd1dd6951e4c6afb7aee7f3ee" title="Create an integer variable using the given name.">mk_int_var</a>(ctx,<span class="stringliteral">&quot;b&quot;</span>);
<a name="l02576"></a>02576     { 
<a name="l02577"></a>02577         Z3_sort f_domain[2] = { int_ty, int_ty };
<a name="l02578"></a>02578         f = <a class="code" href="group__capi.html#gaa5c5e2602a44d5f1373f077434859ca2" title="Declare a constant or function.">Z3_mk_func_decl</a>(ctx, <a class="code" href="group__capi.html#ga6b9ed981ba0180962928394fe828b0a7" title="Create a Z3 symbol using a C string.">Z3_mk_string_symbol</a>(ctx, <span class="stringliteral">&quot;f&quot;</span>), 2, f_domain, int_ty);
<a name="l02579"></a>02579     }
<a name="l02580"></a>02580     g = <a class="code" href="group__capi.html#gaa5c5e2602a44d5f1373f077434859ca2" title="Declare a constant or function.">Z3_mk_func_decl</a>(ctx, <a class="code" href="group__capi.html#ga6b9ed981ba0180962928394fe828b0a7" title="Create a Z3 symbol using a C string.">Z3_mk_string_symbol</a>(ctx, <span class="stringliteral">&quot;g&quot;</span>), 1, &amp;int_ty, int_ty);
<a name="l02581"></a>02581     { 
<a name="l02582"></a>02582         Z3_ast args[2] = { a, b };
<a name="l02583"></a>02583         fab = <a class="code" href="group__capi.html#ga33a202d86bf628bfab9b6f437536cebe" title="Create a constant or function application.">Z3_mk_app</a>(ctx, f, 2, args);
<a name="l02584"></a>02584     }
<a name="l02585"></a>02585     ga = <a class="code" href="group__capi.html#ga33a202d86bf628bfab9b6f437536cebe" title="Create a constant or function application.">Z3_mk_app</a>(ctx, g, 1, &amp;a);
<a name="l02586"></a>02586     {
<a name="l02587"></a>02587         Z3_ast args[2] = { fab, ga };
<a name="l02588"></a>02588         ffabga = <a class="code" href="group__capi.html#ga33a202d86bf628bfab9b6f437536cebe" title="Create a constant or function application.">Z3_mk_app</a>(ctx, f, 2, args);
<a name="l02589"></a>02589     }
<a name="l02590"></a>02590     <span class="comment">// Replace b -&gt; 0, g(a) -&gt; 1 in f(f(a, b), g(a))</span>
<a name="l02591"></a>02591     {
<a name="l02592"></a>02592         Z3_ast zero = <a class="code" href="group__capi.html#ga92e75c71f0d602c65b67ae8ae82dcb6a" title="Create a numeral of a given sort.">Z3_mk_numeral</a>(ctx, <span class="stringliteral">&quot;0&quot;</span>, int_ty);
<a name="l02593"></a>02593         Z3_ast one  = <a class="code" href="group__capi.html#ga92e75c71f0d602c65b67ae8ae82dcb6a" title="Create a numeral of a given sort.">Z3_mk_numeral</a>(ctx, <span class="stringliteral">&quot;1&quot;</span>, int_ty);
<a name="l02594"></a>02594         Z3_ast from[2] = { b, ga };
<a name="l02595"></a>02595         Z3_ast to[2] = { zero, one };
<a name="l02596"></a>02596         r = <a class="code" href="group__capi.html#gaa92c98c0357b0387a436d67ba19ec39f" title="Substitute every occurrence of from[i] in a with to[i], for i smaller than num_exprs...">Z3_substitute</a>(ctx, ffabga, 2, from, to);
<a name="l02597"></a>02597     }
<a name="l02598"></a>02598     <span class="comment">// Display r</span>
<a name="l02599"></a>02599     printf(<span class="stringliteral">&quot;substitution result: %s\n&quot;</span>, <a class="code" href="group__capi.html#gab1aa4b78298fe00b3167bf7bfd88aea3" title="Convert the given AST node into a string.">Z3_ast_to_string</a>(ctx, r));
<a name="l02600"></a>02600     <a class="code" href="group__capi.html#ga556eae80ed43ab13e1e7dc3b38c35200" title="Delete the given logical context.">Z3_del_context</a>(ctx);
<a name="l02601"></a>02601 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="gaeee5b7989f898698a0772e064a9ac149"></a><!-- doxytag: member="test_capi.c::substitute_vars_example" ref="gaeee5b7989f898698a0772e064a9ac149" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void substitute_vars_example </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Demonstrates how to use the function <code>Z3_substitute_vars</code> to replace (free) variables with expressions in a Z3 AST. </p>

<p>Definition at line <a class="el" href="test__capi_8c_source.html#l02606">2606</a> of file <a class="el" href="test__capi_8c_source.html">test_capi.c</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l02606"></a>02606                                {
<a name="l02607"></a>02607     Z3_context ctx;
<a name="l02608"></a>02608     Z3_sort int_ty;
<a name="l02609"></a>02609     Z3_ast x0, x1;
<a name="l02610"></a>02610     Z3_ast a, b, gb;
<a name="l02611"></a>02611     Z3_func_decl f;
<a name="l02612"></a>02612     Z3_func_decl g;
<a name="l02613"></a>02613     Z3_ast f01, ff010, r;
<a name="l02614"></a>02614 
<a name="l02615"></a>02615     printf(<span class="stringliteral">&quot;\nsubstitute_vars_example\n&quot;</span>);
<a name="l02616"></a>02616     LOG_MSG(<span class="stringliteral">&quot;substitute_vars_example&quot;</span>);
<a name="l02617"></a>02617 
<a name="l02618"></a>02618     ctx = <a class="code" href="group__maxsat__ex.html#ga102b86f8b4829828c5c2d06c5d8b8489" title="Create a logical context. Enable model construction only.">mk_context</a>();
<a name="l02619"></a>02619     int_ty = <a class="code" href="group__capi.html#ga6cd426ab5748653b77d389fd3eac1015" title="Create the integer type.">Z3_mk_int_sort</a>(ctx);
<a name="l02620"></a>02620     x0 = <a class="code" href="group__capi.html#ga1d4da8849fca699b345322f8ee1fa31e" title="Create a bound variable.">Z3_mk_bound</a>(ctx, 0, int_ty);
<a name="l02621"></a>02621     x1 = <a class="code" href="group__capi.html#ga1d4da8849fca699b345322f8ee1fa31e" title="Create a bound variable.">Z3_mk_bound</a>(ctx, 1, int_ty);
<a name="l02622"></a>02622     { 
<a name="l02623"></a>02623         Z3_sort f_domain[2] = { int_ty, int_ty };
<a name="l02624"></a>02624         f = <a class="code" href="group__capi.html#gaa5c5e2602a44d5f1373f077434859ca2" title="Declare a constant or function.">Z3_mk_func_decl</a>(ctx, <a class="code" href="group__capi.html#ga6b9ed981ba0180962928394fe828b0a7" title="Create a Z3 symbol using a C string.">Z3_mk_string_symbol</a>(ctx, <span class="stringliteral">&quot;f&quot;</span>), 2, f_domain, int_ty);
<a name="l02625"></a>02625     }
<a name="l02626"></a>02626     g = <a class="code" href="group__capi.html#gaa5c5e2602a44d5f1373f077434859ca2" title="Declare a constant or function.">Z3_mk_func_decl</a>(ctx, <a class="code" href="group__capi.html#ga6b9ed981ba0180962928394fe828b0a7" title="Create a Z3 symbol using a C string.">Z3_mk_string_symbol</a>(ctx, <span class="stringliteral">&quot;g&quot;</span>), 1, &amp;int_ty, int_ty);
<a name="l02627"></a>02627     { 
<a name="l02628"></a>02628         Z3_ast args[2] = { x0, x1 };
<a name="l02629"></a>02629         f01 = <a class="code" href="group__capi.html#ga33a202d86bf628bfab9b6f437536cebe" title="Create a constant or function application.">Z3_mk_app</a>(ctx, f, 2, args);
<a name="l02630"></a>02630     }
<a name="l02631"></a>02631     {
<a name="l02632"></a>02632         Z3_ast args[2] = { f01, x0 };
<a name="l02633"></a>02633         ff010 = <a class="code" href="group__capi.html#ga33a202d86bf628bfab9b6f437536cebe" title="Create a constant or function application.">Z3_mk_app</a>(ctx, f, 2, args);
<a name="l02634"></a>02634     }
<a name="l02635"></a>02635     a = <a class="code" href="group__capi__ex.html#gaa7563e3fd1dd6951e4c6afb7aee7f3ee" title="Create an integer variable using the given name.">mk_int_var</a>(ctx, <span class="stringliteral">&quot;a&quot;</span>);
<a name="l02636"></a>02636     b = <a class="code" href="group__capi__ex.html#gaa7563e3fd1dd6951e4c6afb7aee7f3ee" title="Create an integer variable using the given name.">mk_int_var</a>(ctx, <span class="stringliteral">&quot;b&quot;</span>);
<a name="l02637"></a>02637     gb = <a class="code" href="group__capi.html#ga33a202d86bf628bfab9b6f437536cebe" title="Create a constant or function application.">Z3_mk_app</a>(ctx, g, 1, &amp;b);
<a name="l02638"></a>02638     <span class="comment">// Replace x0 -&gt; a, x1 -&gt; g(b) in f(f(x0,x1),x0)</span>
<a name="l02639"></a>02639     {
<a name="l02640"></a>02640         Z3_ast to[2] = { a, gb };
<a name="l02641"></a>02641         r = <a class="code" href="group__capi.html#ga5c5c9197923791fbeb9ac6c5cfdbf19f" title="Substitute the free variables in a with the expressions in to. For every i smaller...">Z3_substitute_vars</a>(ctx, ff010, 2, to);
<a name="l02642"></a>02642     }
<a name="l02643"></a>02643     <span class="comment">// Display r</span>
<a name="l02644"></a>02644     printf(<span class="stringliteral">&quot;substitution result: %s\n&quot;</span>, <a class="code" href="group__capi.html#gab1aa4b78298fe00b3167bf7bfd88aea3" title="Convert the given AST node into a string.">Z3_ast_to_string</a>(ctx, r));
<a name="l02645"></a>02645     <a class="code" href="group__capi.html#ga556eae80ed43ab13e1e7dc3b38c35200" title="Delete the given logical context.">Z3_del_context</a>(ctx);
<a name="l02646"></a>02646 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="gaa6d66d26409a97ec721d1fe6814757c9"></a><!-- doxytag: member="test_capi.c::throw_z3_error" ref="gaa6d66d26409a97ec721d1fe6814757c9" args="(Z3_context c, Z3_error_code e)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void throw_z3_error </td>
          <td>(</td>
          <td class="paramtype">Z3_context&nbsp;</td>
          <td class="paramname"> <em>c</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__capi.html#gaa9f9e7b1b5b81381fab96debbaaa638f">Z3_error_code</a>&nbsp;</td>
          <td class="paramname"> <em>e</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Low tech exceptions. </p>
<p>In high-level programming languages, an error handler can throw an exception. </p>

<p>Definition at line <a class="el" href="test__capi_8c_source.html#l00057">57</a> of file <a class="el" href="test__capi_8c_source.html">test_capi.c</a>.</p>

<p>Referenced by <a class="el" href="test__capi_8c_source.html#l01528">error_code_example2()</a>, <a class="el" href="test__capi_8c_source.html#l00105">mk_proof_context()</a>, and <a class="el" href="test__capi_8c_source.html#l01711">parser_example5()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00058"></a>00058 {
<a name="l00059"></a>00059     longjmp(g_catch_buffer, e);
<a name="l00060"></a>00060 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ga7180a37232a0028dd87058dcf37a1ea2"></a><!-- doxytag: member="test_capi.c::tree_example" ref="ga7180a37232a0028dd87058dcf37a1ea2" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tree_example </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Create a binary tree datatype. </p>

<p>Definition at line <a class="el" href="test__capi_8c_source.html#l01916">1916</a> of file <a class="el" href="test__capi_8c_source.html">test_capi.c</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l01916"></a>01916                     {
<a name="l01917"></a>01917     Z3_context ctx = <a class="code" href="group__maxsat__ex.html#ga102b86f8b4829828c5c2d06c5d8b8489" title="Create a logical context. Enable model construction only.">mk_context</a>();
<a name="l01918"></a>01918     Z3_sort cell;
<a name="l01919"></a>01919     Z3_func_decl nil_decl, is_nil_decl, cons_decl, is_cons_decl, car_decl, cdr_decl;
<a name="l01920"></a>01920     Z3_ast nil, l1, l2, x, y, u, v, fml, fml1;
<a name="l01921"></a>01921     Z3_symbol head_tail[2] = { <a class="code" href="group__capi.html#ga6b9ed981ba0180962928394fe828b0a7" title="Create a Z3 symbol using a C string.">Z3_mk_string_symbol</a>(ctx, <span class="stringliteral">&quot;car&quot;</span>), <a class="code" href="group__capi.html#ga6b9ed981ba0180962928394fe828b0a7" title="Create a Z3 symbol using a C string.">Z3_mk_string_symbol</a>(ctx, <span class="stringliteral">&quot;cdr&quot;</span>) };
<a name="l01922"></a>01922     Z3_sort sorts[2] = { 0, 0 };
<a name="l01923"></a>01923     <span class="keywordtype">unsigned</span> sort_refs[2] = { 0, 0 };
<a name="l01924"></a>01924     Z3_constructor nil_con, cons_con;
<a name="l01925"></a>01925     Z3_constructor constructors[2];
<a name="l01926"></a>01926     Z3_func_decl cons_accessors[2];
<a name="l01927"></a>01927     Z3_ast ors[2];
<a name="l01928"></a>01928 
<a name="l01929"></a>01929     printf(<span class="stringliteral">&quot;\ntree_example\n&quot;</span>);
<a name="l01930"></a>01930     LOG_MSG(<span class="stringliteral">&quot;tree_example&quot;</span>);
<a name="l01931"></a>01931 
<a name="l01932"></a>01932     nil_con  = <a class="code" href="group__capi.html#gaa779e39f7050b9d51857887954b5f9b0" title="Create a constructor.">Z3_mk_constructor</a>(ctx, <a class="code" href="group__capi.html#ga6b9ed981ba0180962928394fe828b0a7" title="Create a Z3 symbol using a C string.">Z3_mk_string_symbol</a>(ctx, <span class="stringliteral">&quot;nil&quot;</span>), <a class="code" href="group__capi.html#ga6b9ed981ba0180962928394fe828b0a7" title="Create a Z3 symbol using a C string.">Z3_mk_string_symbol</a>(ctx, <span class="stringliteral">&quot;is_nil&quot;</span>), 0, 0, 0, 0);
<a name="l01933"></a>01933     cons_con = <a class="code" href="group__capi.html#gaa779e39f7050b9d51857887954b5f9b0" title="Create a constructor.">Z3_mk_constructor</a>(ctx, <a class="code" href="group__capi.html#ga6b9ed981ba0180962928394fe828b0a7" title="Create a Z3 symbol using a C string.">Z3_mk_string_symbol</a>(ctx, <span class="stringliteral">&quot;cons&quot;</span>), <a class="code" href="group__capi.html#ga6b9ed981ba0180962928394fe828b0a7" title="Create a Z3 symbol using a C string.">Z3_mk_string_symbol</a>(ctx, <span class="stringliteral">&quot;is_cons&quot;</span>), 2, head_tail, sorts, sort_refs);
<a name="l01934"></a>01934     constructors[0] = nil_con;
<a name="l01935"></a>01935     constructors[1] = cons_con;
<a name="l01936"></a>01936     
<a name="l01937"></a>01937     cell = <a class="code" href="group__capi.html#gab6809d53327d807da9158abdf75df387" title="Create datatype, such as lists, trees, records, enumerations or unions of records...">Z3_mk_datatype</a>(ctx, <a class="code" href="group__capi.html#ga6b9ed981ba0180962928394fe828b0a7" title="Create a Z3 symbol using a C string.">Z3_mk_string_symbol</a>(ctx, <span class="stringliteral">&quot;cell&quot;</span>), 2, constructors);
<a name="l01938"></a>01938 
<a name="l01939"></a>01939     <a class="code" href="group__capi.html#ga72e643039b46b1e0b82c543479e3bb7f" title="Query constructor for declared functions.">Z3_query_constructor</a>(ctx, nil_con, 0, &amp;nil_decl, &amp;is_nil_decl, 0);
<a name="l01940"></a>01940     <a class="code" href="group__capi.html#ga72e643039b46b1e0b82c543479e3bb7f" title="Query constructor for declared functions.">Z3_query_constructor</a>(ctx, cons_con, 2, &amp;cons_decl, &amp;is_cons_decl, cons_accessors);
<a name="l01941"></a>01941     car_decl = cons_accessors[0];
<a name="l01942"></a>01942     cdr_decl = cons_accessors[1];
<a name="l01943"></a>01943 
<a name="l01944"></a>01944     <a class="code" href="group__capi.html#ga63816efdbce93734c72f395b6a6a9e35" title="Reclaim memory allocated to constructor.">Z3_del_constructor</a>(ctx,nil_con);
<a name="l01945"></a>01945     <a class="code" href="group__capi.html#ga63816efdbce93734c72f395b6a6a9e35" title="Reclaim memory allocated to constructor.">Z3_del_constructor</a>(ctx,cons_con);
<a name="l01946"></a>01946 
<a name="l01947"></a>01947 
<a name="l01948"></a>01948     nil = <a class="code" href="group__capi.html#ga33a202d86bf628bfab9b6f437536cebe" title="Create a constant or function application.">Z3_mk_app</a>(ctx, nil_decl, 0, 0);
<a name="l01949"></a>01949     l1 = <a class="code" href="group__capi__ex.html#gaa498f025e510b9564ad6afe4c63a743c" title="Create the binary function application: (f x y).">mk_binary_app</a>(ctx, cons_decl, nil, nil);
<a name="l01950"></a>01950     l2 = <a class="code" href="group__capi__ex.html#gaa498f025e510b9564ad6afe4c63a743c" title="Create the binary function application: (f x y).">mk_binary_app</a>(ctx, cons_decl, l1, nil);
<a name="l01951"></a>01951 
<a name="l01952"></a>01952     <span class="comment">/* nil != cons(nil, nil) */</span>
<a name="l01953"></a>01953     <a class="code" href="group__capi__ex.html#gac1c8ca24db543be3c7c8ada6e3cad89b" title="Prove that the constraints already asserted into the logical context implies the...">prove</a>(ctx, <a class="code" href="group__capi.html#ga3329538091996eb7b3dc677760a61072" title="Create an AST node representing not(a).">Z3_mk_not</a>(ctx, <a class="code" href="group__capi.html#ga95a19ce675b70e22bb0401f7137af37c" title="Create an AST node representing l = r.">Z3_mk_eq</a>(ctx, nil, l1)), <a class="code" href="group__capi.html#gad86c8730a2e4e61bac585b240a6288d4" title="True value. It is just an alias for 1.">Z3_TRUE</a>);
<a name="l01954"></a>01954 
<a name="l01955"></a>01955     <span class="comment">/* cons(x,u) = cons(x, v) =&gt; u = v */</span>
<a name="l01956"></a>01956     u = <a class="code" href="group__maxsat__ex.html#gad55575aaf95896158c9e2f12e93769c8" title="Create a variable using the given name and type.">mk_var</a>(ctx, <span class="stringliteral">&quot;u&quot;</span>, cell);
<a name="l01957"></a>01957     v = <a class="code" href="group__maxsat__ex.html#gad55575aaf95896158c9e2f12e93769c8" title="Create a variable using the given name and type.">mk_var</a>(ctx, <span class="stringliteral">&quot;v&quot;</span>, cell);    
<a name="l01958"></a>01958     x = <a class="code" href="group__maxsat__ex.html#gad55575aaf95896158c9e2f12e93769c8" title="Create a variable using the given name and type.">mk_var</a>(ctx, <span class="stringliteral">&quot;x&quot;</span>, cell);
<a name="l01959"></a>01959     y = <a class="code" href="group__maxsat__ex.html#gad55575aaf95896158c9e2f12e93769c8" title="Create a variable using the given name and type.">mk_var</a>(ctx, <span class="stringliteral">&quot;y&quot;</span>, cell);    
<a name="l01960"></a>01960     l1 = <a class="code" href="group__capi__ex.html#gaa498f025e510b9564ad6afe4c63a743c" title="Create the binary function application: (f x y).">mk_binary_app</a>(ctx, cons_decl, x, u);
<a name="l01961"></a>01961     l2 = <a class="code" href="group__capi__ex.html#gaa498f025e510b9564ad6afe4c63a743c" title="Create the binary function application: (f x y).">mk_binary_app</a>(ctx, cons_decl, y, v);
<a name="l01962"></a>01962     <a class="code" href="group__capi__ex.html#gac1c8ca24db543be3c7c8ada6e3cad89b" title="Prove that the constraints already asserted into the logical context implies the...">prove</a>(ctx, <a class="code" href="group__capi.html#gac829c0e25bbbd30343bf073f7b524517" title="Create an AST node representing t1 implies t2.">Z3_mk_implies</a>(ctx, <a class="code" href="group__capi.html#ga95a19ce675b70e22bb0401f7137af37c" title="Create an AST node representing l = r.">Z3_mk_eq</a>(ctx,l1,l2), <a class="code" href="group__capi.html#ga95a19ce675b70e22bb0401f7137af37c" title="Create an AST node representing l = r.">Z3_mk_eq</a>(ctx, u, v)), <a class="code" href="group__capi.html#gad86c8730a2e4e61bac585b240a6288d4" title="True value. It is just an alias for 1.">Z3_TRUE</a>);
<a name="l01963"></a>01963     <a class="code" href="group__capi__ex.html#gac1c8ca24db543be3c7c8ada6e3cad89b" title="Prove that the constraints already asserted into the logical context implies the...">prove</a>(ctx, <a class="code" href="group__capi.html#gac829c0e25bbbd30343bf073f7b524517" title="Create an AST node representing t1 implies t2.">Z3_mk_implies</a>(ctx, <a class="code" href="group__capi.html#ga95a19ce675b70e22bb0401f7137af37c" title="Create an AST node representing l = r.">Z3_mk_eq</a>(ctx,l1,l2), <a class="code" href="group__capi.html#ga95a19ce675b70e22bb0401f7137af37c" title="Create an AST node representing l = r.">Z3_mk_eq</a>(ctx, x, y)), <a class="code" href="group__capi.html#gad86c8730a2e4e61bac585b240a6288d4" title="True value. It is just an alias for 1.">Z3_TRUE</a>);
<a name="l01964"></a>01964 
<a name="l01965"></a>01965     <span class="comment">/* is_nil(u) or is_cons(u) */</span>
<a name="l01966"></a>01966     ors[0] = <a class="code" href="group__capi.html#ga33a202d86bf628bfab9b6f437536cebe" title="Create a constant or function application.">Z3_mk_app</a>(ctx, is_nil_decl, 1, &amp;u);
<a name="l01967"></a>01967     ors[1] = <a class="code" href="group__capi.html#ga33a202d86bf628bfab9b6f437536cebe" title="Create a constant or function application.">Z3_mk_app</a>(ctx, is_cons_decl, 1, &amp;u);
<a name="l01968"></a>01968     <a class="code" href="group__capi__ex.html#gac1c8ca24db543be3c7c8ada6e3cad89b" title="Prove that the constraints already asserted into the logical context implies the...">prove</a>(ctx, <a class="code" href="group__capi.html#ga00866d16331d505620a6c515302021f9" title="Create an AST node representing args[0] or ... or args[num_args-1].">Z3_mk_or</a>(ctx, 2, ors), <a class="code" href="group__capi.html#gad86c8730a2e4e61bac585b240a6288d4" title="True value. It is just an alias for 1.">Z3_TRUE</a>);
<a name="l01969"></a>01969 
<a name="l01970"></a>01970     <span class="comment">/* occurs check u != cons(x,u) */</span>    
<a name="l01971"></a>01971     <a class="code" href="group__capi__ex.html#gac1c8ca24db543be3c7c8ada6e3cad89b" title="Prove that the constraints already asserted into the logical context implies the...">prove</a>(ctx, <a class="code" href="group__capi.html#ga3329538091996eb7b3dc677760a61072" title="Create an AST node representing not(a).">Z3_mk_not</a>(ctx, <a class="code" href="group__capi.html#ga95a19ce675b70e22bb0401f7137af37c" title="Create an AST node representing l = r.">Z3_mk_eq</a>(ctx, u, l1)), <a class="code" href="group__capi.html#gad86c8730a2e4e61bac585b240a6288d4" title="True value. It is just an alias for 1.">Z3_TRUE</a>);
<a name="l01972"></a>01972 
<a name="l01973"></a>01973     <span class="comment">/* destructors: is_cons(u) =&gt; u = cons(car(u),cdr(u)) */</span>
<a name="l01974"></a>01974     fml1 = <a class="code" href="group__capi.html#ga95a19ce675b70e22bb0401f7137af37c" title="Create an AST node representing l = r.">Z3_mk_eq</a>(ctx, u, <a class="code" href="group__capi__ex.html#gaa498f025e510b9564ad6afe4c63a743c" title="Create the binary function application: (f x y).">mk_binary_app</a>(ctx, cons_decl, <a class="code" href="group__capi__ex.html#ga27ac720892fd2ea62deca501d6d2e706" title="Create the unary function application: (f x).">mk_unary_app</a>(ctx, car_decl, u), <a class="code" href="group__capi__ex.html#ga27ac720892fd2ea62deca501d6d2e706" title="Create the unary function application: (f x).">mk_unary_app</a>(ctx, cdr_decl, u)));
<a name="l01975"></a>01975     fml = <a class="code" href="group__capi.html#gac829c0e25bbbd30343bf073f7b524517" title="Create an AST node representing t1 implies t2.">Z3_mk_implies</a>(ctx, <a class="code" href="group__capi.html#ga33a202d86bf628bfab9b6f437536cebe" title="Create a constant or function application.">Z3_mk_app</a>(ctx, is_cons_decl, 1, &amp;u), fml1);
<a name="l01976"></a>01976     printf(<span class="stringliteral">&quot;Formula %s\n&quot;</span>, <a class="code" href="group__capi.html#gab1aa4b78298fe00b3167bf7bfd88aea3" title="Convert the given AST node into a string.">Z3_ast_to_string</a>(ctx, fml));
<a name="l01977"></a>01977     <a class="code" href="group__capi__ex.html#gac1c8ca24db543be3c7c8ada6e3cad89b" title="Prove that the constraints already asserted into the logical context implies the...">prove</a>(ctx, fml, <a class="code" href="group__capi.html#gad86c8730a2e4e61bac585b240a6288d4" title="True value. It is just an alias for 1.">Z3_TRUE</a>);
<a name="l01978"></a>01978 
<a name="l01979"></a>01979     <a class="code" href="group__capi__ex.html#gac1c8ca24db543be3c7c8ada6e3cad89b" title="Prove that the constraints already asserted into the logical context implies the...">prove</a>(ctx, fml1, <a class="code" href="group__capi.html#ga1d9cee57472b2c7623642f123b8f1781" title="False value. It is just an alias for 0.">Z3_FALSE</a>);
<a name="l01980"></a>01980 
<a name="l01981"></a>01981     <span class="comment">/* delete logical context */</span>
<a name="l01982"></a>01982     <a class="code" href="group__capi.html#ga556eae80ed43ab13e1e7dc3b38c35200" title="Delete the given logical context.">Z3_del_context</a>(ctx);
<a name="l01983"></a>01983 
<a name="l01984"></a>01984 
<a name="l01985"></a>01985 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="gaab866a1a179a7456a35f906afa854bcd"></a><!-- doxytag: member="test_capi.c::tuple_example1" ref="gaab866a1a179a7456a35f906afa854bcd" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tuple_example1 </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Simple tuple type example. It creates a tuple that is a pair of real numbers. </p>

<p>Definition at line <a class="el" href="test__capi_8c_source.html#l01233">1233</a> of file <a class="el" href="test__capi_8c_source.html">test_capi.c</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l01234"></a>01234 {
<a name="l01235"></a>01235     Z3_context         ctx;
<a name="l01236"></a>01236     Z3_sort        real_sort, pair_sort;
<a name="l01237"></a>01237     Z3_symbol          mk_tuple_name;
<a name="l01238"></a>01238     Z3_func_decl  mk_tuple_decl;
<a name="l01239"></a>01239     Z3_symbol          proj_names[2]; 
<a name="l01240"></a>01240     Z3_sort        proj_sorts[2]; 
<a name="l01241"></a>01241     Z3_func_decl  proj_decls[2];
<a name="l01242"></a>01242     Z3_func_decl  get_x_decl, get_y_decl;
<a name="l01243"></a>01243 
<a name="l01244"></a>01244     printf(<span class="stringliteral">&quot;\ntuple_example1\n&quot;</span>);
<a name="l01245"></a>01245     LOG_MSG(<span class="stringliteral">&quot;tuple_example1&quot;</span>);
<a name="l01246"></a>01246     
<a name="l01247"></a>01247     ctx       = <a class="code" href="group__maxsat__ex.html#ga102b86f8b4829828c5c2d06c5d8b8489" title="Create a logical context. Enable model construction only.">mk_context</a>();
<a name="l01248"></a>01248 
<a name="l01249"></a>01249     real_sort = <a class="code" href="group__capi.html#ga40ef93b9738485caed6dc84631c3c1a0" title="Create the real type.">Z3_mk_real_sort</a>(ctx);
<a name="l01250"></a>01250 
<a name="l01251"></a>01251     <span class="comment">/* Create pair (tuple) type */</span>
<a name="l01252"></a>01252     mk_tuple_name = <a class="code" href="group__capi.html#ga6b9ed981ba0180962928394fe828b0a7" title="Create a Z3 symbol using a C string.">Z3_mk_string_symbol</a>(ctx, <span class="stringliteral">&quot;mk_pair&quot;</span>);
<a name="l01253"></a>01253     proj_names[0] = <a class="code" href="group__capi.html#ga6b9ed981ba0180962928394fe828b0a7" title="Create a Z3 symbol using a C string.">Z3_mk_string_symbol</a>(ctx, <span class="stringliteral">&quot;get_x&quot;</span>);
<a name="l01254"></a>01254     proj_names[1] = <a class="code" href="group__capi.html#ga6b9ed981ba0180962928394fe828b0a7" title="Create a Z3 symbol using a C string.">Z3_mk_string_symbol</a>(ctx, <span class="stringliteral">&quot;get_y&quot;</span>);
<a name="l01255"></a>01255     proj_sorts[0] = real_sort;
<a name="l01256"></a>01256     proj_sorts[1] = real_sort;
<a name="l01257"></a>01257     <span class="comment">/* Z3_mk_tuple_sort will set mk_tuple_decl and proj_decls */</span>
<a name="l01258"></a>01258     pair_sort     = <a class="code" href="group__capi.html#ga7156b9c0a76a28fae46c81f8e3cdf0f1" title="Create a tuple type.">Z3_mk_tuple_sort</a>(ctx, mk_tuple_name, 2, proj_names, proj_sorts, &amp;mk_tuple_decl, proj_decls);
<a name="l01259"></a>01259     get_x_decl    = proj_decls[0]; <span class="comment">/* function that extracts the first element of a tuple. */</span>
<a name="l01260"></a>01260     get_y_decl    = proj_decls[1]; <span class="comment">/* function that extracts the second element of a tuple. */</span>
<a name="l01261"></a>01261     
<a name="l01262"></a>01262     printf(<span class="stringliteral">&quot;tuple_sort: &quot;</span>);
<a name="l01263"></a>01263     <a class="code" href="group__capi__ex.html#ga8a9e74a0c3915e48a40a311af80bf369" title="Display the given type.">display_sort</a>(ctx, stdout, pair_sort);
<a name="l01264"></a>01264     printf(<span class="stringliteral">&quot;\n&quot;</span>);
<a name="l01265"></a>01265 
<a name="l01266"></a>01266     {
<a name="l01267"></a>01267         <span class="comment">/* prove that get_x(mk_pair(x,y)) == 1 implies x = 1*/</span>
<a name="l01268"></a>01268         Z3_ast app1, app2, x, y, one;
<a name="l01269"></a>01269         Z3_ast eq1, eq2, eq3, thm;
<a name="l01270"></a>01270         
<a name="l01271"></a>01271         x    = <a class="code" href="group__capi__ex.html#ga440884a8a38a8b2201e4713862358aae" title="Create a real variable using the given name.">mk_real_var</a>(ctx, <span class="stringliteral">&quot;x&quot;</span>);
<a name="l01272"></a>01272         y    = <a class="code" href="group__capi__ex.html#ga440884a8a38a8b2201e4713862358aae" title="Create a real variable using the given name.">mk_real_var</a>(ctx, <span class="stringliteral">&quot;y&quot;</span>);
<a name="l01273"></a>01273         app1 = <a class="code" href="group__capi__ex.html#gaa498f025e510b9564ad6afe4c63a743c" title="Create the binary function application: (f x y).">mk_binary_app</a>(ctx, mk_tuple_decl, x, y);
<a name="l01274"></a>01274         app2 = <a class="code" href="group__capi__ex.html#ga27ac720892fd2ea62deca501d6d2e706" title="Create the unary function application: (f x).">mk_unary_app</a>(ctx, get_x_decl, app1); 
<a name="l01275"></a>01275         one  = <a class="code" href="group__capi.html#ga92e75c71f0d602c65b67ae8ae82dcb6a" title="Create a numeral of a given sort.">Z3_mk_numeral</a>(ctx, <span class="stringliteral">&quot;1&quot;</span>, real_sort);
<a name="l01276"></a>01276         eq1  = <a class="code" href="group__capi.html#ga95a19ce675b70e22bb0401f7137af37c" title="Create an AST node representing l = r.">Z3_mk_eq</a>(ctx, app2, one);
<a name="l01277"></a>01277         eq2  = <a class="code" href="group__capi.html#ga95a19ce675b70e22bb0401f7137af37c" title="Create an AST node representing l = r.">Z3_mk_eq</a>(ctx, x, one);
<a name="l01278"></a>01278         thm  = <a class="code" href="group__capi.html#gac829c0e25bbbd30343bf073f7b524517" title="Create an AST node representing t1 implies t2.">Z3_mk_implies</a>(ctx, eq1, eq2);
<a name="l01279"></a>01279         printf(<span class="stringliteral">&quot;prove: get_x(mk_pair(x, y)) = 1 implies x = 1\n&quot;</span>);
<a name="l01280"></a>01280         <a class="code" href="group__capi__ex.html#gac1c8ca24db543be3c7c8ada6e3cad89b" title="Prove that the constraints already asserted into the logical context implies the...">prove</a>(ctx, thm, <a class="code" href="group__capi.html#gad86c8730a2e4e61bac585b240a6288d4" title="True value. It is just an alias for 1.">Z3_TRUE</a>);
<a name="l01281"></a>01281 
<a name="l01282"></a>01282         <span class="comment">/* disprove that get_x(mk_pair(x,y)) == 1 implies y = 1*/</span>
<a name="l01283"></a>01283         eq3  = <a class="code" href="group__capi.html#ga95a19ce675b70e22bb0401f7137af37c" title="Create an AST node representing l = r.">Z3_mk_eq</a>(ctx, y, one);
<a name="l01284"></a>01284         thm  = <a class="code" href="group__capi.html#gac829c0e25bbbd30343bf073f7b524517" title="Create an AST node representing t1 implies t2.">Z3_mk_implies</a>(ctx, eq1, eq3);
<a name="l01285"></a>01285         printf(<span class="stringliteral">&quot;disprove: get_x(mk_pair(x, y)) = 1 implies y = 1\n&quot;</span>);
<a name="l01286"></a>01286         <a class="code" href="group__capi__ex.html#gac1c8ca24db543be3c7c8ada6e3cad89b" title="Prove that the constraints already asserted into the logical context implies the...">prove</a>(ctx, thm, <a class="code" href="group__capi.html#ga1d9cee57472b2c7623642f123b8f1781" title="False value. It is just an alias for 0.">Z3_FALSE</a>);
<a name="l01287"></a>01287     }
<a name="l01288"></a>01288 
<a name="l01289"></a>01289     {
<a name="l01290"></a>01290         <span class="comment">/* prove that get_x(p1) = get_x(p2) and get_y(p1) = get_y(p2) implies p1 = p2 */</span>
<a name="l01291"></a>01291         Z3_ast p1, p2, x1, x2, y1, y2;
<a name="l01292"></a>01292         Z3_ast antecedents[2];
<a name="l01293"></a>01293         Z3_ast antecedent, consequent, thm;
<a name="l01294"></a>01294         
<a name="l01295"></a>01295         p1             = <a class="code" href="group__maxsat__ex.html#gad55575aaf95896158c9e2f12e93769c8" title="Create a variable using the given name and type.">mk_var</a>(ctx, <span class="stringliteral">&quot;p1&quot;</span>, pair_sort);
<a name="l01296"></a>01296         p2             = <a class="code" href="group__maxsat__ex.html#gad55575aaf95896158c9e2f12e93769c8" title="Create a variable using the given name and type.">mk_var</a>(ctx, <span class="stringliteral">&quot;p2&quot;</span>, pair_sort);
<a name="l01297"></a>01297         x1             = <a class="code" href="group__capi__ex.html#ga27ac720892fd2ea62deca501d6d2e706" title="Create the unary function application: (f x).">mk_unary_app</a>(ctx, get_x_decl, p1);
<a name="l01298"></a>01298         y1             = <a class="code" href="group__capi__ex.html#ga27ac720892fd2ea62deca501d6d2e706" title="Create the unary function application: (f x).">mk_unary_app</a>(ctx, get_y_decl, p1);
<a name="l01299"></a>01299         x2             = <a class="code" href="group__capi__ex.html#ga27ac720892fd2ea62deca501d6d2e706" title="Create the unary function application: (f x).">mk_unary_app</a>(ctx, get_x_decl, p2);
<a name="l01300"></a>01300         y2             = <a class="code" href="group__capi__ex.html#ga27ac720892fd2ea62deca501d6d2e706" title="Create the unary function application: (f x).">mk_unary_app</a>(ctx, get_y_decl, p2);
<a name="l01301"></a>01301         antecedents[0] = <a class="code" href="group__capi.html#ga95a19ce675b70e22bb0401f7137af37c" title="Create an AST node representing l = r.">Z3_mk_eq</a>(ctx, x1, x2);
<a name="l01302"></a>01302         antecedents[1] = <a class="code" href="group__capi.html#ga95a19ce675b70e22bb0401f7137af37c" title="Create an AST node representing l = r.">Z3_mk_eq</a>(ctx, y1, y2);
<a name="l01303"></a>01303         antecedent     = <a class="code" href="group__capi.html#gacde98ce4a8ed1dde50b9669db4838c61" title="Create an AST node representing args[0] and ... and args[num_args-1].">Z3_mk_and</a>(ctx, 2, antecedents);
<a name="l01304"></a>01304         consequent     = <a class="code" href="group__capi.html#ga95a19ce675b70e22bb0401f7137af37c" title="Create an AST node representing l = r.">Z3_mk_eq</a>(ctx, p1, p2);
<a name="l01305"></a>01305         thm            = <a class="code" href="group__capi.html#gac829c0e25bbbd30343bf073f7b524517" title="Create an AST node representing t1 implies t2.">Z3_mk_implies</a>(ctx, antecedent, consequent);
<a name="l01306"></a>01306         printf(<span class="stringliteral">&quot;prove: get_x(p1) = get_x(p2) and get_y(p1) = get_y(p2) implies p1 = p2\n&quot;</span>);
<a name="l01307"></a>01307         <a class="code" href="group__capi__ex.html#gac1c8ca24db543be3c7c8ada6e3cad89b" title="Prove that the constraints already asserted into the logical context implies the...">prove</a>(ctx, thm, <a class="code" href="group__capi.html#gad86c8730a2e4e61bac585b240a6288d4" title="True value. It is just an alias for 1.">Z3_TRUE</a>);
<a name="l01308"></a>01308 
<a name="l01309"></a>01309         <span class="comment">/* disprove that get_x(p1) = get_x(p2) implies p1 = p2 */</span>
<a name="l01310"></a>01310         thm            = <a class="code" href="group__capi.html#gac829c0e25bbbd30343bf073f7b524517" title="Create an AST node representing t1 implies t2.">Z3_mk_implies</a>(ctx, antecedents[0], consequent);
<a name="l01311"></a>01311         printf(<span class="stringliteral">&quot;disprove: get_x(p1) = get_x(p2) implies p1 = p2\n&quot;</span>);
<a name="l01312"></a>01312         <a class="code" href="group__capi__ex.html#gac1c8ca24db543be3c7c8ada6e3cad89b" title="Prove that the constraints already asserted into the logical context implies the...">prove</a>(ctx, thm, <a class="code" href="group__capi.html#ga1d9cee57472b2c7623642f123b8f1781" title="False value. It is just an alias for 0.">Z3_FALSE</a>);
<a name="l01313"></a>01313     }
<a name="l01314"></a>01314 
<a name="l01315"></a>01315     {
<a name="l01316"></a>01316         <span class="comment">/* demonstrate how to use the mk_tuple_update function */</span>
<a name="l01317"></a>01317         <span class="comment">/* prove that p2 = update(p1, 0, 10) implies get_x(p2) = 10 */</span>
<a name="l01318"></a>01318         Z3_ast p1, p2, one, ten, updt, x, y;
<a name="l01319"></a>01319         Z3_ast antecedent, consequent, thm;
<a name="l01320"></a>01320 
<a name="l01321"></a>01321         p1             = <a class="code" href="group__maxsat__ex.html#gad55575aaf95896158c9e2f12e93769c8" title="Create a variable using the given name and type.">mk_var</a>(ctx, <span class="stringliteral">&quot;p1&quot;</span>, pair_sort);
<a name="l01322"></a>01322         p2             = <a class="code" href="group__maxsat__ex.html#gad55575aaf95896158c9e2f12e93769c8" title="Create a variable using the given name and type.">mk_var</a>(ctx, <span class="stringliteral">&quot;p2&quot;</span>, pair_sort);
<a name="l01323"></a>01323         one            = <a class="code" href="group__capi.html#ga92e75c71f0d602c65b67ae8ae82dcb6a" title="Create a numeral of a given sort.">Z3_mk_numeral</a>(ctx, <span class="stringliteral">&quot;1&quot;</span>, real_sort);
<a name="l01324"></a>01324         ten            = <a class="code" href="group__capi.html#ga92e75c71f0d602c65b67ae8ae82dcb6a" title="Create a numeral of a given sort.">Z3_mk_numeral</a>(ctx, <span class="stringliteral">&quot;10&quot;</span>, real_sort);
<a name="l01325"></a>01325         updt           = <a class="code" href="group__capi__ex.html#ga7e3e44186510e02e3fa143689fef6fd3" title="Z3 does not support explicitly tuple updates. They can be easily implemented as macros...">mk_tuple_update</a>(ctx, p1, 0, ten);
<a name="l01326"></a>01326         antecedent     = <a class="code" href="group__capi.html#ga95a19ce675b70e22bb0401f7137af37c" title="Create an AST node representing l = r.">Z3_mk_eq</a>(ctx, p2, updt);
<a name="l01327"></a>01327         x              = <a class="code" href="group__capi__ex.html#ga27ac720892fd2ea62deca501d6d2e706" title="Create the unary function application: (f x).">mk_unary_app</a>(ctx, get_x_decl, p2);
<a name="l01328"></a>01328         consequent     = <a class="code" href="group__capi.html#ga95a19ce675b70e22bb0401f7137af37c" title="Create an AST node representing l = r.">Z3_mk_eq</a>(ctx, x, ten);
<a name="l01329"></a>01329         thm            = <a class="code" href="group__capi.html#gac829c0e25bbbd30343bf073f7b524517" title="Create an AST node representing t1 implies t2.">Z3_mk_implies</a>(ctx, antecedent, consequent);
<a name="l01330"></a>01330         printf(<span class="stringliteral">&quot;prove: p2 = update(p1, 0, 10) implies get_x(p2) = 10\n&quot;</span>);
<a name="l01331"></a>01331         <a class="code" href="group__capi__ex.html#gac1c8ca24db543be3c7c8ada6e3cad89b" title="Prove that the constraints already asserted into the logical context implies the...">prove</a>(ctx, thm, <a class="code" href="group__capi.html#gad86c8730a2e4e61bac585b240a6288d4" title="True value. It is just an alias for 1.">Z3_TRUE</a>);
<a name="l01332"></a>01332 
<a name="l01333"></a>01333         <span class="comment">/* disprove that p2 = update(p1, 0, 10) implies get_y(p2) = 10 */</span>
<a name="l01334"></a>01334         y              = <a class="code" href="group__capi__ex.html#ga27ac720892fd2ea62deca501d6d2e706" title="Create the unary function application: (f x).">mk_unary_app</a>(ctx, get_y_decl, p2);
<a name="l01335"></a>01335         consequent     = <a class="code" href="group__capi.html#ga95a19ce675b70e22bb0401f7137af37c" title="Create an AST node representing l = r.">Z3_mk_eq</a>(ctx, y, ten);
<a name="l01336"></a>01336         thm            = <a class="code" href="group__capi.html#gac829c0e25bbbd30343bf073f7b524517" title="Create an AST node representing t1 implies t2.">Z3_mk_implies</a>(ctx, antecedent, consequent);
<a name="l01337"></a>01337         printf(<span class="stringliteral">&quot;disprove: p2 = update(p1, 0, 10) implies get_y(p2) = 10\n&quot;</span>);
<a name="l01338"></a>01338         <a class="code" href="group__capi__ex.html#gac1c8ca24db543be3c7c8ada6e3cad89b" title="Prove that the constraints already asserted into the logical context implies the...">prove</a>(ctx, thm, <a class="code" href="group__capi.html#ga1d9cee57472b2c7623642f123b8f1781" title="False value. It is just an alias for 0.">Z3_FALSE</a>);
<a name="l01339"></a>01339     }
<a name="l01340"></a>01340 
<a name="l01341"></a>01341     <a class="code" href="group__capi.html#ga556eae80ed43ab13e1e7dc3b38c35200" title="Delete the given logical context.">Z3_del_context</a>(ctx);
<a name="l01342"></a>01342 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ga7a7c910ba34f5c87ec5bfdd87e5beb3f"></a><!-- doxytag: member="test_capi.c::two_contexts_example1" ref="ga7a7c910ba34f5c87ec5bfdd87e5beb3f" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void two_contexts_example1 </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Several logical context can be used simultaneously. </p>

<p>Definition at line <a class="el" href="test__capi_8c_source.html#l01458">1458</a> of file <a class="el" href="test__capi_8c_source.html">test_capi.c</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l01459"></a>01459 {
<a name="l01460"></a>01460     Z3_context ctx1, ctx2;
<a name="l01461"></a>01461     Z3_ast x1, x2;
<a name="l01462"></a>01462 
<a name="l01463"></a>01463     printf(<span class="stringliteral">&quot;\ntwo_contexts_example1\n&quot;</span>);
<a name="l01464"></a>01464     LOG_MSG(<span class="stringliteral">&quot;two_contexts_example1&quot;</span>);
<a name="l01465"></a>01465 
<a name="l01466"></a>01466     <span class="comment">/* using the same (default) configuration to initialized both logical contexts. */</span>
<a name="l01467"></a>01467     ctx1 = <a class="code" href="group__maxsat__ex.html#ga102b86f8b4829828c5c2d06c5d8b8489" title="Create a logical context. Enable model construction only.">mk_context</a>();
<a name="l01468"></a>01468     ctx2 = <a class="code" href="group__maxsat__ex.html#ga102b86f8b4829828c5c2d06c5d8b8489" title="Create a logical context. Enable model construction only.">mk_context</a>();
<a name="l01469"></a>01469     
<a name="l01470"></a>01470     x1 = <a class="code" href="group__capi.html#ga093c9703393f33ae282ec5e8729354ef" title="Declare and create a constant.">Z3_mk_const</a>(ctx1, <a class="code" href="group__capi.html#ga3df806baf6124df3e63a58cf23e12411" title="Create a Z3 symbol using an integer.">Z3_mk_int_symbol</a>(ctx1,0), <a class="code" href="group__capi.html#gacdc73510b69a010b71793d429015f342" title="Create the Boolean type.">Z3_mk_bool_sort</a>(ctx1));
<a name="l01471"></a>01471     x2 = <a class="code" href="group__capi.html#ga093c9703393f33ae282ec5e8729354ef" title="Declare and create a constant.">Z3_mk_const</a>(ctx2, <a class="code" href="group__capi.html#ga3df806baf6124df3e63a58cf23e12411" title="Create a Z3 symbol using an integer.">Z3_mk_int_symbol</a>(ctx2,0), <a class="code" href="group__capi.html#gacdc73510b69a010b71793d429015f342" title="Create the Boolean type.">Z3_mk_bool_sort</a>(ctx2));
<a name="l01472"></a>01472 
<a name="l01473"></a>01473     <a class="code" href="group__capi.html#ga556eae80ed43ab13e1e7dc3b38c35200" title="Delete the given logical context.">Z3_del_context</a>(ctx1);
<a name="l01474"></a>01474     
<a name="l01475"></a>01475     <span class="comment">/* ctx2 can still be used. */</span>
<a name="l01476"></a>01476     printf(<span class="stringliteral">&quot;%s\n&quot;</span>, <a class="code" href="group__capi.html#gab1aa4b78298fe00b3167bf7bfd88aea3" title="Convert the given AST node into a string.">Z3_ast_to_string</a>(ctx2, x2));
<a name="l01477"></a>01477     
<a name="l01478"></a>01478     <a class="code" href="group__capi.html#ga556eae80ed43ab13e1e7dc3b38c35200" title="Delete the given logical context.">Z3_del_context</a>(ctx2);
<a name="l01479"></a>01479 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ga98a996adc7ad22a8dc75b936e74b73ca"></a><!-- doxytag: member="test_capi.c::unreachable" ref="ga98a996adc7ad22a8dc75b936e74b73ca" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void unreachable </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>exit if unreachable code was reached. </p>

<p>Definition at line <a class="el" href="test__capi_8c_source.html#l00037">37</a> of file <a class="el" href="test__capi_8c_source.html">test_capi.c</a>.</p>

<p>Referenced by <a class="el" href="test__capi_8c_source.html#l00429">display_symbol()</a>, <a class="el" href="test__capi_8c_source.html#l01528">error_code_example2()</a>, and <a class="el" href="test__capi_8c_source.html#l01711">parser_example5()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00038"></a>00038 {
<a name="l00039"></a>00039     <a class="code" href="group__capi__ex.html#gaa325ae9cdfce0e749a254dfffc6c6ace" title="exit gracefully in case of error.">exitf</a>(<span class="stringliteral">&quot;unreachable code was reached&quot;</span>);
<a name="l00040"></a>00040 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ga8c767d0ad3c40daa42f99ad71ee6db8f"></a><!-- doxytag: member="test_capi.c::unsat_core_and_proof_example" ref="ga8c767d0ad3c40daa42f99ad71ee6db8f" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void unsat_core_and_proof_example </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Prove a theorem and extract, and print the proof. </p>
<p>This example illustrates the use of <a class="el" href="group__capi.html#ga289e6cfc3207ee0beb4f9dc8dd4e378b" title="Check whether the given logical context and optional assumptions is consistent or...">Z3_check_assumptions</a>. </p>

<p>Definition at line <a class="el" href="test__capi_8c_source.html#l02184">2184</a> of file <a class="el" href="test__capi_8c_source.html">test_capi.c</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l02184"></a>02184                                     {
<a name="l02185"></a>02185     Z3_context ctx = <a class="code" href="group__capi__ex.html#gaf861446b22ab36b8ffe20a4aba630075" title="Create a logical context.">mk_proof_context</a>();
<a name="l02186"></a>02186     Z3_ast pa = <a class="code" href="group__maxsat__ex.html#ga397d6e03e2538ff0df36aad6e02030ae" title="Create a boolean variable using the given name.">mk_bool_var</a>(ctx, <span class="stringliteral">&quot;PredA&quot;</span>);
<a name="l02187"></a>02187     Z3_ast pb = <a class="code" href="group__maxsat__ex.html#ga397d6e03e2538ff0df36aad6e02030ae" title="Create a boolean variable using the given name.">mk_bool_var</a>(ctx, <span class="stringliteral">&quot;PredB&quot;</span>);
<a name="l02188"></a>02188     Z3_ast pc = <a class="code" href="group__maxsat__ex.html#ga397d6e03e2538ff0df36aad6e02030ae" title="Create a boolean variable using the given name.">mk_bool_var</a>(ctx, <span class="stringliteral">&quot;PredC&quot;</span>);
<a name="l02189"></a>02189     Z3_ast pd = <a class="code" href="group__maxsat__ex.html#ga397d6e03e2538ff0df36aad6e02030ae" title="Create a boolean variable using the given name.">mk_bool_var</a>(ctx, <span class="stringliteral">&quot;PredD&quot;</span>);
<a name="l02190"></a>02190     Z3_ast p1 = <a class="code" href="group__maxsat__ex.html#ga397d6e03e2538ff0df36aad6e02030ae" title="Create a boolean variable using the given name.">mk_bool_var</a>(ctx, <span class="stringliteral">&quot;P1&quot;</span>);
<a name="l02191"></a>02191     Z3_ast p2 = <a class="code" href="group__maxsat__ex.html#ga397d6e03e2538ff0df36aad6e02030ae" title="Create a boolean variable using the given name.">mk_bool_var</a>(ctx, <span class="stringliteral">&quot;P2&quot;</span>);
<a name="l02192"></a>02192     Z3_ast p3 = <a class="code" href="group__maxsat__ex.html#ga397d6e03e2538ff0df36aad6e02030ae" title="Create a boolean variable using the given name.">mk_bool_var</a>(ctx, <span class="stringliteral">&quot;P3&quot;</span>);
<a name="l02193"></a>02193     Z3_ast p4 = <a class="code" href="group__maxsat__ex.html#ga397d6e03e2538ff0df36aad6e02030ae" title="Create a boolean variable using the given name.">mk_bool_var</a>(ctx, <span class="stringliteral">&quot;P4&quot;</span>);
<a name="l02194"></a>02194     Z3_ast assumptions[4] = { <a class="code" href="group__capi.html#ga3329538091996eb7b3dc677760a61072" title="Create an AST node representing not(a).">Z3_mk_not</a>(ctx, p1), <a class="code" href="group__capi.html#ga3329538091996eb7b3dc677760a61072" title="Create an AST node representing not(a).">Z3_mk_not</a>(ctx, p2), <a class="code" href="group__capi.html#ga3329538091996eb7b3dc677760a61072" title="Create an AST node representing not(a).">Z3_mk_not</a>(ctx, p3), <a class="code" href="group__capi.html#ga3329538091996eb7b3dc677760a61072" title="Create an AST node representing not(a).">Z3_mk_not</a>(ctx, p4) };
<a name="l02195"></a>02195     Z3_ast args1[3] = { pa, pb, pc };
<a name="l02196"></a>02196     Z3_ast f1 = <a class="code" href="group__capi.html#gacde98ce4a8ed1dde50b9669db4838c61" title="Create an AST node representing args[0] and ... and args[num_args-1].">Z3_mk_and</a>(ctx, 3, args1);
<a name="l02197"></a>02197     Z3_ast args2[3] = { pa, <a class="code" href="group__capi.html#ga3329538091996eb7b3dc677760a61072" title="Create an AST node representing not(a).">Z3_mk_not</a>(ctx, pb), pc };
<a name="l02198"></a>02198     Z3_ast f2 = <a class="code" href="group__capi.html#gacde98ce4a8ed1dde50b9669db4838c61" title="Create an AST node representing args[0] and ... and args[num_args-1].">Z3_mk_and</a>(ctx, 3, args2);
<a name="l02199"></a>02199     Z3_ast args3[2] = { <a class="code" href="group__capi.html#ga3329538091996eb7b3dc677760a61072" title="Create an AST node representing not(a).">Z3_mk_not</a>(ctx, pa), <a class="code" href="group__capi.html#ga3329538091996eb7b3dc677760a61072" title="Create an AST node representing not(a).">Z3_mk_not</a>(ctx, pc) };
<a name="l02200"></a>02200     Z3_ast f3 = <a class="code" href="group__capi.html#ga00866d16331d505620a6c515302021f9" title="Create an AST node representing args[0] or ... or args[num_args-1].">Z3_mk_or</a>(ctx, 2, args3);
<a name="l02201"></a>02201     Z3_ast f4 = pd;
<a name="l02202"></a>02202     Z3_ast g1[2] = { f1, p1 };
<a name="l02203"></a>02203     Z3_ast g2[2] = { f2, p2 };
<a name="l02204"></a>02204     Z3_ast g3[2] = { f3, p3 };
<a name="l02205"></a>02205     Z3_ast g4[2] = { f4, p4 };    
<a name="l02206"></a>02206     Z3_ast core[4] = { 0, 0, 0, 0 };
<a name="l02207"></a>02207     <span class="keywordtype">unsigned</span> core_size = 4;
<a name="l02208"></a>02208     Z3_ast proof;
<a name="l02209"></a>02209     Z3_model m      = 0;
<a name="l02210"></a>02210     <a class="code" href="group__capi.html#ga6c2de6ea89b244e37c3ffb17a9ea2a89" title="Lifted Boolean type: false, undefined, true.">Z3_lbool</a> result;
<a name="l02211"></a>02211     <span class="keywordtype">unsigned</span> i;
<a name="l02212"></a>02212 
<a name="l02213"></a>02213     printf(<span class="stringliteral">&quot;\nunsat_core_and_proof_example\n&quot;</span>);
<a name="l02214"></a>02214     LOG_MSG(<span class="stringliteral">&quot;unsat_core_and_proof_example&quot;</span>);
<a name="l02215"></a>02215     
<a name="l02216"></a>02216     <a class="code" href="group__capi.html#ga1a05ff73a564ae7256a2257048a4680a" title="Assert a constraint into the logical context.">Z3_assert_cnstr</a>(ctx, <a class="code" href="group__capi.html#ga00866d16331d505620a6c515302021f9" title="Create an AST node representing args[0] or ... or args[num_args-1].">Z3_mk_or</a>(ctx, 2, g1));
<a name="l02217"></a>02217     <a class="code" href="group__capi.html#ga1a05ff73a564ae7256a2257048a4680a" title="Assert a constraint into the logical context.">Z3_assert_cnstr</a>(ctx, <a class="code" href="group__capi.html#ga00866d16331d505620a6c515302021f9" title="Create an AST node representing args[0] or ... or args[num_args-1].">Z3_mk_or</a>(ctx, 2, g2));
<a name="l02218"></a>02218     <a class="code" href="group__capi.html#ga1a05ff73a564ae7256a2257048a4680a" title="Assert a constraint into the logical context.">Z3_assert_cnstr</a>(ctx, <a class="code" href="group__capi.html#ga00866d16331d505620a6c515302021f9" title="Create an AST node representing args[0] or ... or args[num_args-1].">Z3_mk_or</a>(ctx, 2, g3));
<a name="l02219"></a>02219     <a class="code" href="group__capi.html#ga1a05ff73a564ae7256a2257048a4680a" title="Assert a constraint into the logical context.">Z3_assert_cnstr</a>(ctx, <a class="code" href="group__capi.html#ga00866d16331d505620a6c515302021f9" title="Create an AST node representing args[0] or ... or args[num_args-1].">Z3_mk_or</a>(ctx, 2, g4));
<a name="l02220"></a>02220 
<a name="l02221"></a>02221     result = <a class="code" href="group__capi.html#ga289e6cfc3207ee0beb4f9dc8dd4e378b" title="Check whether the given logical context and optional assumptions is consistent or...">Z3_check_assumptions</a>(ctx, 4, assumptions, &amp;m, &amp;proof, &amp;core_size, core);
<a name="l02222"></a>02222 
<a name="l02223"></a>02223     <span class="keywordflow">switch</span> (result) {
<a name="l02224"></a>02224     <span class="keywordflow">case</span> Z3_L_FALSE:
<a name="l02225"></a>02225         printf(<span class="stringliteral">&quot;unsat\n&quot;</span>);
<a name="l02226"></a>02226         printf(<span class="stringliteral">&quot;proof: %s\n&quot;</span>, <a class="code" href="group__capi.html#gab1aa4b78298fe00b3167bf7bfd88aea3" title="Convert the given AST node into a string.">Z3_ast_to_string</a>(ctx, proof));
<a name="l02227"></a>02227 
<a name="l02228"></a>02228         printf(<span class="stringliteral">&quot;\ncore:\n&quot;</span>);
<a name="l02229"></a>02229         <span class="keywordflow">for</span> (i = 0; i &lt; core_size; ++i) {
<a name="l02230"></a>02230                         printf(<span class="stringliteral">&quot;%s\n&quot;</span>, <a class="code" href="group__capi.html#gab1aa4b78298fe00b3167bf7bfd88aea3" title="Convert the given AST node into a string.">Z3_ast_to_string</a>(ctx, core[i]));
<a name="l02231"></a>02231         }
<a name="l02232"></a>02232         printf(<span class="stringliteral">&quot;\n&quot;</span>);
<a name="l02233"></a>02233         <span class="keywordflow">break</span>;
<a name="l02234"></a>02234     <span class="keywordflow">case</span> Z3_L_UNDEF:
<a name="l02235"></a>02235         printf(<span class="stringliteral">&quot;unknown\n&quot;</span>);
<a name="l02236"></a>02236         printf(<span class="stringliteral">&quot;potential model:\n&quot;</span>);
<a name="l02237"></a>02237         <a class="code" href="group__capi__ex.html#ga4af59d866d3845962448d1354b89e3c6" title="Custom model pretty printer.">display_model</a>(ctx, stdout, m);
<a name="l02238"></a>02238         <span class="keywordflow">break</span>;
<a name="l02239"></a>02239     <span class="keywordflow">case</span> Z3_L_TRUE:
<a name="l02240"></a>02240         printf(<span class="stringliteral">&quot;sat\n&quot;</span>);
<a name="l02241"></a>02241         <a class="code" href="group__capi__ex.html#ga4af59d866d3845962448d1354b89e3c6" title="Custom model pretty printer.">display_model</a>(ctx, stdout, m);
<a name="l02242"></a>02242         <span class="keywordflow">break</span>;
<a name="l02243"></a>02243     }
<a name="l02244"></a>02244     <span class="keywordflow">if</span> (m) {
<a name="l02245"></a>02245         <a class="code" href="group__capi.html#ga0cc98d3ce68047f873e119bccaabdbee" title="Delete a model object.">Z3_del_model</a>(ctx, m);
<a name="l02246"></a>02246     }
<a name="l02247"></a>02247 
<a name="l02248"></a>02248     <span class="comment">/* delete logical context */</span>
<a name="l02249"></a>02249     <a class="code" href="group__capi.html#ga556eae80ed43ab13e1e7dc3b38c35200" title="Delete the given logical context.">Z3_del_context</a>(ctx);
<a name="l02250"></a>02250 }
</pre></div></p>

</div>
</div>
</div>
<div class="tabs"></div>
<address style="text-align: right;">
Last modified Thu Aug 9 16:34:45 2012
</BODY>
</HTML>
