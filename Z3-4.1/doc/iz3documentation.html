 <HTML>
    <HEAD>
    <meta name="author" content="Leonardo de Moura" />
    <meta name="author" content="Nikolaj Bjorner" />
    <meta name="description" content="Z3: theorem prover" />
    <meta name="keywords" content="decision procedure, theorem prover, SMT-LIB, SMTLIB, SMT LIB, SMT Solver, SMTCOMP, SMT-COMP, SAT solver, formal methods, constraint solver, software verification, hardware verification" />
      <TITLE>Z3: Theorem Prover</TITLE>
      <LINK HREF="z3.css" REL="stylesheet" TYPE="text/css">
      <LINK href="tabs.css" rel="stylesheet" type="text/css">
    </HEAD>
<BODY BGCOLOR="#FFFFFF">

<table>
<tr>
<th style="width:120px"><a style="border=0px" class="el" href="index.html"><img border="0" src="z3.png" alt="Z3" /></a></th>
<th style="width:100%">
<div id="nav">
<ul>
<li><a href="download.html">Download</a></li>
<li>/</li>
<li><a href="documentation.html#tutorial">Tutorials</a></li>
<li>/</li>
<li><a href="documentation.html">Documentation</a></li>
<li>/</li>
<li><a href="mail.html">Contact</a></li>
<li>/</li>
<li><a href="faq.html">FAQ</a></li>
<li>/</li>
<li><a href="awards.html">Awards</a></li>
<li>/</li>
<li><a href="http://research.microsoft.com/en-us/groups/rise/default.aspx">RiSE</a></li>
</ul>
</div>
</th>
<th style="width:120px">
<a style="border=0px" class="el" href="http://research.microsoft.com"><img border="0" src="logo_msr.gif" alt="Microsoft Research" />
</th>
</tr>
</table>

<!-- <p> -->
<!-- <img align="middle" src="z3.png" alt="Z3" /> -->
<!-- <table class="centered-small"> -->
<!--   <tr> -->
<!--     <th><a href="index.html"><span>Home</span></a></th> -->
<!--     <th> &bull; </th> -->
<!--     <th><a href="documentation.html"><span>Docs</span></a></th> -->
<!--     <th> &bull; </th> -->
<!--     <th><a href="download.html"><span>Download</span></a></th> -->
<!--     <th> &bull; </th> -->
<!--     <th><a href="mail.html"><span>Mail</span></a></th> -->
<!--     <th> &bull; </th> -->
<!--     <th><a href="faq.html"><span>FAQ</span></a></th> -->
<!--     <th> &bull; </th> -->
<!--     <th><a href="awards.html"><span>Awards</span></a></th> -->
<!--     <th> &bull; </th> -->
<!--     <th><a href="http://research.microsoft.com/en-us/groups/rise/default.aspx"><span>RiSE</span></a></th> -->
<!--     <th> &bull; </th> -->
<!--     <th><a href="http://research.microsoft.com"><span>MSR</span></a></th> -->
<!--   </tr> -->
<!-- </table> -->
<!-- </p> -->

<!-- Generated by Doxygen 1.6.3 -->
<div class="contents">


<h1><a class="anchor" id="iz3documentation">iZ3 Documentation </a></h1><h2><a class="anchor" id="iz3interpolants">
Craig interpolants</a></h2>
<p>For information what Craig interpolants are and how iZ3 computes them, see <a href="http://research.microsoft.com/apps/pubs/?id=158587">this paper</a>.</p>
<h2><a class="anchor" id="iz3format">
File format</a></h2>
<p>iZ3 reads interpolation problems in two formats, both of which are compatible with the <a href="http://www.smtlib.org" class="el">SMT-LIB 1.2 standard</a>, using the theory AUFLIA.</p>
<h3><a class="anchor" id="iz3seqinterp">
Sequence interpolant</a></h3>
<p>An interpolant for a sequence of formulas A1...An is a sequence of formulas I1...In-1 such that A1 implies I1, I1 and A2 imply A3, ..., and In-1 and An-1 imply In-1. Moreover, each Ii must be expressed using just the symbols of the logic, the interpreted symbols of the theory, and symbols in common between A1..Ai and Ai+1..An.</p>
<p>iZ3 represents the input sequence A1..An in SMT-LIB format as a sequence of ":formula" statements. An example of this format is <a class="el" href="seq1_8smt_source.html">seq1.smt</a>. If these formulas are unsatisfiable, iZ3 outputs an interpolant as a sequence of formulas I1..In-1.</p>
<h3><a class="anchor" id="iz3treeinterp">
Tree interpolants</a></h3>
<p>Suppose T = (V,E,L) is a directed labeled tree, with vertex set V, edges set E and labeling function L that maps each vertex to a formula. An interpolant for this tree is a labeling function I from V to formulas, such that I of the root vertex is "false" and for every vertex v, L(v) and the conjunction of I(w) for children w of v implies I(v), and moreover, I(v) is expressed using just the symbols of the logic, the interpreted symbols of the theory, and the common symbols between the subtree rooted at v and the remainder of the tree.</p>
<p>A tree interpolation problem is represented in SMT-LIB format as follows. The vertices of the tree are represented by fresh Boolean symbols, except the root, which is represented by "false". For each vertex v of the tree, there is a formula of the form (implies (and w1 ... wm L(v)) v) where w1...wm are the children of v. The vertices w1..wn must precede vertex v in the file. The root vertex, represented by "false" is necessarily last. An example of this format is <a class="el" href="tree1_8smt_source.html">tree1.smt</a>. If the set of formulas L(v) is unsatisfiable, iZ3 outputs an interpolant as a sequence of formulas I(v1)...I(vn-1) where v1...vn-1 are the vertices in the order in which they occur in the input file, excluding the root.</p>
<h3><a class="anchor" id="iz3cmdline">
Command line</a></h3>
<p>iZ3 is invoked on the command line like this:</p>
<pre>
   iZ3 [options] file.smt
   </pre><p>The available options are:</p>
<pre>
   -t,--tree       interpret input as a tree interpolation problem
   -c,--check      check that the result is correct
   -p,--profile    print user time profile information
   -f,--flat       ouput flat formulas
   -o file         ouput to SMT-LIB file
   </pre><p>The "flat" output format can be easier to read, since it does not use "let" bindings for sub-expressions. However, flat formules can also be exponentially larger.</p>
<p>Usage examples:</p>
<pre>
&gt; iz3 -f <a class="el" href="seq1_8smt_source.html">seq1.smt</a>
unsat
interpolant:
(not (&gt;= x 0))
(and (not (&lt;= y 0)) (not (&gt;= x 0)))
</pre><pre>
&gt; iz3.exe -t -f <a class="el" href="tree1_8smt_source.html">tree1.smt</a>
unsat
interpolant:
(not (&gt;= x 0))
(not (&lt;= y 0))
</pre><p>Note that while the sequence and tree interpolation examples have the same constraints, the interpolants differ.</p>
<h3><a class="anchor" id="iz3capi">
C language API</a></h3>
<p>iZ3 provides an API for C and C++ programmers. It extends the <a href="http://research.microsoft.com/en-us/um/redmond/projects/z3/group__capi.html">Z3 C API</a> by added a set of calls to support interpolation.</p>
<ul>
<li><a class="el" href="iz3.html">iZ3 interpolating theorem prover</a></li>
</ul>
<h3><a class="anchor" id="iz3limitations">
Limitations and bugs</a></h3>
<p>Currently, tree interpolation is not fully implemented, and is subject to the following restrictions: (1) a constant symbol (nullary function symbol) may occur only along one path from root to leaf. (2) Non-nullary function symbols are considered global, that is, may occur in any interpolant formula. Note that (1) is a nuisance, but not a fundamental limitation, since a constant symbol that occurs along two branching paths may replaced by separate symbols for each path that are equated at the least common ancestor.</p>
<p>Contary to the specification, the function Z3_write_interpolation_problem actually writes some of the forulas in the output file using the :assumption tag rather the :formula tag. These files are still read correctly by Z3_read_interpolation_problem.</p>
<p>There is an incompleteness for intereger arithmetic in FOCI that sometimes impacts iZ3. The symptom of this is a message "invalid
   lemma written to file invalid_lemma.smt". </p>
</div>
<div class="tabs"></div>
<address style="text-align: right;">
Last modified Thu Aug 9 16:34:44 2012
</BODY>
</HTML>
